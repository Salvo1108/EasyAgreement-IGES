function cov_2kqhs1wvoi(){var path="/Users/salvatore/Desktop/EasyAgreement-IGES/app/controllers/academicTutorControl.js";var hash="aa40b5d98956ad99727d7e096fe8c41c463c5db5";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/salvatore/Desktop/EasyAgreement-IGES/app/controllers/academicTutorControl.js",statementMap:{"0":{start:{line:1,column:11},end:{line:1,column:31}},"1":{start:{line:2,column:25},end:{line:2,column:62}},"2":{start:{line:9,column:0},end:{line:70,column:1}},"3":{start:{line:10,column:2},end:{line:69,column:4}},"4":{start:{line:11,column:15},end:{line:11,column:35}},"5":{start:{line:12,column:18},end:{line:12,column:41}},"6":{start:{line:13,column:21},end:{line:13,column:46}},"7":{start:{line:15,column:24},end:{line:15,column:48}},"8":{start:{line:18,column:18},end:{line:18,column:22}},"9":{start:{line:20,column:4},end:{line:27,column:5}},"10":{start:{line:21,column:6},end:{line:26,column:7}},"11":{start:{line:22,column:8},end:{line:22,column:47}},"12":{start:{line:23,column:8},end:{line:23,column:23}},"13":{start:{line:25,column:8},end:{line:25,column:35}},"14":{start:{line:29,column:4},end:{line:36,column:5}},"15":{start:{line:30,column:6},end:{line:35,column:7}},"16":{start:{line:31,column:8},end:{line:31,column:50}},"17":{start:{line:32,column:8},end:{line:32,column:23}},"18":{start:{line:34,column:8},end:{line:34,column:41}},"19":{start:{line:38,column:4},end:{line:45,column:5}},"20":{start:{line:39,column:6},end:{line:44,column:7}},"21":{start:{line:40,column:8},end:{line:40,column:45}},"22":{start:{line:41,column:8},end:{line:41,column:23}},"23":{start:{line:43,column:8},end:{line:43,column:47}},"24":{start:{line:47,column:4},end:{line:50,column:5}},"25":{start:{line:48,column:6},end:{line:48,column:20}},"26":{start:{line:49,column:6},end:{line:49,column:12}},"27":{start:{line:52,column:17},end:{line:52,column:104}},"28":{start:{line:60,column:4},end:{line:68,column:6}},"29":{start:{line:61,column:6},end:{line:67,column:7}},"30":{start:{line:62,column:8},end:{line:62,column:42}},"31":{start:{line:63,column:8},end:{line:63,column:36}},"32":{start:{line:64,column:8},end:{line:64,column:17}},"33":{start:{line:66,column:8},end:{line:66,column:17}},"34":{start:{line:77,column:0},end:{line:127,column:1}},"35":{start:{line:78,column:2},end:{line:126,column:4}},"36":{start:{line:79,column:22},end:{line:79,column:47}},"37":{start:{line:80,column:19},end:{line:80,column:41}},"38":{start:{line:81,column:26},end:{line:81,column:55}},"39":{start:{line:84,column:18},end:{line:84,column:22}},"40":{start:{line:86,column:4},end:{line:89,column:5}},"41":{start:{line:87,column:6},end:{line:87,column:39}},"42":{start:{line:88,column:6},end:{line:88,column:21}},"43":{start:{line:91,column:4},end:{line:94,column:5}},"44":{start:{line:92,column:6},end:{line:92,column:36}},"45":{start:{line:93,column:6},end:{line:93,column:21}},"46":{start:{line:96,column:4},end:{line:99,column:5}},"47":{start:{line:97,column:6},end:{line:97,column:43}},"48":{start:{line:98,column:6},end:{line:98,column:21}},"49":{start:{line:101,column:4},end:{line:104,column:5}},"50":{start:{line:102,column:6},end:{line:102,column:20}},"51":{start:{line:103,column:6},end:{line:103,column:12}},"52":{start:{line:106,column:4},end:{line:125,column:5}},"53":{start:{line:107,column:27},end:{line:107,column:54}},"54":{start:{line:108,column:19},end:{line:108,column:102}},"55":{start:{line:115,column:6},end:{line:121,column:8}},"56":{start:{line:116,column:8},end:{line:120,column:28}},"57":{start:{line:117,column:10},end:{line:117,column:44}},"58":{start:{line:118,column:10},end:{line:118,column:42}},"59":{start:{line:119,column:10},end:{line:119,column:23}},"60":{start:{line:120,column:17},end:{line:120,column:26}},"61":{start:{line:123,column:6},end:{line:123,column:39}},"62":{start:{line:124,column:6},end:{line:124,column:19}},"63":{start:{line:134,column:0},end:{line:141,column:1}},"64":{start:{line:135,column:2},end:{line:140,column:4}},"65":{start:{line:136,column:14},end:{line:136,column:55}},"66":{start:{line:137,column:4},end:{line:139,column:6}},"67":{start:{line:138,column:6},end:{line:138,column:129}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:9,column:17},end:{line:9,column:18}},loc:{start:{line:9,column:37},end:{line:70,column:1}},line:9},"1":{name:"(anonymous_1)",decl:{start:{line:10,column:21},end:{line:10,column:22}},loc:{start:{line:10,column:48},end:{line:69,column:3}},line:10},"2":{name:"(anonymous_2)",decl:{start:{line:60,column:16},end:{line:60,column:17}},loc:{start:{line:60,column:34},end:{line:68,column:5}},line:60},"3":{name:"(anonymous_3)",decl:{start:{line:77,column:25},end:{line:77,column:26}},loc:{start:{line:77,column:45},end:{line:127,column:1}},line:77},"4":{name:"(anonymous_4)",decl:{start:{line:78,column:21},end:{line:78,column:22}},loc:{start:{line:78,column:48},end:{line:126,column:3}},line:78},"5":{name:"(anonymous_5)",decl:{start:{line:115,column:18},end:{line:115,column:19}},loc:{start:{line:115,column:36},end:{line:121,column:7}},line:115},"6":{name:"(anonymous_6)",decl:{start:{line:134,column:21},end:{line:134,column:22}},loc:{start:{line:134,column:38},end:{line:141,column:1}},line:134},"7":{name:"(anonymous_7)",decl:{start:{line:135,column:21},end:{line:135,column:22}},loc:{start:{line:135,column:48},end:{line:140,column:3}},line:135},"8":{name:"(anonymous_8)",decl:{start:{line:137,column:13},end:{line:137,column:14}},loc:{start:{line:137,column:31},end:{line:139,column:5}},line:137}},branchMap:{"0":{loc:{start:{line:20,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:27,column:5}},{start:{line:20,column:4},end:{line:27,column:5}}],line:20},"1":{loc:{start:{line:21,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:21,column:6},end:{line:26,column:7}},{start:{line:21,column:6},end:{line:26,column:7}}],line:21},"2":{loc:{start:{line:21,column:10},end:{line:21,column:57}},type:"binary-expr",locations:[{start:{line:21,column:10},end:{line:21,column:37}},{start:{line:21,column:41},end:{line:21,column:57}}],line:21},"3":{loc:{start:{line:29,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:29,column:4},end:{line:36,column:5}},{start:{line:29,column:4},end:{line:36,column:5}}],line:29},"4":{loc:{start:{line:30,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:35,column:7}},{start:{line:30,column:6},end:{line:35,column:7}}],line:30},"5":{loc:{start:{line:30,column:10},end:{line:30,column:63}},type:"binary-expr",locations:[{start:{line:30,column:10},end:{line:30,column:40}},{start:{line:30,column:44},end:{line:30,column:63}}],line:30},"6":{loc:{start:{line:38,column:4},end:{line:45,column:5}},type:"if",locations:[{start:{line:38,column:4},end:{line:45,column:5}},{start:{line:38,column:4},end:{line:45,column:5}}],line:38},"7":{loc:{start:{line:39,column:6},end:{line:44,column:7}},type:"if",locations:[{start:{line:39,column:6},end:{line:44,column:7}},{start:{line:39,column:6},end:{line:44,column:7}}],line:39},"8":{loc:{start:{line:39,column:10},end:{line:39,column:69}},type:"binary-expr",locations:[{start:{line:39,column:10},end:{line:39,column:43}},{start:{line:39,column:47},end:{line:39,column:69}}],line:39},"9":{loc:{start:{line:47,column:4},end:{line:50,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:50,column:5}},{start:{line:47,column:4},end:{line:50,column:5}}],line:47},"10":{loc:{start:{line:61,column:6},end:{line:67,column:7}},type:"if",locations:[{start:{line:61,column:6},end:{line:67,column:7}},{start:{line:61,column:6},end:{line:67,column:7}}],line:61},"11":{loc:{start:{line:86,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:89,column:5}},{start:{line:86,column:4},end:{line:89,column:5}}],line:86},"12":{loc:{start:{line:86,column:8},end:{line:86,column:99}},type:"binary-expr",locations:[{start:{line:86,column:9},end:{line:86,column:28}},{start:{line:86,column:34},end:{line:86,column:57}},{start:{line:86,column:63},end:{line:86,column:98}}],line:86},"13":{loc:{start:{line:91,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:91,column:4},end:{line:94,column:5}},{start:{line:91,column:4},end:{line:94,column:5}}],line:91},"14":{loc:{start:{line:91,column:8},end:{line:91,column:90}},type:"binary-expr",locations:[{start:{line:91,column:9},end:{line:91,column:25}},{start:{line:91,column:31},end:{line:91,column:51}},{start:{line:91,column:57},end:{line:91,column:89}}],line:91},"15":{loc:{start:{line:96,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:96,column:4},end:{line:99,column:5}},{start:{line:96,column:4},end:{line:99,column:5}}],line:96},"16":{loc:{start:{line:101,column:4},end:{line:104,column:5}},type:"if",locations:[{start:{line:101,column:4},end:{line:104,column:5}},{start:{line:101,column:4},end:{line:104,column:5}}],line:101},"17":{loc:{start:{line:106,column:4},end:{line:125,column:5}},type:"if",locations:[{start:{line:106,column:4},end:{line:125,column:5}},{start:{line:106,column:4},end:{line:125,column:5}}],line:106},"18":{loc:{start:{line:116,column:8},end:{line:120,column:28}},type:"if",locations:[{start:{line:116,column:8},end:{line:120,column:28}},{start:{line:116,column:8},end:{line:120,column:28}}],line:116}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0,0],"13":[0,0],"14":[0,0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aa40b5d98956ad99727d7e096fe8c41c463c5db5"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2kqhs1wvoi=function(){return actualCoverage;};}return actualCoverage;}cov_2kqhs1wvoi();var hash=(cov_2kqhs1wvoi().s[0]++,require('./hash.js'));var AcademicTutorModel=(cov_2kqhs1wvoi().s[1]++,require('../models/academicTutor.js'));/**
 * This method updates the academic tutor's informations
 * @param {Object} req - The HTTP request
 * @param {Object} res - The HTTP response
 * @returns {Boolean}  - It returns true if the update was successfull, else false
 */cov_2kqhs1wvoi().s[2]++;exports.update=function(req,res){cov_2kqhs1wvoi().f[0]++;cov_2kqhs1wvoi().s[3]++;return new Promise(function(resolve,reject){cov_2kqhs1wvoi().f[1]++;var name=(cov_2kqhs1wvoi().s[4]++,req.body.inputNameAc);var surname=(cov_2kqhs1wvoi().s[5]++,req.body.inputSurnameAc);var department=(cov_2kqhs1wvoi().s[6]++,req.body.inputDepartmentT);var academicTutor=(cov_2kqhs1wvoi().s[7]++,new AcademicTutorModel());// Form validation
var isRight=(cov_2kqhs1wvoi().s[8]++,true);cov_2kqhs1wvoi().s[9]++;if(name.length!=0){cov_2kqhs1wvoi().b[0][0]++;cov_2kqhs1wvoi().s[10]++;if((cov_2kqhs1wvoi().b[2][0]++,!/^[A-Za-z]+$/.test(name))||(cov_2kqhs1wvoi().b[2][1]++,name.length<=2)){cov_2kqhs1wvoi().b[1][0]++;cov_2kqhs1wvoi().s[11]++;res.cookie('erracademicTutorName','1');cov_2kqhs1wvoi().s[12]++;isRight=false;}else{cov_2kqhs1wvoi().b[1][1]++;cov_2kqhs1wvoi().s[13]++;academicTutor.setName(name);}}else{cov_2kqhs1wvoi().b[0][1]++;}cov_2kqhs1wvoi().s[14]++;if(surname.length!=0){cov_2kqhs1wvoi().b[3][0]++;cov_2kqhs1wvoi().s[15]++;if((cov_2kqhs1wvoi().b[5][0]++,!/^[A-Za-z]+$/.test(surname))||(cov_2kqhs1wvoi().b[5][1]++,surname.length<=2)){cov_2kqhs1wvoi().b[4][0]++;cov_2kqhs1wvoi().s[16]++;res.cookie('erracademicTutorSurname','1');cov_2kqhs1wvoi().s[17]++;isRight=false;}else{cov_2kqhs1wvoi().b[4][1]++;cov_2kqhs1wvoi().s[18]++;academicTutor.setSurname(surname);}}else{cov_2kqhs1wvoi().b[3][1]++;}cov_2kqhs1wvoi().s[19]++;if(department.length!=0){cov_2kqhs1wvoi().b[6][0]++;cov_2kqhs1wvoi().s[20]++;if((cov_2kqhs1wvoi().b[8][0]++,!/^[A-Za-z]+$/.test(department))||(cov_2kqhs1wvoi().b[8][1]++,department.length<=2)){cov_2kqhs1wvoi().b[7][0]++;cov_2kqhs1wvoi().s[21]++;res.cookie('errTutorDepartment','1');cov_2kqhs1wvoi().s[22]++;isRight=false;}else{cov_2kqhs1wvoi().b[7][1]++;cov_2kqhs1wvoi().s[23]++;academicTutor.setDepartment(department);}}else{cov_2kqhs1wvoi().b[6][1]++;}cov_2kqhs1wvoi().s[24]++;if(!isRight){cov_2kqhs1wvoi().b[9][0]++;cov_2kqhs1wvoi().s[25]++;resolve(false);cov_2kqhs1wvoi().s[26]++;return;}else{cov_2kqhs1wvoi().b[9][1]++;}var checkS=(cov_2kqhs1wvoi().s[27]++,AcademicTutorModel.updateAcademicTutor(academicTutor,req.session.utente.utente.E_mail));/**
  * This method checks the result of updateAcademicTutor function and updates the academic tutor session
  * @param  {Object} result - The result of updateAcademicTutor function
  * @returns {Boolean} - It returns true and generates an "edit complete" cookie if result != null, else it returns a reject
  */cov_2kqhs1wvoi().s[28]++;checkS.then(function(result){cov_2kqhs1wvoi().f[2]++;cov_2kqhs1wvoi().s[29]++;if(result!=null){cov_2kqhs1wvoi().b[10][0]++;cov_2kqhs1wvoi().s[30]++;req.session.utente.utente=result;cov_2kqhs1wvoi().s[31]++;res.cookie('updateEff','1');cov_2kqhs1wvoi().s[32]++;resolve();}else{cov_2kqhs1wvoi().b[10][1]++;cov_2kqhs1wvoi().s[33]++;resolve();}});});};/**
 * This method updates the academic tutor's password
 * @param {Object} req - The HTTP request
 * @param {Object} res - The HTTP response
 * @returns {Boolean}  - It returns true if the update was successfull, else false
  */cov_2kqhs1wvoi().s[34]++;exports.updatePassword=function(req,res){cov_2kqhs1wvoi().f[3]++;cov_2kqhs1wvoi().s[35]++;return new Promise(function(resolve,reject){cov_2kqhs1wvoi().f[4]++;var oldPassword=(cov_2kqhs1wvoi().s[36]++,req.body.inputOldPassword);var password=(cov_2kqhs1wvoi().s[37]++,req.body.inputPassword);var passwordConfirm=(cov_2kqhs1wvoi().s[38]++,req.body.inputConfirmPassword);// Form Validation
var isRight=(cov_2kqhs1wvoi().s[39]++,true);cov_2kqhs1wvoi().s[40]++;if((cov_2kqhs1wvoi().b[12][0]++,oldPassword==null)||(cov_2kqhs1wvoi().b[12][1]++,oldPassword.length<=7)||(cov_2kqhs1wvoi().b[12][2]++,!/^[A-Za-z0-9]+$/.test(oldPassword))){cov_2kqhs1wvoi().b[11][0]++;cov_2kqhs1wvoi().s[41]++;res.cookie('errOldPassword','1');cov_2kqhs1wvoi().s[42]++;isRight=false;}else{cov_2kqhs1wvoi().b[11][1]++;}cov_2kqhs1wvoi().s[43]++;if((cov_2kqhs1wvoi().b[14][0]++,password==null)||(cov_2kqhs1wvoi().b[14][1]++,password.length<=7)||(cov_2kqhs1wvoi().b[14][2]++,!/^[A-Za-z0-9]+$/.test(password))){cov_2kqhs1wvoi().b[13][0]++;cov_2kqhs1wvoi().s[44]++;res.cookie('errPassword','1');cov_2kqhs1wvoi().s[45]++;isRight=false;}else{cov_2kqhs1wvoi().b[13][1]++;}cov_2kqhs1wvoi().s[46]++;if(passwordConfirm!=password){cov_2kqhs1wvoi().b[15][0]++;cov_2kqhs1wvoi().s[47]++;res.cookie('errPasswordConfirm','1');cov_2kqhs1wvoi().s[48]++;isRight=false;}else{cov_2kqhs1wvoi().b[15][1]++;}cov_2kqhs1wvoi().s[49]++;if(!isRight){cov_2kqhs1wvoi().b[16][0]++;cov_2kqhs1wvoi().s[50]++;resolve(false);cov_2kqhs1wvoi().s[51]++;return;}else{cov_2kqhs1wvoi().b[16][1]++;}cov_2kqhs1wvoi().s[52]++;if(hash.checkPassword(req.session.utente.utente.Password.hash,req.session.utente.utente.Password.salt,oldPassword)){cov_2kqhs1wvoi().b[17][0]++;var passwordHashed=(cov_2kqhs1wvoi().s[53]++,hash.hashPassword(password));var checkS=(cov_2kqhs1wvoi().s[54]++,AcademicTutorModel.updatePassword(passwordHashed,req.session.utente.utente.E_mail));/**
        * It checks the result of updatePassword function and updates the academic tutor session
        * @param  {Object} result - The result of updatePassword function (about Academic Tutor)
        * @returns {Boolean} - It returns true and generates an "edit password complete" cookie if result != null, else it returns a reject
        */cov_2kqhs1wvoi().s[55]++;checkS.then(function(result){cov_2kqhs1wvoi().f[5]++;cov_2kqhs1wvoi().s[56]++;if(result!=null){cov_2kqhs1wvoi().b[18][0]++;cov_2kqhs1wvoi().s[57]++;req.session.utente.utente=result;cov_2kqhs1wvoi().s[58]++;res.cookie('updatePassEff','1');cov_2kqhs1wvoi().s[59]++;resolve(true);}else{cov_2kqhs1wvoi().b[18][1]++;cov_2kqhs1wvoi().s[60]++;resolve();}});}else{cov_2kqhs1wvoi().b[17][1]++;cov_2kqhs1wvoi().s[61]++;res.cookie('errOldPassword','1');cov_2kqhs1wvoi().s[62]++;resolve(true);}});};/**
 * This method retrieves the academic tutor informations by email
 * @param {String} email - Academic tutor's email to search
 * @returns {JSON} - It returns the JSON object containing the academic tutor's informations
 */cov_2kqhs1wvoi().s[63]++;exports.getByEmail=function(email){cov_2kqhs1wvoi().f[6]++;cov_2kqhs1wvoi().s[64]++;return new Promise(function(resolve,reject){cov_2kqhs1wvoi().f[7]++;var get=(cov_2kqhs1wvoi().s[65]++,AcademicTutorModel.RetrieveByEmail(email));cov_2kqhs1wvoi().s[66]++;get.then(function(result){cov_2kqhs1wvoi().f[8]++;cov_2kqhs1wvoi().s[67]++;resolve({Name:result.Name,Surname:result.getSurname(),E_mail:result.getEmail(),Department:result.getDepartment()});});});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjYWRlbWljVHV0b3JDb250cm9sLmpzIl0sIm5hbWVzIjpbImhhc2giLCJyZXF1aXJlIiwiQWNhZGVtaWNUdXRvck1vZGVsIiwiZXhwb3J0cyIsInVwZGF0ZSIsInJlcSIsInJlcyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwibmFtZSIsImJvZHkiLCJpbnB1dE5hbWVBYyIsInN1cm5hbWUiLCJpbnB1dFN1cm5hbWVBYyIsImRlcGFydG1lbnQiLCJpbnB1dERlcGFydG1lbnRUIiwiYWNhZGVtaWNUdXRvciIsImlzUmlnaHQiLCJsZW5ndGgiLCJ0ZXN0IiwiY29va2llIiwic2V0TmFtZSIsInNldFN1cm5hbWUiLCJzZXREZXBhcnRtZW50IiwiY2hlY2tTIiwidXBkYXRlQWNhZGVtaWNUdXRvciIsInNlc3Npb24iLCJ1dGVudGUiLCJFX21haWwiLCJ0aGVuIiwicmVzdWx0IiwidXBkYXRlUGFzc3dvcmQiLCJvbGRQYXNzd29yZCIsImlucHV0T2xkUGFzc3dvcmQiLCJwYXNzd29yZCIsImlucHV0UGFzc3dvcmQiLCJwYXNzd29yZENvbmZpcm0iLCJpbnB1dENvbmZpcm1QYXNzd29yZCIsImNoZWNrUGFzc3dvcmQiLCJQYXNzd29yZCIsInNhbHQiLCJwYXNzd29yZEhhc2hlZCIsImhhc2hQYXNzd29yZCIsImdldEJ5RW1haWwiLCJlbWFpbCIsImdldCIsIlJldHJpZXZlQnlFbWFpbCIsIk5hbWUiLCJTdXJuYW1lIiwiZ2V0U3VybmFtZSIsImdldEVtYWlsIiwiRGVwYXJ0bWVudCIsImdldERlcGFydG1lbnQiXSwibWFwcGluZ3MiOiJtb1VBZVk7MkZBZlosR0FBSUEsQ0FBQUEsSUFBSSwwQkFBR0MsT0FBTyxDQUFDLFdBQUQsQ0FBVixDQUFSLENBQ0EsR0FBSUMsQ0FBQUEsa0JBQWtCLDBCQUFHRCxPQUFPLENBQUMsNEJBQUQsQ0FBVixDQUF0QixDQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHLHdCQUNBRSxPQUFPLENBQUNDLE1BQVIsQ0FB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QUFDZSxNQUFKLENBQVcsZ0JBQVgsQ0FBNkIsR0FBN0IsRUFESyx5QkFFTGIsT0FBTyxDQUFDLElBQUQsQ0FBUCxDQUNELENBQ0YsQ0FoRE0sQ0FBUCxDQWlERCxDQWxERCxDQW9EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEcseUJBQ0FMLE9BQU8sQ0FBQ3lDLFVBQVIsQ0FBcUIsU0FBVUMsS0FBVixDQUFpQixrREFDcEMsTUFBTyxJQUFJdEMsQ0FBQUEsT0FBSixDQUFZLFNBQVVDLE9BQVYsQ0FBbUJDLE1BQW5CLENBQTJCLHlCQUM1QyxHQUFJcUMsQ0FBQUEsR0FBRywyQkFBRzVDLGtCQUFrQixDQUFDNkMsZUFBbkIsQ0FBbUNGLEtBQW5DLENBQUgsQ0FBUCxDQUQ0Qyx5QkFFNUNDLEdBQUcsQ0FBQ2hCLElBQUosQ0FBUyxTQUFVQyxNQUFWLENBQWtCLGtEQUN6QnZCLE9BQU8sQ0FBQyxDQUFFd0MsSUFBSSxDQUFFakIsTUFBTSxDQUFDaUIsSUFBZixDQUFxQkMsT0FBTyxDQUFFbEIsTUFBTSxDQUFDbUIsVUFBUCxFQUE5QixDQUFtRHJCLE1BQU0sQ0FBRUUsTUFBTSxDQUFDb0IsUUFBUCxFQUEzRCxDQUE4RUMsVUFBVSxDQUFFckIsTUFBTSxDQUFDc0IsYUFBUCxFQUExRixDQUFELENBQVAsQ0FDRCxDQUZELEVBR0QsQ0FMTSxDQUFQLENBTUQsQ0FQRCIsInNvdXJjZXNDb250ZW50IjpbInZhciBoYXNoID0gcmVxdWlyZSgnLi9oYXNoLmpzJylcbnZhciBBY2FkZW1pY1R1dG9yTW9kZWwgPSByZXF1aXJlKCcuLi9tb2RlbHMvYWNhZGVtaWNUdXRvci5qcycpXG4vKipcbiAqIFRoaXMgbWV0aG9kIHVwZGF0ZXMgdGhlIGFjYWRlbWljIHR1dG9yJ3MgaW5mb3JtYXRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gcmVxIC0gVGhlIEhUVFAgcmVxdWVzdFxuICogQHBhcmFtIHtPYmplY3R9IHJlcyAtIFRoZSBIVFRQIHJlc3BvbnNlXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gIC0gSXQgcmV0dXJucyB0cnVlIGlmIHRoZSB1cGRhdGUgd2FzIHN1Y2Nlc3NmdWxsLCBlbHNlIGZhbHNlXG4gKi9cbmV4cG9ydHMudXBkYXRlID0gZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIG5hbWUgPSByZXEuYm9keS5pbnB1dE5hbWVBY1xuICAgIHZhciBzdXJuYW1lID0gcmVxLmJvZHkuaW5wdXRTdXJuYW1lQWNcbiAgICB2YXIgZGVwYXJ0bWVudCA9IHJlcS5ib2R5LmlucHV0RGVwYXJ0bWVudFRcblxuICAgIHZhciBhY2FkZW1pY1R1dG9yID0gbmV3IEFjYWRlbWljVHV0b3JNb2RlbCgpXG5cbiAgICAvLyBGb3JtIHZhbGlkYXRpb25cbiAgICB2YXIgaXNSaWdodCA9IHRydWVcblxuICAgIGlmIChuYW1lLmxlbmd0aCAhPSAwKSB7XG4gICAgICBpZiAoISgvXltBLVphLXpdKyQvLnRlc3QobmFtZSkpIHx8IG5hbWUubGVuZ3RoIDw9IDIpIHtcbiAgICAgICAgcmVzLmNvb2tpZSgnZXJyYWNhZGVtaWNUdXRvck5hbWUnLCAnMScpXG4gICAgICAgIGlzUmlnaHQgPSBmYWxzZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWNhZGVtaWNUdXRvci5zZXROYW1lKG5hbWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN1cm5hbWUubGVuZ3RoICE9IDApIHtcbiAgICAgIGlmICghKC9eW0EtWmEtel0rJC8udGVzdChzdXJuYW1lKSkgfHwgc3VybmFtZS5sZW5ndGggPD0gMikge1xuICAgICAgICByZXMuY29va2llKCdlcnJhY2FkZW1pY1R1dG9yU3VybmFtZScsICcxJylcbiAgICAgICAgaXNSaWdodCA9IGZhbHNlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY2FkZW1pY1R1dG9yLnNldFN1cm5hbWUoc3VybmFtZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGVwYXJ0bWVudC5sZW5ndGggIT0gMCkge1xuICAgICAgaWYgKCEoL15bQS1aYS16XSskLy50ZXN0KGRlcGFydG1lbnQpKSB8fCBkZXBhcnRtZW50Lmxlbmd0aCA8PSAyKSB7XG4gICAgICAgIHJlcy5jb29raWUoJ2VyclR1dG9yRGVwYXJ0bWVudCcsICcxJylcbiAgICAgICAgaXNSaWdodCA9IGZhbHNlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY2FkZW1pY1R1dG9yLnNldERlcGFydG1lbnQoZGVwYXJ0bWVudClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWlzUmlnaHQpIHtcbiAgICAgIHJlc29sdmUoZmFsc2UpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB2YXIgY2hlY2tTID0gQWNhZGVtaWNUdXRvck1vZGVsLnVwZGF0ZUFjYWRlbWljVHV0b3IoYWNhZGVtaWNUdXRvciwgcmVxLnNlc3Npb24udXRlbnRlLnV0ZW50ZS5FX21haWwpXG5cbiAgICAvKipcbiAgKiBUaGlzIG1ldGhvZCBjaGVja3MgdGhlIHJlc3VsdCBvZiB1cGRhdGVBY2FkZW1pY1R1dG9yIGZ1bmN0aW9uIGFuZCB1cGRhdGVzIHRoZSBhY2FkZW1pYyB0dXRvciBzZXNzaW9uXG4gICogQHBhcmFtICB7T2JqZWN0fSByZXN1bHQgLSBUaGUgcmVzdWx0IG9mIHVwZGF0ZUFjYWRlbWljVHV0b3IgZnVuY3Rpb25cbiAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gLSBJdCByZXR1cm5zIHRydWUgYW5kIGdlbmVyYXRlcyBhbiBcImVkaXQgY29tcGxldGVcIiBjb29raWUgaWYgcmVzdWx0ICE9IG51bGwsIGVsc2UgaXQgcmV0dXJucyBhIHJlamVjdFxuICAqL1xuXG4gICAgY2hlY2tTLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgIHJlcS5zZXNzaW9uLnV0ZW50ZS51dGVudGUgPSByZXN1bHRcbiAgICAgICAgcmVzLmNvb2tpZSgndXBkYXRlRWZmJywgJzEnKVxuICAgICAgICByZXNvbHZlKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmUoKVxuICAgICAgfVxuICAgIH0pXG4gIH0pXG59XG4vKipcbiAqIFRoaXMgbWV0aG9kIHVwZGF0ZXMgdGhlIGFjYWRlbWljIHR1dG9yJ3MgcGFzc3dvcmRcbiAqIEBwYXJhbSB7T2JqZWN0fSByZXEgLSBUaGUgSFRUUCByZXF1ZXN0XG4gKiBAcGFyYW0ge09iamVjdH0gcmVzIC0gVGhlIEhUVFAgcmVzcG9uc2VcbiAqIEByZXR1cm5zIHtCb29sZWFufSAgLSBJdCByZXR1cm5zIHRydWUgaWYgdGhlIHVwZGF0ZSB3YXMgc3VjY2Vzc2Z1bGwsIGVsc2UgZmFsc2VcbiAgKi9cbmV4cG9ydHMudXBkYXRlUGFzc3dvcmQgPSBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgb2xkUGFzc3dvcmQgPSByZXEuYm9keS5pbnB1dE9sZFBhc3N3b3JkXG4gICAgdmFyIHBhc3N3b3JkID0gcmVxLmJvZHkuaW5wdXRQYXNzd29yZFxuICAgIHZhciBwYXNzd29yZENvbmZpcm0gPSByZXEuYm9keS5pbnB1dENvbmZpcm1QYXNzd29yZFxuXG4gICAgLy8gRm9ybSBWYWxpZGF0aW9uXG4gICAgdmFyIGlzUmlnaHQgPSB0cnVlXG5cbiAgICBpZiAoKG9sZFBhc3N3b3JkID09IG51bGwpIHx8IChvbGRQYXNzd29yZC5sZW5ndGggPD0gNykgfHwgKCEvXltBLVphLXowLTldKyQvLnRlc3Qob2xkUGFzc3dvcmQpKSkge1xuICAgICAgcmVzLmNvb2tpZSgnZXJyT2xkUGFzc3dvcmQnLCAnMScpXG4gICAgICBpc1JpZ2h0ID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoKHBhc3N3b3JkID09IG51bGwpIHx8IChwYXNzd29yZC5sZW5ndGggPD0gNykgfHwgKCEvXltBLVphLXowLTldKyQvLnRlc3QocGFzc3dvcmQpKSkge1xuICAgICAgcmVzLmNvb2tpZSgnZXJyUGFzc3dvcmQnLCAnMScpXG4gICAgICBpc1JpZ2h0ID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAocGFzc3dvcmRDb25maXJtICE9IHBhc3N3b3JkKSB7XG4gICAgICByZXMuY29va2llKCdlcnJQYXNzd29yZENvbmZpcm0nLCAnMScpXG4gICAgICBpc1JpZ2h0ID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoIWlzUmlnaHQpIHtcbiAgICAgIHJlc29sdmUoZmFsc2UpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoaGFzaC5jaGVja1Bhc3N3b3JkKHJlcS5zZXNzaW9uLnV0ZW50ZS51dGVudGUuUGFzc3dvcmQuaGFzaCwgcmVxLnNlc3Npb24udXRlbnRlLnV0ZW50ZS5QYXNzd29yZC5zYWx0LCBvbGRQYXNzd29yZCkpIHtcbiAgICAgIHZhciBwYXNzd29yZEhhc2hlZCA9IGhhc2guaGFzaFBhc3N3b3JkKHBhc3N3b3JkKVxuICAgICAgdmFyIGNoZWNrUyA9IEFjYWRlbWljVHV0b3JNb2RlbC51cGRhdGVQYXNzd29yZChwYXNzd29yZEhhc2hlZCwgcmVxLnNlc3Npb24udXRlbnRlLnV0ZW50ZS5FX21haWwpXG5cbiAgICAgIC8qKlxuICAgICAgICAqIEl0IGNoZWNrcyB0aGUgcmVzdWx0IG9mIHVwZGF0ZVBhc3N3b3JkIGZ1bmN0aW9uIGFuZCB1cGRhdGVzIHRoZSBhY2FkZW1pYyB0dXRvciBzZXNzaW9uXG4gICAgICAgICogQHBhcmFtICB7T2JqZWN0fSByZXN1bHQgLSBUaGUgcmVzdWx0IG9mIHVwZGF0ZVBhc3N3b3JkIGZ1bmN0aW9uIChhYm91dCBBY2FkZW1pYyBUdXRvcilcbiAgICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gLSBJdCByZXR1cm5zIHRydWUgYW5kIGdlbmVyYXRlcyBhbiBcImVkaXQgcGFzc3dvcmQgY29tcGxldGVcIiBjb29raWUgaWYgcmVzdWx0ICE9IG51bGwsIGVsc2UgaXQgcmV0dXJucyBhIHJlamVjdFxuICAgICAgICAqL1xuICAgICAgY2hlY2tTLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgICByZXEuc2Vzc2lvbi51dGVudGUudXRlbnRlID0gcmVzdWx0XG4gICAgICAgICAgcmVzLmNvb2tpZSgndXBkYXRlUGFzc0VmZicsICcxJylcbiAgICAgICAgICByZXNvbHZlKHRydWUpXG4gICAgICAgIH0gZWxzZSB7IHJlc29sdmUoKSB9XG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICByZXMuY29va2llKCdlcnJPbGRQYXNzd29yZCcsICcxJylcbiAgICAgIHJlc29sdmUodHJ1ZSlcbiAgICB9XG4gIH0pXG59XG5cbi8qKlxuICogVGhpcyBtZXRob2QgcmV0cmlldmVzIHRoZSBhY2FkZW1pYyB0dXRvciBpbmZvcm1hdGlvbnMgYnkgZW1haWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBlbWFpbCAtIEFjYWRlbWljIHR1dG9yJ3MgZW1haWwgdG8gc2VhcmNoXG4gKiBAcmV0dXJucyB7SlNPTn0gLSBJdCByZXR1cm5zIHRoZSBKU09OIG9iamVjdCBjb250YWluaW5nIHRoZSBhY2FkZW1pYyB0dXRvcidzIGluZm9ybWF0aW9uc1xuICovXG5leHBvcnRzLmdldEJ5RW1haWwgPSBmdW5jdGlvbiAoZW1haWwpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgZ2V0ID0gQWNhZGVtaWNUdXRvck1vZGVsLlJldHJpZXZlQnlFbWFpbChlbWFpbClcbiAgICBnZXQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICByZXNvbHZlKHsgTmFtZTogcmVzdWx0Lk5hbWUsIFN1cm5hbWU6IHJlc3VsdC5nZXRTdXJuYW1lKCksIEVfbWFpbDogcmVzdWx0LmdldEVtYWlsKCksIERlcGFydG1lbnQ6IHJlc3VsdC5nZXREZXBhcnRtZW50KCkgfSlcbiAgICB9KVxuICB9KVxufVxuIl19