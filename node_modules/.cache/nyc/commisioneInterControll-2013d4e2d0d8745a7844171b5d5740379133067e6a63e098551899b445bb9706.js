function cov_70jel8qna(){var path="/Users/salvatore/Desktop/EasyAgreement-IGES/app/controllers/commisioneInterControll.js";var hash="c787c0d984a9efcdb4e436a1eb1293c12d9dcd7b";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/salvatore/Desktop/EasyAgreement-IGES/app/controllers/commisioneInterControll.js",statementMap:{"0":{start:{line:1,column:11},end:{line:1,column:31}},"1":{start:{line:2,column:23},end:{line:2,column:62}},"2":{start:{line:11,column:1},end:{line:22,column:1}},"3":{start:{line:12,column:2},end:{line:21,column:4}},"4":{start:{line:13,column:23},end:{line:13,column:62}},"5":{start:{line:14,column:4},end:{line:20,column:6}},"6":{start:{line:15,column:6},end:{line:19,column:7}},"7":{start:{line:16,column:8},end:{line:16,column:22}},"8":{start:{line:18,column:8},end:{line:18,column:21}},"9":{start:{line:32,column:0},end:{line:78,column:1}},"10":{start:{line:33,column:2},end:{line:77,column:4}},"11":{start:{line:34,column:22},end:{line:34,column:47}},"12":{start:{line:35,column:19},end:{line:35,column:41}},"13":{start:{line:36,column:26},end:{line:36,column:55}},"14":{start:{line:37,column:18},end:{line:37,column:22}},"15":{start:{line:39,column:4},end:{line:42,column:5}},"16":{start:{line:40,column:6},end:{line:40,column:39}},"17":{start:{line:41,column:6},end:{line:41,column:21}},"18":{start:{line:44,column:4},end:{line:47,column:5}},"19":{start:{line:45,column:6},end:{line:45,column:36}},"20":{start:{line:46,column:6},end:{line:46,column:21}},"21":{start:{line:49,column:4},end:{line:52,column:5}},"22":{start:{line:50,column:6},end:{line:50,column:43}},"23":{start:{line:51,column:6},end:{line:51,column:21}},"24":{start:{line:54,column:4},end:{line:57,column:5}},"25":{start:{line:55,column:6},end:{line:55,column:20}},"26":{start:{line:56,column:6},end:{line:56,column:12}},"27":{start:{line:58,column:4},end:{line:76,column:5}},"28":{start:{line:59,column:27},end:{line:59,column:54}},"29":{start:{line:60,column:22},end:{line:60,column:102}},"30":{start:{line:66,column:6},end:{line:72,column:8}},"31":{start:{line:67,column:8},end:{line:71,column:28}},"32":{start:{line:68,column:10},end:{line:68,column:152}},"33":{start:{line:69,column:10},end:{line:69,column:42}},"34":{start:{line:70,column:10},end:{line:70,column:23}},"35":{start:{line:71,column:17},end:{line:71,column:26}},"36":{start:{line:74,column:6},end:{line:74,column:39}},"37":{start:{line:75,column:6},end:{line:75,column:20}},"38":{start:{line:86,column:1},end:{line:144,column:1}},"39":{start:{line:87,column:2},end:{line:143,column:4}},"40":{start:{line:88,column:15},end:{line:88,column:35}},"41":{start:{line:89,column:18},end:{line:89,column:41}},"42":{start:{line:90,column:16},end:{line:90,column:37}},"43":{start:{line:91,column:19},end:{line:91,column:41}},"44":{start:{line:92,column:21},end:{line:92,column:45}},"45":{start:{line:94,column:18},end:{line:94,column:22}},"46":{start:{line:95,column:4},end:{line:97,column:5}},"47":{start:{line:96,column:6},end:{line:96,column:21}},"48":{start:{line:99,column:4},end:{line:99,column:18}},"49":{start:{line:100,column:4},end:{line:103,column:5}},"50":{start:{line:101,column:6},end:{line:101,column:40}},"51":{start:{line:102,column:6},end:{line:102,column:21}},"52":{start:{line:105,column:4},end:{line:108,column:5}},"53":{start:{line:106,column:6},end:{line:106,column:43}},"54":{start:{line:107,column:6},end:{line:107,column:21}},"55":{start:{line:110,column:4},end:{line:113,column:5}},"56":{start:{line:111,column:6},end:{line:111,column:41}},"57":{start:{line:112,column:6},end:{line:112,column:21}},"58":{start:{line:115,column:4},end:{line:118,column:5}},"59":{start:{line:116,column:6},end:{line:116,column:36}},"60":{start:{line:117,column:6},end:{line:117,column:21}},"61":{start:{line:120,column:4},end:{line:123,column:5}},"62":{start:{line:121,column:6},end:{line:121,column:43}},"63":{start:{line:122,column:6},end:{line:122,column:21}},"64":{start:{line:125,column:4},end:{line:128,column:5}},"65":{start:{line:126,column:6},end:{line:126,column:20}},"66":{start:{line:127,column:6},end:{line:127,column:12}},"67":{start:{line:131,column:25},end:{line:131,column:52}},"68":{start:{line:134,column:21},end:{line:134,column:43}},"69":{start:{line:135,column:4},end:{line:135,column:34}},"70":{start:{line:136,column:4},end:{line:136,column:28}},"71":{start:{line:137,column:4},end:{line:137,column:30}},"72":{start:{line:138,column:4},end:{line:138,column:42}},"73":{start:{line:141,column:4},end:{line:141,column:46}},"74":{start:{line:142,column:4},end:{line:142,column:17}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:11,column:42},end:{line:11,column:43}},loc:{start:{line:11,column:64},end:{line:22,column:1}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:21},end:{line:12,column:22}},loc:{start:{line:12,column:48},end:{line:21,column:3}},line:12},"2":{name:"(anonymous_2)",decl:{start:{line:14,column:22},end:{line:14,column:23}},loc:{start:{line:14,column:40},end:{line:20,column:5}},line:14},"3":{name:"(anonymous_3)",decl:{start:{line:32,column:17},end:{line:32,column:18}},loc:{start:{line:32,column:37},end:{line:78,column:1}},line:32},"4":{name:"(anonymous_4)",decl:{start:{line:33,column:21},end:{line:33,column:22}},loc:{start:{line:33,column:48},end:{line:77,column:3}},line:33},"5":{name:"(anonymous_5)",decl:{start:{line:66,column:21},end:{line:66,column:22}},loc:{start:{line:66,column:39},end:{line:72,column:7}},line:66},"6":{name:"(anonymous_6)",decl:{start:{line:86,column:26},end:{line:86,column:27}},loc:{start:{line:86,column:46},end:{line:144,column:1}},line:86},"7":{name:"(anonymous_7)",decl:{start:{line:87,column:21},end:{line:87,column:22}},loc:{start:{line:87,column:48},end:{line:143,column:3}},line:87}},branchMap:{"0":{loc:{start:{line:15,column:6},end:{line:19,column:7}},type:"if",locations:[{start:{line:15,column:6},end:{line:19,column:7}},{start:{line:15,column:6},end:{line:19,column:7}}],line:15},"1":{loc:{start:{line:39,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:42,column:5}},{start:{line:39,column:4},end:{line:42,column:5}}],line:39},"2":{loc:{start:{line:39,column:8},end:{line:39,column:99}},type:"binary-expr",locations:[{start:{line:39,column:9},end:{line:39,column:28}},{start:{line:39,column:34},end:{line:39,column:57}},{start:{line:39,column:63},end:{line:39,column:98}}],line:39},"3":{loc:{start:{line:44,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:47,column:5}},{start:{line:44,column:4},end:{line:47,column:5}}],line:44},"4":{loc:{start:{line:44,column:8},end:{line:44,column:90}},type:"binary-expr",locations:[{start:{line:44,column:9},end:{line:44,column:25}},{start:{line:44,column:31},end:{line:44,column:51}},{start:{line:44,column:57},end:{line:44,column:89}}],line:44},"5":{loc:{start:{line:49,column:4},end:{line:52,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:52,column:5}},{start:{line:49,column:4},end:{line:52,column:5}}],line:49},"6":{loc:{start:{line:54,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:57,column:5}},{start:{line:54,column:4},end:{line:57,column:5}}],line:54},"7":{loc:{start:{line:58,column:4},end:{line:76,column:5}},type:"if",locations:[{start:{line:58,column:4},end:{line:76,column:5}},{start:{line:58,column:4},end:{line:76,column:5}}],line:58},"8":{loc:{start:{line:67,column:8},end:{line:71,column:28}},type:"if",locations:[{start:{line:67,column:8},end:{line:71,column:28}},{start:{line:67,column:8},end:{line:71,column:28}}],line:67},"9":{loc:{start:{line:95,column:4},end:{line:97,column:5}},type:"if",locations:[{start:{line:95,column:4},end:{line:97,column:5}},{start:{line:95,column:4},end:{line:97,column:5}}],line:95},"10":{loc:{start:{line:100,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:100,column:4},end:{line:103,column:5}},{start:{line:100,column:4},end:{line:103,column:5}}],line:100},"11":{loc:{start:{line:100,column:8},end:{line:100,column:75}},type:"binary-expr",locations:[{start:{line:100,column:9},end:{line:100,column:21}},{start:{line:100,column:27},end:{line:100,column:43}},{start:{line:100,column:49},end:{line:100,column:74}}],line:100},"12":{loc:{start:{line:105,column:4},end:{line:108,column:5}},type:"if",locations:[{start:{line:105,column:4},end:{line:108,column:5}},{start:{line:105,column:4},end:{line:108,column:5}}],line:105},"13":{loc:{start:{line:105,column:8},end:{line:105,column:84}},type:"binary-expr",locations:[{start:{line:105,column:9},end:{line:105,column:24}},{start:{line:105,column:30},end:{line:105,column:49}},{start:{line:105,column:55},end:{line:105,column:83}}],line:105},"14":{loc:{start:{line:110,column:4},end:{line:113,column:5}},type:"if",locations:[{start:{line:110,column:4},end:{line:113,column:5}},{start:{line:110,column:4},end:{line:113,column:5}}],line:110},"15":{loc:{start:{line:110,column:8},end:{line:110,column:202}},type:"binary-expr",locations:[{start:{line:110,column:9},end:{line:110,column:22}},{start:{line:110,column:28},end:{line:110,column:45}},{start:{line:110,column:51},end:{line:110,column:201}}],line:110},"16":{loc:{start:{line:115,column:4},end:{line:118,column:5}},type:"if",locations:[{start:{line:115,column:4},end:{line:118,column:5}},{start:{line:115,column:4},end:{line:118,column:5}}],line:115},"17":{loc:{start:{line:115,column:8},end:{line:115,column:90}},type:"binary-expr",locations:[{start:{line:115,column:9},end:{line:115,column:25}},{start:{line:115,column:31},end:{line:115,column:51}},{start:{line:115,column:57},end:{line:115,column:89}}],line:115},"18":{loc:{start:{line:120,column:4},end:{line:123,column:5}},type:"if",locations:[{start:{line:120,column:4},end:{line:123,column:5}},{start:{line:120,column:4},end:{line:123,column:5}}],line:120},"19":{loc:{start:{line:125,column:4},end:{line:128,column:5}},type:"if",locations:[{start:{line:125,column:4},end:{line:128,column:5}},{start:{line:125,column:4},end:{line:128,column:5}}],line:125}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},b:{"0":[0,0],"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0,0],"12":[0,0],"13":[0,0,0],"14":[0,0],"15":[0,0,0],"16":[0,0],"17":[0,0,0],"18":[0,0],"19":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c787c0d984a9efcdb4e436a1eb1293c12d9dcd7b"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_70jel8qna=function(){return actualCoverage;};}return actualCoverage;}cov_70jel8qna();var hash=(cov_70jel8qna().s[0]++,require('./hash.js'));var commissioneModel=(cov_70jel8qna().s[1]++,require('../models/commisioneInter.js'));/**
 * This method deletes an commissarrio
 * @param {String} email - The commissarrio email
 * @param {Object} res - The HTTP res
 * @returns {Boolean}  - This method returns true if the delete of external tutor was successfull, else false
 */cov_70jel8qna().s[2]++;exports.deleteCommissionInternazionale=function(email,res){cov_70jel8qna().f[0]++;cov_70jel8qna().s[3]++;return new Promise(function(resolve,reject){cov_70jel8qna().f[1]++;var delcommInter=(cov_70jel8qna().s[4]++,commissioneModel.deleteCommInter(email));cov_70jel8qna().s[5]++;delcommInter.then(function(result){cov_70jel8qna().f[2]++;cov_70jel8qna().s[6]++;if(!result){cov_70jel8qna().b[0][0]++;cov_70jel8qna().s[7]++;resolve(false);}else{cov_70jel8qna().b[0][1]++;cov_70jel8qna().s[8]++;resolve(true);}});});};/**
 * This method updates the commission password
 * @param {Object} req - The HTTP request
 * @param {Object} res - The HTTP response
 * @returns {Boolean}  - It returns true if the update was successfull, else false
 */cov_70jel8qna().s[9]++;exports.update=function(req,res){cov_70jel8qna().f[3]++;cov_70jel8qna().s[10]++;return new Promise(function(resolve,reject){cov_70jel8qna().f[4]++;var oldPassword=(cov_70jel8qna().s[11]++,req.body.inputOldPassword);var password=(cov_70jel8qna().s[12]++,req.body.inputPassword);var passwordConfirm=(cov_70jel8qna().s[13]++,req.body.inputConfirmPassword);var isRight=(cov_70jel8qna().s[14]++,true);cov_70jel8qna().s[15]++;if((cov_70jel8qna().b[2][0]++,oldPassword==null)||(cov_70jel8qna().b[2][1]++,oldPassword.length<=7)||(cov_70jel8qna().b[2][2]++,!/^[A-Za-z0-9]+$/.test(oldPassword))){cov_70jel8qna().b[1][0]++;cov_70jel8qna().s[16]++;res.cookie('errOldPassword','1');cov_70jel8qna().s[17]++;isRight=false;}else{cov_70jel8qna().b[1][1]++;}cov_70jel8qna().s[18]++;if((cov_70jel8qna().b[4][0]++,password==null)||(cov_70jel8qna().b[4][1]++,password.length<=7)||(cov_70jel8qna().b[4][2]++,!/^[A-Za-z0-9]+$/.test(password))){cov_70jel8qna().b[3][0]++;cov_70jel8qna().s[19]++;res.cookie('errPassword','1');cov_70jel8qna().s[20]++;isRight=false;}else{cov_70jel8qna().b[3][1]++;}cov_70jel8qna().s[21]++;if(passwordConfirm!=password){cov_70jel8qna().b[5][0]++;cov_70jel8qna().s[22]++;res.cookie('errPasswordConfirm','1');cov_70jel8qna().s[23]++;isRight=false;}else{cov_70jel8qna().b[5][1]++;}cov_70jel8qna().s[24]++;if(!isRight){cov_70jel8qna().b[6][0]++;cov_70jel8qna().s[25]++;resolve(false);cov_70jel8qna().s[26]++;return;}else{cov_70jel8qna().b[6][1]++;}cov_70jel8qna().s[27]++;if(hash.checkPassword(req.session.utente.utente.Password.hash,req.session.utente.utente.Password.salt,oldPassword)){cov_70jel8qna().b[7][0]++;var passwordHashed=(cov_70jel8qna().s[28]++,hash.hashPassword(password));var checkPass=(cov_70jel8qna().s[29]++,commissioneModel.updatePassword(passwordHashed,req.session.utente.utente.email));/**
          * It checks the result of updatePassword function and updates the Commission session
          * @param  {Object} result - The result of updatePassword function (about Commission)
          * @returns {Boolean} - It returns true and generates an "edit password complete" cookie if result != null, else it returns a reject
          */cov_70jel8qna().s[30]++;checkPass.then(function(result){cov_70jel8qna().f[5]++;cov_70jel8qna().s[31]++;if(result!=null){cov_70jel8qna().b[8][0]++;cov_70jel8qna().s[32]++;req.session.utente.utente={name:result.getName(),email:result.getEmail(),surname:result.getSurname(),Password:result.getPassword()};cov_70jel8qna().s[33]++;res.cookie('updatePassEff','1');cov_70jel8qna().s[34]++;resolve(true);}else{cov_70jel8qna().b[8][1]++;cov_70jel8qna().s[35]++;resolve();}});}else{cov_70jel8qna().b[7][1]++;cov_70jel8qna().s[36]++;res.cookie('errOldPassword','1');cov_70jel8qna().s[37]++;resolve(false);}});};/**
 * This method inserts an commissione internazionale
 * @param {Object} req - The HTTP req
 * @param {Object} res - The HTTP res
 * @returns {Boolean}  - This method returns true if the insert of commissione internazionale was successfull, else false
 */cov_70jel8qna().s[38]++;exports.addCommisInter=function(req,res){cov_70jel8qna().f[6]++;cov_70jel8qna().s[39]++;return new Promise(function(resolve,reject){cov_70jel8qna().f[7]++;var name=(cov_70jel8qna().s[40]++,req.body.inputNameCI);var surname=(cov_70jel8qna().s[41]++,req.body.inputSurnameCI);var email=(cov_70jel8qna().s[42]++,req.body.inputEmailCI);var password=(cov_70jel8qna().s[43]++,req.body.inputPassword);var repassword=(cov_70jel8qna().s[44]++,req.body.inputRePassword);var isRight=(cov_70jel8qna().s[45]++,true);cov_70jel8qna().s[46]++;if(password!=repassword){cov_70jel8qna().b[9][0]++;cov_70jel8qna().s[47]++;isRight=false;}else{cov_70jel8qna().b[9][1]++;}cov_70jel8qna().s[48]++;isRight=true;cov_70jel8qna().s[49]++;if((cov_70jel8qna().b[11][0]++,name==null)||(cov_70jel8qna().b[11][1]++,name.length<=1)||(cov_70jel8qna().b[11][2]++,!/^[A-Za-z]+$/.test(name))){cov_70jel8qna().b[10][0]++;cov_70jel8qna().s[50]++;res.cookie('errComInterName','1');cov_70jel8qna().s[51]++;isRight=false;}else{cov_70jel8qna().b[10][1]++;}cov_70jel8qna().s[52]++;if((cov_70jel8qna().b[13][0]++,surname==null)||(cov_70jel8qna().b[13][1]++,surname.length<=1)||(cov_70jel8qna().b[13][2]++,!/^[A-Za-z]+$/.test(surname))){cov_70jel8qna().b[12][0]++;cov_70jel8qna().s[53]++;res.cookie('errComInterSurname','1');cov_70jel8qna().s[54]++;isRight=false;}else{cov_70jel8qna().b[12][1]++;}cov_70jel8qna().s[55]++;if((cov_70jel8qna().b[15][0]++,email==null)||(cov_70jel8qna().b[15][1]++,email.length<=6)||(cov_70jel8qna().b[15][2]++,!/[a-z0-9!#$%&'*+=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9]){1,}?/.test(email))){cov_70jel8qna().b[14][0]++;cov_70jel8qna().s[56]++;res.cookie('errComInterEmail','1');cov_70jel8qna().s[57]++;isRight=false;}else{cov_70jel8qna().b[14][1]++;}cov_70jel8qna().s[58]++;if((cov_70jel8qna().b[17][0]++,password==null)||(cov_70jel8qna().b[17][1]++,password.length<=7)||(cov_70jel8qna().b[17][2]++,!/^[A-Za-z0-9]+$/.test(password))){cov_70jel8qna().b[16][0]++;cov_70jel8qna().s[59]++;res.cookie('errPassword','1');cov_70jel8qna().s[60]++;isRight=false;}else{cov_70jel8qna().b[16][1]++;}cov_70jel8qna().s[61]++;if(repassword!=password){cov_70jel8qna().b[18][0]++;cov_70jel8qna().s[62]++;res.cookie('errPasswordConfirm','1');cov_70jel8qna().s[63]++;isRight=false;}else{cov_70jel8qna().b[18][1]++;}cov_70jel8qna().s[64]++;if(!isRight){cov_70jel8qna().b[19][0]++;cov_70jel8qna().s[65]++;resolve(false);cov_70jel8qna().s[66]++;return;}else{cov_70jel8qna().b[19][1]++;}// hashing e salt of password
var passwordHashed=(cov_70jel8qna().s[67]++,hash.hashPassword(password));// Create external tutor object
var commission=(cov_70jel8qna().s[68]++,new commissioneModel());cov_70jel8qna().s[69]++;commission.setSurname(surname);cov_70jel8qna().s[70]++;commission.setName(name);cov_70jel8qna().s[71]++;commission.setEmail(email);cov_70jel8qna().s[72]++;commission.setPassword(passwordHashed);cov_70jel8qna().s[73]++;commissioneModel.addCommiInter(commission);cov_70jel8qna().s[74]++;resolve(true);});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1pc2lvbmVJbnRlckNvbnRyb2xsLmpzIl0sIm5hbWVzIjpbImhhc2giLCJyZXF1aXJlIiwiY29tbWlzc2lvbmVNb2RlbCIsImV4cG9ydHMiLCJkZWxldGVDb21taXNzaW9uSW50ZXJuYXppb25hbGUiLCJlbWFpbCIsInJlcyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZGVsY29tbUludGVyIiwiZGVsZXRlQ29tbUludGVyIiwidGhlbiIsInJlc3VsdCIsInVwZGF0ZSIsInJlcSIsIm9sZFBhc3N3b3JkIiwiYm9keSIsImlucHV0T2xkUGFzc3dvcmQiLCJwYXNzd29yZCIsImlucHV0UGFzc3dvcmQiLCJwYXNzd29yZENvbmZpcm0iLCJpbnB1dENvbmZpcm1QYXNzd29yZCIsImlzUmlnaHQiLCJsZW5ndGgiLCJ0ZXN0IiwiY29va2llIiwiY2hlY2tQYXNzd29yZCIsInNlc3Npb24iLCJ1dGVudGUiLCJQYXNzd29yZCIsInNhbHQiLCJwYXNzd29yZEhhc2hlZCIsImhhc2hQYXNzd29yZCIsImNoZWNrUGFzcyIsInVwZGF0ZVBhc3N3b3JkIiwibmFtZSIsImdldE5hbWUiLCJnZXRFbWFpbCIsInN1cm5hbWUiLCJnZXRTdXJuYW1lIiwiZ2V0UGFzc3dvcmQiLCJhZGRDb21taXNJbnRlciIsImlucHV0TmFtZUNJIiwiaW5wdXRTdXJuYW1lQ0kiLCJpbnB1dEVtYWlsQ0kiLCJyZXBhc3N3b3JkIiwiaW5wdXRSZVBhc3N3b3JkIiwiY29tbWlzc2lvbiIsInNldFN1cm5hbWUiLCJzZXROYW1lIiwic2V0RW1haWwiLCJzZXRQYXNzd29yZCIsImFkZENvbW1pSW50ZXIiXSwibWFwcGluZ3MiOiI2NFZBZVk7eUZBZlosR0FBSUEsQ0FBQUEsSUFBSSx5QkFBR0MsT0FBTyxDQUFDLFdBQUQsQ0FBVixDQUFSLENBQ0EsR0FBSUMsQ0FBQUEsZ0JBQWdCLHlCQUFHRCxPQUFPLENBQUMsOEJBQUQsQ0FBVixDQUFwQixDQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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d0JBc0Q1QzlCLGdCQUFnQixDQUFDbUQsYUFBakIsQ0FBK0JMLFVBQS9CLEVBdEQ0Qyx3QkF1RDVDeEMsT0FBTyxDQUFDLElBQUQsQ0FBUCxDQUNELENBeERNLENBQVAsQ0F5REQsQ0ExREEiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgaGFzaCA9IHJlcXVpcmUoJy4vaGFzaC5qcycpXG52YXIgY29tbWlzc2lvbmVNb2RlbCA9IHJlcXVpcmUoJy4uL21vZGVscy9jb21taXNpb25lSW50ZXIuanMnKVxuXG5cbi8qKlxuICogVGhpcyBtZXRob2QgZGVsZXRlcyBhbiBjb21taXNzYXJyaW9cbiAqIEBwYXJhbSB7U3RyaW5nfSBlbWFpbCAtIFRoZSBjb21taXNzYXJyaW8gZW1haWxcbiAqIEBwYXJhbSB7T2JqZWN0fSByZXMgLSBUaGUgSFRUUCByZXNcbiAqIEByZXR1cm5zIHtCb29sZWFufSAgLSBUaGlzIG1ldGhvZCByZXR1cm5zIHRydWUgaWYgdGhlIGRlbGV0ZSBvZiBleHRlcm5hbCB0dXRvciB3YXMgc3VjY2Vzc2Z1bGwsIGVsc2UgZmFsc2VcbiAqL1xuIGV4cG9ydHMuZGVsZXRlQ29tbWlzc2lvbkludGVybmF6aW9uYWxlID0gZnVuY3Rpb24gKGVtYWlsLCByZXMpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgZGVsY29tbUludGVyID0gY29tbWlzc2lvbmVNb2RlbC5kZWxldGVDb21tSW50ZXIoZW1haWwpXG4gICAgZGVsY29tbUludGVyLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgcmVzb2x2ZShmYWxzZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmUodHJ1ZSlcbiAgICAgIH1cbiAgICB9KVxuICB9KVxufVxuXG5cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCB1cGRhdGVzIHRoZSBjb21taXNzaW9uIHBhc3N3b3JkXG4gKiBAcGFyYW0ge09iamVjdH0gcmVxIC0gVGhlIEhUVFAgcmVxdWVzdFxuICogQHBhcmFtIHtPYmplY3R9IHJlcyAtIFRoZSBIVFRQIHJlc3BvbnNlXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gIC0gSXQgcmV0dXJucyB0cnVlIGlmIHRoZSB1cGRhdGUgd2FzIHN1Y2Nlc3NmdWxsLCBlbHNlIGZhbHNlXG4gKi9cbmV4cG9ydHMudXBkYXRlID0gZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIG9sZFBhc3N3b3JkID0gcmVxLmJvZHkuaW5wdXRPbGRQYXNzd29yZFxuICAgIHZhciBwYXNzd29yZCA9IHJlcS5ib2R5LmlucHV0UGFzc3dvcmRcbiAgICB2YXIgcGFzc3dvcmRDb25maXJtID0gcmVxLmJvZHkuaW5wdXRDb25maXJtUGFzc3dvcmRcbiAgICB2YXIgaXNSaWdodCA9IHRydWVcblxuICAgIGlmICgob2xkUGFzc3dvcmQgPT0gbnVsbCkgfHwgKG9sZFBhc3N3b3JkLmxlbmd0aCA8PSA3KSB8fCAoIS9eW0EtWmEtejAtOV0rJC8udGVzdChvbGRQYXNzd29yZCkpKSB7XG4gICAgICByZXMuY29va2llKCdlcnJPbGRQYXNzd29yZCcsICcxJylcbiAgICAgIGlzUmlnaHQgPSBmYWxzZVxuICAgIH1cblxuICAgIGlmICgocGFzc3dvcmQgPT0gbnVsbCkgfHwgKHBhc3N3b3JkLmxlbmd0aCA8PSA3KSB8fCAoIS9eW0EtWmEtejAtOV0rJC8udGVzdChwYXNzd29yZCkpKSB7XG4gICAgICByZXMuY29va2llKCdlcnJQYXNzd29yZCcsICcxJylcbiAgICAgIGlzUmlnaHQgPSBmYWxzZVxuICAgIH1cblxuICAgIGlmIChwYXNzd29yZENvbmZpcm0gIT0gcGFzc3dvcmQpIHtcbiAgICAgIHJlcy5jb29raWUoJ2VyclBhc3N3b3JkQ29uZmlybScsICcxJylcbiAgICAgIGlzUmlnaHQgPSBmYWxzZVxuICAgIH1cblxuICAgIGlmICghaXNSaWdodCkge1xuICAgICAgcmVzb2x2ZShmYWxzZSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoaGFzaC5jaGVja1Bhc3N3b3JkKHJlcS5zZXNzaW9uLnV0ZW50ZS51dGVudGUuUGFzc3dvcmQuaGFzaCwgcmVxLnNlc3Npb24udXRlbnRlLnV0ZW50ZS5QYXNzd29yZC5zYWx0LCBvbGRQYXNzd29yZCkpIHtcbiAgICAgIHZhciBwYXNzd29yZEhhc2hlZCA9IGhhc2guaGFzaFBhc3N3b3JkKHBhc3N3b3JkKVxuICAgICAgdmFyIGNoZWNrUGFzcyA9IGNvbW1pc3Npb25lTW9kZWwudXBkYXRlUGFzc3dvcmQocGFzc3dvcmRIYXNoZWQsIHJlcS5zZXNzaW9uLnV0ZW50ZS51dGVudGUuZW1haWwpXG4gICAgICAvKipcbiAgICAgICAgICAqIEl0IGNoZWNrcyB0aGUgcmVzdWx0IG9mIHVwZGF0ZVBhc3N3b3JkIGZ1bmN0aW9uIGFuZCB1cGRhdGVzIHRoZSBDb21taXNzaW9uIHNlc3Npb25cbiAgICAgICAgICAqIEBwYXJhbSAge09iamVjdH0gcmVzdWx0IC0gVGhlIHJlc3VsdCBvZiB1cGRhdGVQYXNzd29yZCBmdW5jdGlvbiAoYWJvdXQgQ29tbWlzc2lvbilcbiAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufSAtIEl0IHJldHVybnMgdHJ1ZSBhbmQgZ2VuZXJhdGVzIGFuIFwiZWRpdCBwYXNzd29yZCBjb21wbGV0ZVwiIGNvb2tpZSBpZiByZXN1bHQgIT0gbnVsbCwgZWxzZSBpdCByZXR1cm5zIGEgcmVqZWN0XG4gICAgICAgICAgKi9cbiAgICAgIGNoZWNrUGFzcy50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgICAgcmVxLnNlc3Npb24udXRlbnRlLnV0ZW50ZSA9IHsgbmFtZTogcmVzdWx0LmdldE5hbWUoKSwgZW1haWw6IHJlc3VsdC5nZXRFbWFpbCgpLCBzdXJuYW1lOiByZXN1bHQuZ2V0U3VybmFtZSgpLCBQYXNzd29yZDogcmVzdWx0LmdldFBhc3N3b3JkKCkgfVxuICAgICAgICAgIHJlcy5jb29raWUoJ3VwZGF0ZVBhc3NFZmYnLCAnMScpXG4gICAgICAgICAgcmVzb2x2ZSh0cnVlKVxuICAgICAgICB9IGVsc2UgeyByZXNvbHZlKCkgfVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLmNvb2tpZSgnZXJyT2xkUGFzc3dvcmQnLCAnMScpXG4gICAgICByZXNvbHZlKGZhbHNlKVxuICAgIH1cbiAgfSlcbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCBpbnNlcnRzIGFuIGNvbW1pc3Npb25lIGludGVybmF6aW9uYWxlXG4gKiBAcGFyYW0ge09iamVjdH0gcmVxIC0gVGhlIEhUVFAgcmVxXG4gKiBAcGFyYW0ge09iamVjdH0gcmVzIC0gVGhlIEhUVFAgcmVzXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gIC0gVGhpcyBtZXRob2QgcmV0dXJucyB0cnVlIGlmIHRoZSBpbnNlcnQgb2YgY29tbWlzc2lvbmUgaW50ZXJuYXppb25hbGUgd2FzIHN1Y2Nlc3NmdWxsLCBlbHNlIGZhbHNlXG4gKi9cbiBleHBvcnRzLmFkZENvbW1pc0ludGVyID0gZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIG5hbWUgPSByZXEuYm9keS5pbnB1dE5hbWVDSVxuICAgIHZhciBzdXJuYW1lID0gcmVxLmJvZHkuaW5wdXRTdXJuYW1lQ0lcbiAgICB2YXIgZW1haWwgPSByZXEuYm9keS5pbnB1dEVtYWlsQ0lcbiAgICB2YXIgcGFzc3dvcmQgPSByZXEuYm9keS5pbnB1dFBhc3N3b3JkXG4gICAgdmFyIHJlcGFzc3dvcmQgPSByZXEuYm9keS5pbnB1dFJlUGFzc3dvcmRcblxuICAgIHZhciBpc1JpZ2h0ID0gdHJ1ZVxuICAgIGlmIChwYXNzd29yZCAhPSByZXBhc3N3b3JkKSB7XG4gICAgICBpc1JpZ2h0ID0gZmFsc2VcbiAgICB9XG5cbiAgICBpc1JpZ2h0ID0gdHJ1ZVxuICAgIGlmICgobmFtZSA9PSBudWxsKSB8fCAobmFtZS5sZW5ndGggPD0gMSkgfHwgKCEvXltBLVphLXpdKyQvLnRlc3QobmFtZSkpKSB7XG4gICAgICByZXMuY29va2llKCdlcnJDb21JbnRlck5hbWUnLCAnMScpXG4gICAgICBpc1JpZ2h0ID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoKHN1cm5hbWUgPT0gbnVsbCkgfHwgKHN1cm5hbWUubGVuZ3RoIDw9IDEpIHx8ICghL15bQS1aYS16XSskLy50ZXN0KHN1cm5hbWUpKSkge1xuICAgICAgcmVzLmNvb2tpZSgnZXJyQ29tSW50ZXJTdXJuYW1lJywgJzEnKVxuICAgICAgaXNSaWdodCA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKChlbWFpbCA9PSBudWxsKSB8fCAoZW1haWwubGVuZ3RoIDw9IDYpIHx8ICghL1thLXowLTkhIyQlJicqKz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKXsxLH0/Ly50ZXN0KGVtYWlsKSkpIHtcbiAgICAgIHJlcy5jb29raWUoJ2VyckNvbUludGVyRW1haWwnLCAnMScpXG4gICAgICBpc1JpZ2h0ID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoKHBhc3N3b3JkID09IG51bGwpIHx8IChwYXNzd29yZC5sZW5ndGggPD0gNykgfHwgKCEvXltBLVphLXowLTldKyQvLnRlc3QocGFzc3dvcmQpKSkge1xuICAgICAgcmVzLmNvb2tpZSgnZXJyUGFzc3dvcmQnLCAnMScpXG4gICAgICBpc1JpZ2h0ID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAocmVwYXNzd29yZCAhPSBwYXNzd29yZCkge1xuICAgICAgcmVzLmNvb2tpZSgnZXJyUGFzc3dvcmRDb25maXJtJywgJzEnKVxuICAgICAgaXNSaWdodCA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCFpc1JpZ2h0KSB7XG4gICAgICByZXNvbHZlKGZhbHNlKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gaGFzaGluZyBlIHNhbHQgb2YgcGFzc3dvcmRcbiAgICB2YXIgcGFzc3dvcmRIYXNoZWQgPSBoYXNoLmhhc2hQYXNzd29yZChwYXNzd29yZClcblxuICAgIC8vIENyZWF0ZSBleHRlcm5hbCB0dXRvciBvYmplY3RcbiAgICB2YXIgY29tbWlzc2lvbiA9IG5ldyBjb21taXNzaW9uZU1vZGVsKClcbiAgICBjb21taXNzaW9uLnNldFN1cm5hbWUoc3VybmFtZSlcbiAgICBjb21taXNzaW9uLnNldE5hbWUobmFtZSlcbiAgICBjb21taXNzaW9uLnNldEVtYWlsKGVtYWlsKVxuICAgIGNvbW1pc3Npb24uc2V0UGFzc3dvcmQocGFzc3dvcmRIYXNoZWQpXG5cbiAgICBcbiAgICBjb21taXNzaW9uZU1vZGVsLmFkZENvbW1pSW50ZXIoY29tbWlzc2lvbilcbiAgICByZXNvbHZlKHRydWUpXG4gIH0pXG59XG4iXX0=