function cov_2e3l21o3ht(){var path="/Users/salvatore/Desktop/EasyAgreement-IGES/app/models/request.js";var hash="c95785c66a106411ca1ad5888f17e4d57f8fa6f0";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/salvatore/Desktop/EasyAgreement-IGES/app/models/request.js",statementMap:{"0":{start:{line:1,column:18},end:{line:1,column:48}},"1":{start:{line:4,column:12},end:{line:4,column:53}},"2":{start:{line:7,column:15},end:{line:7,column:30}},"3":{start:{line:14,column:4},end:{line:14,column:25}},"4":{start:{line:15,column:4},end:{line:15,column:31}},"5":{start:{line:16,column:4},end:{line:16,column:31}},"6":{start:{line:17,column:4},end:{line:17,column:35}},"7":{start:{line:25,column:4},end:{line:25,column:30}},"8":{start:{line:33,column:4},end:{line:33,column:25}},"9":{start:{line:41,column:4},end:{line:41,column:42}},"10":{start:{line:49,column:4},end:{line:49,column:31}},"11":{start:{line:57,column:4},end:{line:57,column:42}},"12":{start:{line:65,column:4},end:{line:65,column:31}},"13":{start:{line:73,column:4},end:{line:73,column:50}},"14":{start:{line:81,column:4},end:{line:81,column:35}},"15":{start:{line:89,column:4},end:{line:104,column:6}},"16":{start:{line:90,column:6},end:{line:103,column:8}},"17":{start:{line:91,column:8},end:{line:91,column:26}},"18":{start:{line:91,column:17},end:{line:91,column:26}},"19":{start:{line:92,column:23},end:{line:92,column:36}},"20":{start:{line:93,column:8},end:{line:93,column:60}},"21":{start:{line:94,column:8},end:{line:94,column:60}},"22":{start:{line:95,column:8},end:{line:95,column:68}},"23":{start:{line:96,column:8},end:{line:96,column:48}},"24":{start:{line:97,column:18},end:{line:97,column:31}},"25":{start:{line:98,column:8},end:{line:102,column:10}},"26":{start:{line:99,column:10},end:{line:99,column:28}},"27":{start:{line:99,column:19},end:{line:99,column:28}},"28":{start:{line:100,column:10},end:{line:100,column:20}},"29":{start:{line:101,column:10},end:{line:101,column:19}},"30":{start:{line:113,column:4},end:{line:123,column:6}},"31":{start:{line:114,column:6},end:{line:122,column:8}},"32":{start:{line:115,column:8},end:{line:115,column:26}},"33":{start:{line:115,column:17},end:{line:115,column:26}},"34":{start:{line:116,column:18},end:{line:116,column:31}},"35":{start:{line:117,column:8},end:{line:121,column:10}},"36":{start:{line:118,column:10},end:{line:118,column:28}},"37":{start:{line:118,column:19},end:{line:118,column:28}},"38":{start:{line:119,column:10},end:{line:119,column:20}},"39":{start:{line:120,column:10},end:{line:120,column:25}},"40":{start:{line:132,column:4},end:{line:142,column:6}},"41":{start:{line:133,column:6},end:{line:141,column:8}},"42":{start:{line:134,column:8},end:{line:134,column:26}},"43":{start:{line:134,column:17},end:{line:134,column:26}},"44":{start:{line:135,column:18},end:{line:135,column:31}},"45":{start:{line:136,column:8},end:{line:140,column:10}},"46":{start:{line:137,column:10},end:{line:137,column:28}},"47":{start:{line:137,column:19},end:{line:137,column:28}},"48":{start:{line:138,column:10},end:{line:138,column:20}},"49":{start:{line:139,column:10},end:{line:139,column:25}},"50":{start:{line:150,column:4},end:{line:160,column:6}},"51":{start:{line:151,column:6},end:{line:159,column:8}},"52":{start:{line:152,column:8},end:{line:152,column:26}},"53":{start:{line:152,column:17},end:{line:152,column:26}},"54":{start:{line:153,column:18},end:{line:153,column:31}},"55":{start:{line:154,column:8},end:{line:158,column:10}},"56":{start:{line:155,column:10},end:{line:155,column:28}},"57":{start:{line:155,column:19},end:{line:155,column:28}},"58":{start:{line:156,column:10},end:{line:156,column:20}},"59":{start:{line:157,column:10},end:{line:157,column:19}},"60":{start:{line:169,column:4},end:{line:179,column:6}},"61":{start:{line:170,column:6},end:{line:178,column:8}},"62":{start:{line:171,column:8},end:{line:171,column:26}},"63":{start:{line:171,column:17},end:{line:171,column:26}},"64":{start:{line:172,column:18},end:{line:172,column:31}},"65":{start:{line:173,column:8},end:{line:177,column:10}},"66":{start:{line:174,column:10},end:{line:174,column:28}},"67":{start:{line:174,column:19},end:{line:174,column:28}},"68":{start:{line:175,column:10},end:{line:175,column:20}},"69":{start:{line:176,column:10},end:{line:176,column:19}},"70":{start:{line:183,column:0},end:{line:183,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:17},end:{line:18,column:3}},line:13},"1":{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:27},end:{line:26,column:3}},line:24},"2":{name:"(anonymous_2)",decl:{start:{line:32,column:2},end:{line:32,column:3}},loc:{start:{line:32,column:18},end:{line:34,column:3}},line:32},"3":{name:"(anonymous_3)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:39},end:{line:42,column:3}},line:40},"4":{name:"(anonymous_4)",decl:{start:{line:48,column:2},end:{line:48,column:3}},loc:{start:{line:48,column:24},end:{line:50,column:3}},line:48},"5":{name:"(anonymous_5)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:39},end:{line:58,column:3}},line:56},"6":{name:"(anonymous_6)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:24},end:{line:66,column:3}},line:64},"7":{name:"(anonymous_7)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:47},end:{line:74,column:3}},line:72},"8":{name:"(anonymous_8)",decl:{start:{line:80,column:2},end:{line:80,column:3}},loc:{start:{line:80,column:28},end:{line:82,column:3}},line:80},"9":{name:"(anonymous_9)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:33},end:{line:105,column:3}},line:88},"10":{name:"(anonymous_10)",decl:{start:{line:89,column:23},end:{line:89,column:24}},loc:{start:{line:89,column:50},end:{line:104,column:5}},line:89},"11":{name:"(anonymous_11)",decl:{start:{line:90,column:84},end:{line:90,column:85}},loc:{start:{line:90,column:103},end:{line:103,column:7}},line:90},"12":{name:"(anonymous_12)",decl:{start:{line:98,column:236},end:{line:98,column:237}},loc:{start:{line:98,column:251},end:{line:102,column:9}},line:98},"13":{name:"(anonymous_13)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:32},end:{line:124,column:3}},line:112},"14":{name:"(anonymous_14)",decl:{start:{line:113,column:23},end:{line:113,column:24}},loc:{start:{line:113,column:50},end:{line:123,column:5}},line:113},"15":{name:"(anonymous_15)",decl:{start:{line:114,column:84},end:{line:114,column:85}},loc:{start:{line:114,column:103},end:{line:122,column:7}},line:114},"16":{name:"(anonymous_16)",decl:{start:{line:117,column:68},end:{line:117,column:69}},loc:{start:{line:117,column:91},end:{line:121,column:9}},line:117},"17":{name:"(anonymous_17)",decl:{start:{line:131,column:2},end:{line:131,column:3}},loc:{start:{line:131,column:34},end:{line:143,column:3}},line:131},"18":{name:"(anonymous_18)",decl:{start:{line:132,column:23},end:{line:132,column:24}},loc:{start:{line:132,column:50},end:{line:142,column:5}},line:132},"19":{name:"(anonymous_19)",decl:{start:{line:133,column:84},end:{line:133,column:85}},loc:{start:{line:133,column:103},end:{line:141,column:7}},line:133},"20":{name:"(anonymous_20)",decl:{start:{line:136,column:118},end:{line:136,column:119}},loc:{start:{line:136,column:141},end:{line:140,column:9}},line:136},"21":{name:"(anonymous_21)",decl:{start:{line:149,column:2},end:{line:149,column:3}},loc:{start:{line:149,column:35},end:{line:161,column:3}},line:149},"22":{name:"(anonymous_22)",decl:{start:{line:150,column:23},end:{line:150,column:24}},loc:{start:{line:150,column:50},end:{line:160,column:5}},line:150},"23":{name:"(anonymous_23)",decl:{start:{line:151,column:84},end:{line:151,column:85}},loc:{start:{line:151,column:103},end:{line:159,column:7}},line:151},"24":{name:"(anonymous_24)",decl:{start:{line:154,column:70},end:{line:154,column:71}},loc:{start:{line:154,column:85},end:{line:158,column:9}},line:154},"25":{name:"(anonymous_25)",decl:{start:{line:168,column:2},end:{line:168,column:3}},loc:{start:{line:168,column:50},end:{line:180,column:3}},line:168},"26":{name:"(anonymous_26)",decl:{start:{line:169,column:23},end:{line:169,column:24}},loc:{start:{line:169,column:50},end:{line:179,column:5}},line:169},"27":{name:"(anonymous_27)",decl:{start:{line:170,column:84},end:{line:170,column:85}},loc:{start:{line:170,column:103},end:{line:178,column:7}},line:170},"28":{name:"(anonymous_28)",decl:{start:{line:173,column:110},end:{line:173,column:111}},loc:{start:{line:173,column:133},end:{line:177,column:9}},line:173}},branchMap:{"0":{loc:{start:{line:91,column:8},end:{line:91,column:26}},type:"if",locations:[{start:{line:91,column:8},end:{line:91,column:26}},{start:{line:91,column:8},end:{line:91,column:26}}],line:91},"1":{loc:{start:{line:99,column:10},end:{line:99,column:28}},type:"if",locations:[{start:{line:99,column:10},end:{line:99,column:28}},{start:{line:99,column:10},end:{line:99,column:28}}],line:99},"2":{loc:{start:{line:115,column:8},end:{line:115,column:26}},type:"if",locations:[{start:{line:115,column:8},end:{line:115,column:26}},{start:{line:115,column:8},end:{line:115,column:26}}],line:115},"3":{loc:{start:{line:118,column:10},end:{line:118,column:28}},type:"if",locations:[{start:{line:118,column:10},end:{line:118,column:28}},{start:{line:118,column:10},end:{line:118,column:28}}],line:118},"4":{loc:{start:{line:134,column:8},end:{line:134,column:26}},type:"if",locations:[{start:{line:134,column:8},end:{line:134,column:26}},{start:{line:134,column:8},end:{line:134,column:26}}],line:134},"5":{loc:{start:{line:137,column:10},end:{line:137,column:28}},type:"if",locations:[{start:{line:137,column:10},end:{line:137,column:28}},{start:{line:137,column:10},end:{line:137,column:28}}],line:137},"6":{loc:{start:{line:152,column:8},end:{line:152,column:26}},type:"if",locations:[{start:{line:152,column:8},end:{line:152,column:26}},{start:{line:152,column:8},end:{line:152,column:26}}],line:152},"7":{loc:{start:{line:155,column:10},end:{line:155,column:28}},type:"if",locations:[{start:{line:155,column:10},end:{line:155,column:28}},{start:{line:155,column:10},end:{line:155,column:28}}],line:155},"8":{loc:{start:{line:171,column:8},end:{line:171,column:26}},type:"if",locations:[{start:{line:171,column:8},end:{line:171,column:26}},{start:{line:171,column:8},end:{line:171,column:26}}],line:171},"9":{loc:{start:{line:174,column:10},end:{line:174,column:28}},type:"if",locations:[{start:{line:174,column:10},end:{line:174,column:28}},{start:{line:174,column:10},end:{line:174,column:28}}],line:174}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c95785c66a106411ca1ad5888f17e4d57f8fa6f0"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2e3l21o3ht=function(){return actualCoverage;};}return actualCoverage;}cov_2e3l21o3ht();var MongoClient=(cov_2e3l21o3ht().s[0]++,require('mongodb').MongoClient);// Database URL
const url=(cov_2e3l21o3ht().s[1]++,'mongodb://localhost:27017/easyagreement');// Database name
const dbName=(cov_2e3l21o3ht().s[2]++,'easyagreement');/**
 * This module represents the Request object
 * @module Request
 */class Request{constructor(){cov_2e3l21o3ht().f[0]++;cov_2e3l21o3ht().s[3]++;this.studentID=null;cov_2e3l21o3ht().s[4]++;this.academicTutorID=null;cov_2e3l21o3ht().s[5]++;this.externalTutorID=null;cov_2e3l21o3ht().s[6]++;this.learningAgreementID=null;}/**
   * This method sets the Request's Student email
   * @param {String} studentID
   */setStudentID(studentID){cov_2e3l21o3ht().f[1]++;cov_2e3l21o3ht().s[7]++;this.studentID=studentID;}/**
   * This method gets the Request's Student email
   * @returns {String}
   */getStudentID(){cov_2e3l21o3ht().f[2]++;cov_2e3l21o3ht().s[8]++;return this.studentID;}/**
   * This method sets the Request's Academic Tutor email
   * @param {String} academicTutorID
   */setAcademicTutorID(academicTutorID){cov_2e3l21o3ht().f[3]++;cov_2e3l21o3ht().s[9]++;this.academicTutorID=academicTutorID;}/**
   * This method gets Request's Academic Tutor email
   * @returns {String}
   */getAcademicTutorID(){cov_2e3l21o3ht().f[4]++;cov_2e3l21o3ht().s[10]++;return this.academicTutorID;}/**
   * This method sets the Request's External Tutor email
   * @param {String} externalTutorID
   */setExternalTutorID(externalTutorID){cov_2e3l21o3ht().f[5]++;cov_2e3l21o3ht().s[11]++;this.externalTutorID=externalTutorID;}/**
   * This method gets Request's External Tutor email
   * @returns {String}
   */getExternalTutorID(){cov_2e3l21o3ht().f[6]++;cov_2e3l21o3ht().s[12]++;return this.externalTutorID;}/**
   * This method sets the Learning Agreement associated to the Request
   * @param {String} learningAgreementID
   */setLearningAgreementID(learningAgreementID){cov_2e3l21o3ht().f[7]++;cov_2e3l21o3ht().s[13]++;this.learningAgreementID=learningAgreementID;}/**
   * This method gets the Learning Agreement associate to the Request
   * @returns {String}
   */getLearningAgreementID(){cov_2e3l21o3ht().f[8]++;cov_2e3l21o3ht().s[14]++;return this.learningAgreementID;}/**
   * This method inserts a new Request in the database
   * @param {Request} request - The Request object to insert
   */static insertRequest(request){cov_2e3l21o3ht().f[9]++;cov_2e3l21o3ht().s[15]++;return new Promise(function(resolve,reject){cov_2e3l21o3ht().f[10]++;cov_2e3l21o3ht().s[16]++;MongoClient.connect(url,{useNewUrlParser:true,useUnifiedTopology:true},function(err,db){cov_2e3l21o3ht().f[11]++;cov_2e3l21o3ht().s[17]++;if(err){cov_2e3l21o3ht().b[0][0]++;cov_2e3l21o3ht().s[18]++;throw err;}else{cov_2e3l21o3ht().b[0][1]++;}var requestT=(cov_2e3l21o3ht().s[19]++,new Request());cov_2e3l21o3ht().s[20]++;requestT.setAcademicTutorID(request.academicTutorID);cov_2e3l21o3ht().s[21]++;requestT.setExternalTutorID(request.externalTutorID);cov_2e3l21o3ht().s[22]++;requestT.setLearningAgreementID(request.learningAgreementID);cov_2e3l21o3ht().s[23]++;requestT.setStudentID(request.studentID);var dbo=(cov_2e3l21o3ht().s[24]++,db.db(dbName));cov_2e3l21o3ht().s[25]++;dbo.collection('Request').insertOne({studentID:requestT.getStudentID(),academicTutorID:requestT.getAcademicTutorID(),externalTutorID:requestT.getExternalTutorID(),learningAgreementID:requestT.getLearningAgreementID()},function(err){cov_2e3l21o3ht().f[12]++;cov_2e3l21o3ht().s[26]++;if(err){cov_2e3l21o3ht().b[1][0]++;cov_2e3l21o3ht().s[27]++;throw err;}else{cov_2e3l21o3ht().b[1][1]++;}cov_2e3l21o3ht().s[28]++;db.close();cov_2e3l21o3ht().s[29]++;resolve();});});});}/**
   * This method retrieves a specific Request
   * @param {String} studentID - The student's email
   * @returns {Request} - The Request found
   */static getRequest(studentID){cov_2e3l21o3ht().f[13]++;cov_2e3l21o3ht().s[30]++;return new Promise(function(resolve,reject){cov_2e3l21o3ht().f[14]++;cov_2e3l21o3ht().s[31]++;MongoClient.connect(url,{useNewUrlParser:true,useUnifiedTopology:true},function(err,db){cov_2e3l21o3ht().f[15]++;cov_2e3l21o3ht().s[32]++;if(err){cov_2e3l21o3ht().b[2][0]++;cov_2e3l21o3ht().s[33]++;throw err;}else{cov_2e3l21o3ht().b[2][1]++;}var dbo=(cov_2e3l21o3ht().s[34]++,db.db(dbName));cov_2e3l21o3ht().s[35]++;dbo.collection('Request').findOne({studentID:studentID},function(err,result){cov_2e3l21o3ht().f[16]++;cov_2e3l21o3ht().s[36]++;if(err){cov_2e3l21o3ht().b[3][0]++;cov_2e3l21o3ht().s[37]++;throw err;}else{cov_2e3l21o3ht().b[3][1]++;}cov_2e3l21o3ht().s[38]++;db.close();cov_2e3l21o3ht().s[39]++;resolve(result);});});});}/**
   * This method retireves all the requests for a specific tutor
   * @param {String} tutorID - The academic or external tutor's email
   * @returns {Array} - The list of the requests
   */static getAllRequests(tutorID){cov_2e3l21o3ht().f[17]++;cov_2e3l21o3ht().s[40]++;return new Promise(function(resolve,reject){cov_2e3l21o3ht().f[18]++;cov_2e3l21o3ht().s[41]++;MongoClient.connect(url,{useNewUrlParser:true,useUnifiedTopology:true},function(err,db){cov_2e3l21o3ht().f[19]++;cov_2e3l21o3ht().s[42]++;if(err){cov_2e3l21o3ht().b[4][0]++;cov_2e3l21o3ht().s[43]++;throw err;}else{cov_2e3l21o3ht().b[4][1]++;}var dbo=(cov_2e3l21o3ht().s[44]++,db.db(dbName));cov_2e3l21o3ht().s[45]++;dbo.collection('Request').find({$or:[{academicTutorID:tutorID},{externalTutorID:tutorID}]}).toArray(function(err,result){cov_2e3l21o3ht().f[20]++;cov_2e3l21o3ht().s[46]++;if(err){cov_2e3l21o3ht().b[5][0]++;cov_2e3l21o3ht().s[47]++;throw err;}else{cov_2e3l21o3ht().b[5][1]++;}cov_2e3l21o3ht().s[48]++;db.close();cov_2e3l21o3ht().s[49]++;resolve(result);});});});}/**
   * This method deletes a student's request
   * @param {String} studentID - The student's email
   */static deleteRequest(studentID){cov_2e3l21o3ht().f[21]++;cov_2e3l21o3ht().s[50]++;return new Promise(function(resolve,reject){cov_2e3l21o3ht().f[22]++;cov_2e3l21o3ht().s[51]++;MongoClient.connect(url,{useNewUrlParser:true,useUnifiedTopology:true},function(err,db){cov_2e3l21o3ht().f[23]++;cov_2e3l21o3ht().s[52]++;if(err){cov_2e3l21o3ht().b[6][0]++;cov_2e3l21o3ht().s[53]++;throw err;}else{cov_2e3l21o3ht().b[6][1]++;}var dbo=(cov_2e3l21o3ht().s[54]++,db.db(dbName));cov_2e3l21o3ht().s[55]++;dbo.collection('Request').deleteOne({studentID:studentID},function(err){cov_2e3l21o3ht().f[24]++;cov_2e3l21o3ht().s[56]++;if(err){cov_2e3l21o3ht().b[7][0]++;cov_2e3l21o3ht().s[57]++;throw err;}else{cov_2e3l21o3ht().b[7][1]++;}cov_2e3l21o3ht().s[58]++;db.close();cov_2e3l21o3ht().s[59]++;resolve();});});});}/**
   * This method updates the external tutor of a request
   * @param {String} student - The student's email
   * @param {String} tutor - The external tutor's email
   */static updateExternalTutor(studentID,tutorID){cov_2e3l21o3ht().f[25]++;cov_2e3l21o3ht().s[60]++;return new Promise(function(resolve,reject){cov_2e3l21o3ht().f[26]++;cov_2e3l21o3ht().s[61]++;MongoClient.connect(url,{useNewUrlParser:true,useUnifiedTopology:true},function(err,db){cov_2e3l21o3ht().f[27]++;cov_2e3l21o3ht().s[62]++;if(err){cov_2e3l21o3ht().b[8][0]++;cov_2e3l21o3ht().s[63]++;throw err;}else{cov_2e3l21o3ht().b[8][1]++;}var dbo=(cov_2e3l21o3ht().s[64]++,db.db(dbName));cov_2e3l21o3ht().s[65]++;dbo.collection('Request').updateOne({studentID:studentID},{$set:{externalTutorID:tutorID}},function(err,result){cov_2e3l21o3ht().f[28]++;cov_2e3l21o3ht().s[66]++;if(err){cov_2e3l21o3ht().b[9][0]++;cov_2e3l21o3ht().s[67]++;throw err;}else{cov_2e3l21o3ht().b[9][1]++;}cov_2e3l21o3ht().s[68]++;db.close();cov_2e3l21o3ht().s[69]++;resolve();});});});}}cov_2e3l21o3ht().s[70]++;module.exports=Request;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcXVlc3QuanMiXSwibmFtZXMiOlsiTW9uZ29DbGllbnQiLCJyZXF1aXJlIiwidXJsIiwiZGJOYW1lIiwiUmVxdWVzdCIsImNvbnN0cnVjdG9yIiwic3R1ZGVudElEIiwiYWNhZGVtaWNUdXRvcklEIiwiZXh0ZXJuYWxUdXRvcklEIiwibGVhcm5pbmdBZ3JlZW1lbnRJRCIsInNldFN0dWRlbnRJRCIsImdldFN0dWRlbnRJRCIsInNldEFjYWRlbWljVHV0b3JJRCIsImdldEFjYWRlbWljVHV0b3JJRCIsInNldEV4dGVybmFsVHV0b3JJRCIsImdldEV4dGVybmFsVHV0b3JJRCIsInNldExlYXJuaW5nQWdyZWVtZW50SUQiLCJnZXRMZWFybmluZ0FncmVlbWVudElEIiwiaW5zZXJ0UmVxdWVzdCIsInJlcXVlc3QiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImNvbm5lY3QiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJlcnIiLCJkYiIsInJlcXVlc3RUIiwiZGJvIiwiY29sbGVjdGlvbiIsImluc2VydE9uZSIsImNsb3NlIiwiZ2V0UmVxdWVzdCIsImZpbmRPbmUiLCJyZXN1bHQiLCJnZXRBbGxSZXF1ZXN0cyIsInR1dG9ySUQiLCJmaW5kIiwiJG9yIiwidG9BcnJheSIsImRlbGV0ZVJlcXVlc3QiLCJkZWxldGVPbmUiLCJ1cGRhdGVFeHRlcm5hbFR1dG9yIiwidXBkYXRlT25lIiwiJHNldCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJxa1hBZVk7MkZBZlosR0FBSUEsQ0FBQUEsV0FBVywwQkFBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBUCxDQUFtQkQsV0FBdEIsQ0FBZixDQUVBO0FBQ0EsS0FBTUUsQ0FBQUEsR0FBRywwQkFBRyx5Q0FBSCxDQUFULENBRUE7QUFDQSxLQUFNQyxDQUFBQSxNQUFNLDBCQUFHLGVBQUgsQ0FBWixDQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQ0EsS0FBTUMsQ0FBQUEsT0FBUSxDQUNa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LHlCQUUzSEMsRUFBRSxDQUFDSyxLQUFILEdBRjJILHlCQUczSFgsT0FBTyxHQUNSLENBSkQsRUFLRCxDQVJELEVBU0QsQ0FWTSxDQUFQLENBV0QsQ0F4S1csQyx5QkEyS2R5QixNQUFNLENBQUNDLE9BQVAsQ0FBaUIzQyxPQUFqQiIsInNvdXJjZXNDb250ZW50IjpbInZhciBNb25nb0NsaWVudCA9IHJlcXVpcmUoJ21vbmdvZGInKS5Nb25nb0NsaWVudFxuXG4vLyBEYXRhYmFzZSBVUkxcbmNvbnN0IHVybCA9ICdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3L2Vhc3lhZ3JlZW1lbnQnXG5cbi8vIERhdGFiYXNlIG5hbWVcbmNvbnN0IGRiTmFtZSA9ICdlYXN5YWdyZWVtZW50J1xuLyoqXG4gKiBUaGlzIG1vZHVsZSByZXByZXNlbnRzIHRoZSBSZXF1ZXN0IG9iamVjdFxuICogQG1vZHVsZSBSZXF1ZXN0XG4gKi9cbmNsYXNzIFJlcXVlc3Qge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5zdHVkZW50SUQgPSBudWxsXG4gICAgdGhpcy5hY2FkZW1pY1R1dG9ySUQgPSBudWxsXG4gICAgdGhpcy5leHRlcm5hbFR1dG9ySUQgPSBudWxsXG4gICAgdGhpcy5sZWFybmluZ0FncmVlbWVudElEID0gbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIHNldHMgdGhlIFJlcXVlc3QncyBTdHVkZW50IGVtYWlsXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHVkZW50SURcbiAgICovXG4gIHNldFN0dWRlbnRJRCAoc3R1ZGVudElEKSB7XG4gICAgdGhpcy5zdHVkZW50SUQgPSBzdHVkZW50SURcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBnZXRzIHRoZSBSZXF1ZXN0J3MgU3R1ZGVudCBlbWFpbFxuICAgKiBAcmV0dXJucyB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0U3R1ZGVudElEICgpIHtcbiAgICByZXR1cm4gdGhpcy5zdHVkZW50SURcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBzZXRzIHRoZSBSZXF1ZXN0J3MgQWNhZGVtaWMgVHV0b3IgZW1haWxcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFjYWRlbWljVHV0b3JJRFxuICAgKi9cbiAgc2V0QWNhZGVtaWNUdXRvcklEIChhY2FkZW1pY1R1dG9ySUQpIHtcbiAgICB0aGlzLmFjYWRlbWljVHV0b3JJRCA9IGFjYWRlbWljVHV0b3JJRFxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIGdldHMgUmVxdWVzdCdzIEFjYWRlbWljIFR1dG9yIGVtYWlsXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9XG4gICAqL1xuICBnZXRBY2FkZW1pY1R1dG9ySUQgKCkge1xuICAgIHJldHVybiB0aGlzLmFjYWRlbWljVHV0b3JJRFxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIHNldHMgdGhlIFJlcXVlc3QncyBFeHRlcm5hbCBUdXRvciBlbWFpbFxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXh0ZXJuYWxUdXRvcklEXG4gICAqL1xuICBzZXRFeHRlcm5hbFR1dG9ySUQgKGV4dGVybmFsVHV0b3JJRCkge1xuICAgIHRoaXMuZXh0ZXJuYWxUdXRvcklEID0gZXh0ZXJuYWxUdXRvcklEXG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgZ2V0cyBSZXF1ZXN0J3MgRXh0ZXJuYWwgVHV0b3IgZW1haWxcbiAgICogQHJldHVybnMge1N0cmluZ31cbiAgICovXG4gIGdldEV4dGVybmFsVHV0b3JJRCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZXh0ZXJuYWxUdXRvcklEXG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2Qgc2V0cyB0aGUgTGVhcm5pbmcgQWdyZWVtZW50IGFzc29jaWF0ZWQgdG8gdGhlIFJlcXVlc3RcbiAgICogQHBhcmFtIHtTdHJpbmd9IGxlYXJuaW5nQWdyZWVtZW50SURcbiAgICovXG4gIHNldExlYXJuaW5nQWdyZWVtZW50SUQgKGxlYXJuaW5nQWdyZWVtZW50SUQpIHtcbiAgICB0aGlzLmxlYXJuaW5nQWdyZWVtZW50SUQgPSBsZWFybmluZ0FncmVlbWVudElEXG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgZ2V0cyB0aGUgTGVhcm5pbmcgQWdyZWVtZW50IGFzc29jaWF0ZSB0byB0aGUgUmVxdWVzdFxuICAgKiBAcmV0dXJucyB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0TGVhcm5pbmdBZ3JlZW1lbnRJRCAoKSB7XG4gICAgcmV0dXJuIHRoaXMubGVhcm5pbmdBZ3JlZW1lbnRJRFxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIGluc2VydHMgYSBuZXcgUmVxdWVzdCBpbiB0aGUgZGF0YWJhc2VcbiAgICogQHBhcmFtIHtSZXF1ZXN0fSByZXF1ZXN0IC0gVGhlIFJlcXVlc3Qgb2JqZWN0IHRvIGluc2VydFxuICAgKi9cbiAgc3RhdGljIGluc2VydFJlcXVlc3QgKHJlcXVlc3QpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgTW9uZ29DbGllbnQuY29ubmVjdCh1cmwsIHsgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLCB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUgfSwgZnVuY3Rpb24gKGVyciwgZGIpIHtcbiAgICAgICAgaWYgKGVycikgdGhyb3cgZXJyXG4gICAgICAgIHZhciByZXF1ZXN0VCA9IG5ldyBSZXF1ZXN0KClcbiAgICAgICAgcmVxdWVzdFQuc2V0QWNhZGVtaWNUdXRvcklEKHJlcXVlc3QuYWNhZGVtaWNUdXRvcklEKVxuICAgICAgICByZXF1ZXN0VC5zZXRFeHRlcm5hbFR1dG9ySUQocmVxdWVzdC5leHRlcm5hbFR1dG9ySUQpXG4gICAgICAgIHJlcXVlc3RULnNldExlYXJuaW5nQWdyZWVtZW50SUQocmVxdWVzdC5sZWFybmluZ0FncmVlbWVudElEKVxuICAgICAgICByZXF1ZXN0VC5zZXRTdHVkZW50SUQocmVxdWVzdC5zdHVkZW50SUQpXG4gICAgICAgIHZhciBkYm8gPSBkYi5kYihkYk5hbWUpXG4gICAgICAgIGRiby5jb2xsZWN0aW9uKCdSZXF1ZXN0JykuaW5zZXJ0T25lKHsgc3R1ZGVudElEOiByZXF1ZXN0VC5nZXRTdHVkZW50SUQoKSwgYWNhZGVtaWNUdXRvcklEOiByZXF1ZXN0VC5nZXRBY2FkZW1pY1R1dG9ySUQoKSwgZXh0ZXJuYWxUdXRvcklEOiByZXF1ZXN0VC5nZXRFeHRlcm5hbFR1dG9ySUQoKSwgbGVhcm5pbmdBZ3JlZW1lbnRJRDogcmVxdWVzdFQuZ2V0TGVhcm5pbmdBZ3JlZW1lbnRJRCgpIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBpZiAoZXJyKSB0aHJvdyBlcnJcbiAgICAgICAgICBkYi5jbG9zZSgpXG4gICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgcmV0cmlldmVzIGEgc3BlY2lmaWMgUmVxdWVzdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3R1ZGVudElEIC0gVGhlIHN0dWRlbnQncyBlbWFpbFxuICAgKiBAcmV0dXJucyB7UmVxdWVzdH0gLSBUaGUgUmVxdWVzdCBmb3VuZFxuICAgKi9cbiAgc3RhdGljIGdldFJlcXVlc3QgKHN0dWRlbnRJRCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBNb25nb0NsaWVudC5jb25uZWN0KHVybCwgeyB1c2VOZXdVcmxQYXJzZXI6IHRydWUsIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSB9LCBmdW5jdGlvbiAoZXJyLCBkYikge1xuICAgICAgICBpZiAoZXJyKSB0aHJvdyBlcnJcbiAgICAgICAgdmFyIGRibyA9IGRiLmRiKGRiTmFtZSlcbiAgICAgICAgZGJvLmNvbGxlY3Rpb24oJ1JlcXVlc3QnKS5maW5kT25lKHsgc3R1ZGVudElEOiBzdHVkZW50SUQgfSwgZnVuY3Rpb24gKGVyciwgcmVzdWx0KSB7XG4gICAgICAgICAgaWYgKGVycikgdGhyb3cgZXJyXG4gICAgICAgICAgZGIuY2xvc2UoKVxuICAgICAgICAgIHJlc29sdmUocmVzdWx0KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIHJldGlyZXZlcyBhbGwgdGhlIHJlcXVlc3RzIGZvciBhIHNwZWNpZmljIHR1dG9yXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0dXRvcklEIC0gVGhlIGFjYWRlbWljIG9yIGV4dGVybmFsIHR1dG9yJ3MgZW1haWxcbiAgICogQHJldHVybnMge0FycmF5fSAtIFRoZSBsaXN0IG9mIHRoZSByZXF1ZXN0c1xuICAgKi9cbiAgc3RhdGljIGdldEFsbFJlcXVlc3RzICh0dXRvcklEKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIE1vbmdvQ2xpZW50LmNvbm5lY3QodXJsLCB7IHVzZU5ld1VybFBhcnNlcjogdHJ1ZSwgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlIH0sIGZ1bmN0aW9uIChlcnIsIGRiKSB7XG4gICAgICAgIGlmIChlcnIpIHRocm93IGVyclxuICAgICAgICB2YXIgZGJvID0gZGIuZGIoZGJOYW1lKVxuICAgICAgICBkYm8uY29sbGVjdGlvbignUmVxdWVzdCcpLmZpbmQoeyAkb3I6IFt7IGFjYWRlbWljVHV0b3JJRDogdHV0b3JJRCB9LCB7IGV4dGVybmFsVHV0b3JJRDogdHV0b3JJRCB9XSB9KS50b0FycmF5KGZ1bmN0aW9uIChlcnIsIHJlc3VsdCkge1xuICAgICAgICAgIGlmIChlcnIpIHRocm93IGVyclxuICAgICAgICAgIGRiLmNsb3NlKClcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdClcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBkZWxldGVzIGEgc3R1ZGVudCdzIHJlcXVlc3RcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0dWRlbnRJRCAtIFRoZSBzdHVkZW50J3MgZW1haWxcbiAgICovXG4gIHN0YXRpYyBkZWxldGVSZXF1ZXN0IChzdHVkZW50SUQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgTW9uZ29DbGllbnQuY29ubmVjdCh1cmwsIHsgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLCB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUgfSwgZnVuY3Rpb24gKGVyciwgZGIpIHtcbiAgICAgICAgaWYgKGVycikgdGhyb3cgZXJyXG4gICAgICAgIHZhciBkYm8gPSBkYi5kYihkYk5hbWUpXG4gICAgICAgIGRiby5jb2xsZWN0aW9uKCdSZXF1ZXN0JykuZGVsZXRlT25lKHsgc3R1ZGVudElEOiBzdHVkZW50SUQgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGlmIChlcnIpIHRocm93IGVyclxuICAgICAgICAgIGRiLmNsb3NlKClcbiAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCB1cGRhdGVzIHRoZSBleHRlcm5hbCB0dXRvciBvZiBhIHJlcXVlc3RcbiAgICogQHBhcmFtIHtTdHJpbmd9IHN0dWRlbnQgLSBUaGUgc3R1ZGVudCdzIGVtYWlsXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0dXRvciAtIFRoZSBleHRlcm5hbCB0dXRvcidzIGVtYWlsXG4gICAqL1xuICBzdGF0aWMgdXBkYXRlRXh0ZXJuYWxUdXRvciAoc3R1ZGVudElELCB0dXRvcklEKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIE1vbmdvQ2xpZW50LmNvbm5lY3QodXJsLCB7IHVzZU5ld1VybFBhcnNlcjogdHJ1ZSwgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlIH0sIGZ1bmN0aW9uIChlcnIsIGRiKSB7XG4gICAgICAgIGlmIChlcnIpIHRocm93IGVyclxuICAgICAgICB2YXIgZGJvID0gZGIuZGIoZGJOYW1lKVxuICAgICAgICBkYm8uY29sbGVjdGlvbignUmVxdWVzdCcpLnVwZGF0ZU9uZSh7IHN0dWRlbnRJRDogc3R1ZGVudElEIH0sIHsgJHNldDogeyBleHRlcm5hbFR1dG9ySUQ6IHR1dG9ySUQgfSB9LCBmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHtcbiAgICAgICAgICBpZiAoZXJyKSB0aHJvdyBlcnJcbiAgICAgICAgICBkYi5jbG9zZSgpXG4gICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZXF1ZXN0XG4iXX0=