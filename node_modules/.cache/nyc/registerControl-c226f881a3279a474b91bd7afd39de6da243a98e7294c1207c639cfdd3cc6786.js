function cov_om8jtvk(){var path="/Users/salvatore/Desktop/EasyAgreement-IGES/app/controllers/registerControl.js";var hash="0f4bcedbb571abd0d7a97ca9610b5e887345b6ba";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/salvatore/Desktop/EasyAgreement-IGES/app/controllers/registerControl.js",statementMap:{"0":{start:{line:1,column:11},end:{line:1,column:31}},"1":{start:{line:3,column:19},end:{line:3,column:50}},"2":{start:{line:4,column:25},end:{line:4,column:62}},"3":{start:{line:11,column:0},end:{line:198,column:1}},"4":{start:{line:12,column:2},end:{line:197,column:4}},"5":{start:{line:13,column:4},end:{line:196,column:5}},"6":{start:{line:15,column:17},end:{line:15,column:35}},"7":{start:{line:16,column:20},end:{line:16,column:41}},"8":{start:{line:17,column:18},end:{line:17,column:37}},"9":{start:{line:18,column:22},end:{line:18,column:45}},"10":{start:{line:19,column:18},end:{line:19,column:36}},"11":{start:{line:20,column:22},end:{line:20,column:43}},"12":{start:{line:21,column:18},end:{line:21,column:38}},"13":{start:{line:22,column:21},end:{line:22,column:43}},"14":{start:{line:23,column:28},end:{line:23,column:57}},"15":{start:{line:26,column:20},end:{line:26,column:24}},"16":{start:{line:28,column:6},end:{line:31,column:7}},"17":{start:{line:29,column:8},end:{line:29,column:41}},"18":{start:{line:30,column:8},end:{line:30,column:23}},"19":{start:{line:33,column:6},end:{line:36,column:7}},"20":{start:{line:34,column:8},end:{line:34,column:44}},"21":{start:{line:35,column:8},end:{line:35,column:23}},"22":{start:{line:38,column:6},end:{line:41,column:7}},"23":{start:{line:39,column:8},end:{line:39,column:42}},"24":{start:{line:40,column:8},end:{line:40,column:23}},"25":{start:{line:43,column:6},end:{line:46,column:7}},"26":{start:{line:44,column:8},end:{line:44,column:46}},"27":{start:{line:45,column:8},end:{line:45,column:23}},"28":{start:{line:48,column:6},end:{line:51,column:7}},"29":{start:{line:49,column:8},end:{line:49,column:41}},"30":{start:{line:50,column:8},end:{line:50,column:23}},"31":{start:{line:53,column:6},end:{line:56,column:7}},"32":{start:{line:54,column:8},end:{line:54,column:44}},"33":{start:{line:55,column:8},end:{line:55,column:23}},"34":{start:{line:58,column:6},end:{line:61,column:7}},"35":{start:{line:59,column:8},end:{line:59,column:42}},"36":{start:{line:60,column:8},end:{line:60,column:23}},"37":{start:{line:63,column:6},end:{line:66,column:7}},"38":{start:{line:64,column:8},end:{line:64,column:38}},"39":{start:{line:65,column:8},end:{line:65,column:23}},"40":{start:{line:68,column:6},end:{line:71,column:7}},"41":{start:{line:69,column:8},end:{line:69,column:45}},"42":{start:{line:70,column:8},end:{line:70,column:23}},"43":{start:{line:73,column:6},end:{line:76,column:7}},"44":{start:{line:74,column:8},end:{line:74,column:22}},"45":{start:{line:75,column:8},end:{line:75,column:14}},"46":{start:{line:79,column:27},end:{line:79,column:54}},"47":{start:{line:83,column:21},end:{line:83,column:39}},"48":{start:{line:84,column:6},end:{line:84,column:29}},"49":{start:{line:85,column:6},end:{line:85,column:37}},"50":{start:{line:86,column:6},end:{line:86,column:30}},"51":{start:{line:87,column:6},end:{line:87,column:28}},"52":{start:{line:88,column:6},end:{line:88,column:34}},"53":{start:{line:89,column:6},end:{line:89,column:36}},"54":{start:{line:90,column:6},end:{line:90,column:42}},"55":{start:{line:91,column:6},end:{line:91,column:38}},"56":{start:{line:94,column:19},end:{line:94,column:58}},"57":{start:{line:96,column:6},end:{line:121,column:8}},"58":{start:{line:97,column:8},end:{line:101,column:9}},"59":{start:{line:98,column:10},end:{line:98,column:42}},"60":{start:{line:99,column:10},end:{line:99,column:24}},"61":{start:{line:100,column:10},end:{line:100,column:16}},"62":{start:{line:102,column:8},end:{line:120,column:9}},"63":{start:{line:103,column:23},end:{line:103,column:59}},"64":{start:{line:105,column:10},end:{line:119,column:12}},"65":{start:{line:106,column:12},end:{line:110,column:13}},"66":{start:{line:107,column:14},end:{line:107,column:46}},"67":{start:{line:108,column:14},end:{line:108,column:28}},"68":{start:{line:109,column:14},end:{line:109,column:20}},"69":{start:{line:111,column:12},end:{line:118,column:13}},"70":{start:{line:113,column:14},end:{line:113,column:50}},"71":{start:{line:116,column:14},end:{line:116,column:39}},"72":{start:{line:117,column:14},end:{line:117,column:27}},"73":{start:{line:122,column:11},end:{line:196,column:5}},"74":{start:{line:124,column:6},end:{line:124,column:32}},"75":{start:{line:125,column:6},end:{line:125,column:38}},"76":{start:{line:126,column:6},end:{line:126,column:34}},"77":{start:{line:127,column:23},end:{line:127,column:48}},"78":{start:{line:128,column:6},end:{line:128,column:39}},"79":{start:{line:129,column:6},end:{line:129,column:53}},"80":{start:{line:132,column:6},end:{line:132,column:20}},"81":{start:{line:133,column:6},end:{line:136,column:7}},"82":{start:{line:134,column:8},end:{line:134,column:39}},"83":{start:{line:135,column:8},end:{line:135,column:23}},"84":{start:{line:138,column:6},end:{line:141,column:7}},"85":{start:{line:139,column:8},end:{line:139,column:42}},"86":{start:{line:140,column:8},end:{line:140,column:23}},"87":{start:{line:143,column:6},end:{line:146,column:7}},"88":{start:{line:144,column:8},end:{line:144,column:40}},"89":{start:{line:145,column:8},end:{line:145,column:23}},"90":{start:{line:148,column:6},end:{line:151,column:7}},"91":{start:{line:149,column:8},end:{line:149,column:45}},"92":{start:{line:150,column:8},end:{line:150,column:23}},"93":{start:{line:153,column:6},end:{line:156,column:7}},"94":{start:{line:154,column:8},end:{line:154,column:38}},"95":{start:{line:155,column:8},end:{line:155,column:23}},"96":{start:{line:158,column:6},end:{line:161,column:7}},"97":{start:{line:159,column:8},end:{line:159,column:45}},"98":{start:{line:160,column:8},end:{line:160,column:23}},"99":{start:{line:163,column:6},end:{line:166,column:7}},"100":{start:{line:164,column:8},end:{line:164,column:22}},"101":{start:{line:165,column:8},end:{line:165,column:14}},"102":{start:{line:169,column:6},end:{line:169,column:50}},"103":{start:{line:172,column:28},end:{line:172,column:52}},"104":{start:{line:173,column:6},end:{line:173,column:41}},"105":{start:{line:174,column:6},end:{line:174,column:35}},"106":{start:{line:175,column:6},end:{line:175,column:47}},"107":{start:{line:176,column:6},end:{line:176,column:37}},"108":{start:{line:177,column:6},end:{line:177,column:49}},"109":{start:{line:180,column:18},end:{line:180,column:55}},"110":{start:{line:181,column:6},end:{line:195,column:8}},"111":{start:{line:182,column:8},end:{line:186,column:9}},"112":{start:{line:183,column:10},end:{line:183,column:42}},"113":{start:{line:184,column:10},end:{line:184,column:24}},"114":{start:{line:185,column:10},end:{line:185,column:16}},"115":{start:{line:187,column:8},end:{line:194,column:9}},"116":{start:{line:189,column:10},end:{line:189,column:65}},"117":{start:{line:192,column:10},end:{line:192,column:35}},"118":{start:{line:193,column:10},end:{line:193,column:23}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:37},end:{line:198,column:1}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:21},end:{line:12,column:22}},loc:{start:{line:12,column:48},end:{line:197,column:3}},line:12},"2":{name:"(anonymous_2)",decl:{start:{line:96,column:18},end:{line:96,column:19}},loc:{start:{line:96,column:36},end:{line:121,column:7}},line:96},"3":{name:"(anonymous_3)",decl:{start:{line:105,column:22},end:{line:105,column:23}},loc:{start:{line:105,column:40},end:{line:119,column:11}},line:105},"4":{name:"(anonymous_4)",decl:{start:{line:181,column:17},end:{line:181,column:18}},loc:{start:{line:181,column:35},end:{line:195,column:7}},line:181}},branchMap:{"0":{loc:{start:{line:13,column:4},end:{line:196,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:196,column:5}},{start:{line:13,column:4},end:{line:196,column:5}}],line:13},"1":{loc:{start:{line:28,column:6},end:{line:31,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:31,column:7}},{start:{line:28,column:6},end:{line:31,column:7}}],line:28},"2":{loc:{start:{line:28,column:10},end:{line:28,column:98}},type:"binary-expr",locations:[{start:{line:28,column:11},end:{line:28,column:23}},{start:{line:28,column:29},end:{line:28,column:45}},{start:{line:28,column:51},end:{line:28,column:97}}],line:28},"3":{loc:{start:{line:33,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:36,column:7}},{start:{line:33,column:6},end:{line:36,column:7}}],line:33},"4":{loc:{start:{line:33,column:10},end:{line:33,column:107}},type:"binary-expr",locations:[{start:{line:33,column:11},end:{line:33,column:26}},{start:{line:33,column:32},end:{line:33,column:51}},{start:{line:33,column:57},end:{line:33,column:106}}],line:33},"5":{loc:{start:{line:38,column:6},end:{line:41,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:41,column:7}},{start:{line:38,column:6},end:{line:41,column:7}}],line:38},"6":{loc:{start:{line:38,column:10},end:{line:38,column:108}},type:"binary-expr",locations:[{start:{line:38,column:11},end:{line:38,column:24}},{start:{line:38,column:30},end:{line:38,column:48}},{start:{line:38,column:54},end:{line:38,column:107}}],line:38},"7":{loc:{start:{line:43,column:6},end:{line:46,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:46,column:7}},{start:{line:43,column:6},end:{line:46,column:7}}],line:43},"8":{loc:{start:{line:43,column:10},end:{line:43,column:89}},type:"binary-expr",locations:[{start:{line:43,column:11},end:{line:43,column:28}},{start:{line:43,column:34},end:{line:43,column:55}},{start:{line:43,column:61},end:{line:43,column:88}}],line:43},"9":{loc:{start:{line:48,column:6},end:{line:51,column:7}},type:"if",locations:[{start:{line:48,column:6},end:{line:51,column:7}},{start:{line:48,column:6},end:{line:51,column:7}}],line:48},"10":{loc:{start:{line:48,column:10},end:{line:48,column:82}},type:"binary-expr",locations:[{start:{line:48,column:11},end:{line:48,column:24}},{start:{line:48,column:30},end:{line:48,column:47}},{start:{line:48,column:53},end:{line:48,column:81}}],line:48},"11":{loc:{start:{line:53,column:6},end:{line:56,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:56,column:7}},{start:{line:53,column:6},end:{line:56,column:7}}],line:53},"12":{loc:{start:{line:53,column:10},end:{line:53,column:98}},type:"binary-expr",locations:[{start:{line:53,column:11},end:{line:53,column:28}},{start:{line:53,column:34},end:{line:53,column:55}},{start:{line:53,column:61},end:{line:53,column:97}}],line:53},"13":{loc:{start:{line:58,column:6},end:{line:61,column:7}},type:"if",locations:[{start:{line:58,column:6},end:{line:61,column:7}},{start:{line:58,column:6},end:{line:61,column:7}}],line:58},"14":{loc:{start:{line:58,column:10},end:{line:58,column:82}},type:"binary-expr",locations:[{start:{line:58,column:11},end:{line:58,column:24}},{start:{line:58,column:30},end:{line:58,column:47}},{start:{line:58,column:53},end:{line:58,column:81}}],line:58},"15":{loc:{start:{line:63,column:6},end:{line:66,column:7}},type:"if",locations:[{start:{line:63,column:6},end:{line:66,column:7}},{start:{line:63,column:6},end:{line:66,column:7}}],line:63},"16":{loc:{start:{line:63,column:10},end:{line:63,column:92}},type:"binary-expr",locations:[{start:{line:63,column:11},end:{line:63,column:27}},{start:{line:63,column:33},end:{line:63,column:53}},{start:{line:63,column:59},end:{line:63,column:91}}],line:63},"17":{loc:{start:{line:68,column:6},end:{line:71,column:7}},type:"if",locations:[{start:{line:68,column:6},end:{line:71,column:7}},{start:{line:68,column:6},end:{line:71,column:7}}],line:68},"18":{loc:{start:{line:73,column:6},end:{line:76,column:7}},type:"if",locations:[{start:{line:73,column:6},end:{line:76,column:7}},{start:{line:73,column:6},end:{line:76,column:7}}],line:73},"19":{loc:{start:{line:97,column:8},end:{line:101,column:9}},type:"if",locations:[{start:{line:97,column:8},end:{line:101,column:9}},{start:{line:97,column:8},end:{line:101,column:9}}],line:97},"20":{loc:{start:{line:102,column:8},end:{line:120,column:9}},type:"if",locations:[{start:{line:102,column:8},end:{line:120,column:9}},{start:{line:102,column:8},end:{line:120,column:9}}],line:102},"21":{loc:{start:{line:106,column:12},end:{line:110,column:13}},type:"if",locations:[{start:{line:106,column:12},end:{line:110,column:13}},{start:{line:106,column:12},end:{line:110,column:13}}],line:106},"22":{loc:{start:{line:111,column:12},end:{line:118,column:13}},type:"if",locations:[{start:{line:111,column:12},end:{line:118,column:13}},{start:{line:111,column:12},end:{line:118,column:13}}],line:111},"23":{loc:{start:{line:122,column:11},end:{line:196,column:5}},type:"if",locations:[{start:{line:122,column:11},end:{line:196,column:5}},{start:{line:122,column:11},end:{line:196,column:5}}],line:122},"24":{loc:{start:{line:133,column:6},end:{line:136,column:7}},type:"if",locations:[{start:{line:133,column:6},end:{line:136,column:7}},{start:{line:133,column:6},end:{line:136,column:7}}],line:133},"25":{loc:{start:{line:133,column:10},end:{line:133,column:98}},type:"binary-expr",locations:[{start:{line:133,column:11},end:{line:133,column:23}},{start:{line:133,column:29},end:{line:133,column:45}},{start:{line:133,column:51},end:{line:133,column:97}}],line:133},"26":{loc:{start:{line:138,column:6},end:{line:141,column:7}},type:"if",locations:[{start:{line:138,column:6},end:{line:141,column:7}},{start:{line:138,column:6},end:{line:141,column:7}}],line:138},"27":{loc:{start:{line:138,column:10},end:{line:138,column:107}},type:"binary-expr",locations:[{start:{line:138,column:11},end:{line:138,column:26}},{start:{line:138,column:32},end:{line:138,column:51}},{start:{line:138,column:57},end:{line:138,column:106}}],line:138},"28":{loc:{start:{line:143,column:6},end:{line:146,column:7}},type:"if",locations:[{start:{line:143,column:6},end:{line:146,column:7}},{start:{line:143,column:6},end:{line:146,column:7}}],line:143},"29":{loc:{start:{line:143,column:10},end:{line:143,column:99}},type:"binary-expr",locations:[{start:{line:143,column:11},end:{line:143,column:24}},{start:{line:143,column:30},end:{line:143,column:48}},{start:{line:143,column:54},end:{line:143,column:98}}],line:143},"30":{loc:{start:{line:148,column:6},end:{line:151,column:7}},type:"if",locations:[{start:{line:148,column:6},end:{line:151,column:7}},{start:{line:148,column:6},end:{line:151,column:7}}],line:148},"31":{loc:{start:{line:148,column:10},end:{line:148,column:100}},type:"binary-expr",locations:[{start:{line:148,column:11},end:{line:148,column:29}},{start:{line:148,column:35},end:{line:148,column:57}},{start:{line:148,column:63},end:{line:148,column:99}}],line:148},"32":{loc:{start:{line:153,column:6},end:{line:156,column:7}},type:"if",locations:[{start:{line:153,column:6},end:{line:156,column:7}},{start:{line:153,column:6},end:{line:156,column:7}}],line:153},"33":{loc:{start:{line:153,column:10},end:{line:153,column:92}},type:"binary-expr",locations:[{start:{line:153,column:11},end:{line:153,column:27}},{start:{line:153,column:33},end:{line:153,column:53}},{start:{line:153,column:59},end:{line:153,column:91}}],line:153},"34":{loc:{start:{line:158,column:6},end:{line:161,column:7}},type:"if",locations:[{start:{line:158,column:6},end:{line:161,column:7}},{start:{line:158,column:6},end:{line:161,column:7}}],line:158},"35":{loc:{start:{line:163,column:6},end:{line:166,column:7}},type:"if",locations:[{start:{line:163,column:6},end:{line:166,column:7}},{start:{line:163,column:6},end:{line:166,column:7}}],line:163},"36":{loc:{start:{line:182,column:8},end:{line:186,column:9}},type:"if",locations:[{start:{line:182,column:8},end:{line:186,column:9}},{start:{line:182,column:8},end:{line:186,column:9}}],line:182},"37":{loc:{start:{line:187,column:8},end:{line:194,column:9}},type:"if",locations:[{start:{line:187,column:8},end:{line:194,column:9}},{start:{line:187,column:8},end:{line:194,column:9}}],line:187}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0,0],"7":[0,0],"8":[0,0,0],"9":[0,0],"10":[0,0,0],"11":[0,0],"12":[0,0,0],"13":[0,0],"14":[0,0,0],"15":[0,0],"16":[0,0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0,0],"26":[0,0],"27":[0,0,0],"28":[0,0],"29":[0,0,0],"30":[0,0],"31":[0,0,0],"32":[0,0],"33":[0,0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0f4bcedbb571abd0d7a97ca9610b5e887345b6ba"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_om8jtvk=function(){return actualCoverage;};}return actualCoverage;}cov_om8jtvk();var hash=(cov_om8jtvk().s[0]++,require('./hash.js'));var StudentModel=(cov_om8jtvk().s[1]++,require('../models/student.js'));var AcademicTutorModel=(cov_om8jtvk().s[2]++,require('../models/academicTutor.js'));/**
 * This method registers the user into system
 * @param {Http} req - The HTTP request
 * @param {Http} res - The HTTP response
 */cov_om8jtvk().s[3]++;exports.signup=function(req,res){cov_om8jtvk().f[0]++;cov_om8jtvk().s[4]++;return new Promise(function(resolve,reject){cov_om8jtvk().f[1]++;cov_om8jtvk().s[5]++;if(req.body.radioAccount=='studente'){cov_om8jtvk().b[0][0]++;// Get parameter from form
var name=(cov_om8jtvk().s[6]++,req.body.inputName);var surname=(cov_om8jtvk().s[7]++,req.body.inputSurname);var email=(cov_om8jtvk().s[8]++,req.body.inputEmail);var matricola=(cov_om8jtvk().s[9]++,req.body.inputMatricola);var citta=(cov_om8jtvk().s[10]++,req.body.inputCity);var indirizzo=(cov_om8jtvk().s[11]++,req.body.inputAddress);var corso=(cov_om8jtvk().s[12]++,req.body.inputCourse);var password=(cov_om8jtvk().s[13]++,req.body.inputPassword);var passwordConfirm=(cov_om8jtvk().s[14]++,req.body.inputConfirmPassword);// Form validation
var isRight=(cov_om8jtvk().s[15]++,true);cov_om8jtvk().s[16]++;if((cov_om8jtvk().b[2][0]++,name==null)||(cov_om8jtvk().b[2][1]++,name.length<=1)||(cov_om8jtvk().b[2][2]++,!/^[A-za-zà-ù]+( [A-za-zà-ù]+)* *$/.test(name))){cov_om8jtvk().b[1][0]++;cov_om8jtvk().s[17]++;res.cookie('errStudentName','1');cov_om8jtvk().s[18]++;isRight=false;}else{cov_om8jtvk().b[1][1]++;}cov_om8jtvk().s[19]++;if((cov_om8jtvk().b[4][0]++,surname==null)||(cov_om8jtvk().b[4][1]++,surname.length<=1)||(cov_om8jtvk().b[4][2]++,!/^[A-za-zà-ù]+( [A-za-zà-ù]+)* *$/.test(surname))){cov_om8jtvk().b[3][0]++;cov_om8jtvk().s[20]++;res.cookie('errStudentSurname','1');cov_om8jtvk().s[21]++;isRight=false;}else{cov_om8jtvk().b[3][1]++;}cov_om8jtvk().s[22]++;if((cov_om8jtvk().b[6][0]++,email==null)||(cov_om8jtvk().b[6][1]++,email.length<=21)||(cov_om8jtvk().b[6][2]++,!/^[a-z]\.[a-z]+[0-9]*@studenti.unisa.it/.test(email))){cov_om8jtvk().b[5][0]++;cov_om8jtvk().s[23]++;res.cookie('errStudentEmail','1');cov_om8jtvk().s[24]++;isRight=false;}else{cov_om8jtvk().b[5][1]++;}cov_om8jtvk().s[25]++;if((cov_om8jtvk().b[8][0]++,matricola==null)||(cov_om8jtvk().b[8][1]++,matricola.length<=9)||(cov_om8jtvk().b[8][2]++,!/^[0-9]+$/.test(matricola))){cov_om8jtvk().b[7][0]++;cov_om8jtvk().s[26]++;res.cookie('errStudentMatricola','1');cov_om8jtvk().s[27]++;isRight=false;}else{cov_om8jtvk().b[7][1]++;}cov_om8jtvk().s[28]++;if((cov_om8jtvk().b[10][0]++,citta==null)||(cov_om8jtvk().b[10][1]++,citta.length<=2)||(cov_om8jtvk().b[10][2]++,!/^[A-Za-z\s]+$/.test(citta))){cov_om8jtvk().b[9][0]++;cov_om8jtvk().s[29]++;res.cookie('errStudentCity','1');cov_om8jtvk().s[30]++;isRight=false;}else{cov_om8jtvk().b[9][1]++;}cov_om8jtvk().s[31]++;if((cov_om8jtvk().b[12][0]++,indirizzo==null)||(cov_om8jtvk().b[12][1]++,indirizzo.length<=6)||(cov_om8jtvk().b[12][2]++,!/^[A-Za-z0-9,\s]+$/.test(indirizzo))){cov_om8jtvk().b[11][0]++;cov_om8jtvk().s[32]++;res.cookie('errStudentAddress','1');cov_om8jtvk().s[33]++;isRight=false;}else{cov_om8jtvk().b[11][1]++;}cov_om8jtvk().s[34]++;if((cov_om8jtvk().b[14][0]++,corso==null)||(cov_om8jtvk().b[14][1]++,corso.length<=1)||(cov_om8jtvk().b[14][2]++,!/^[A-Za-z\s]+$/.test(corso))){cov_om8jtvk().b[13][0]++;cov_om8jtvk().s[35]++;res.cookie('errStudentCorso','1');cov_om8jtvk().s[36]++;isRight=false;}else{cov_om8jtvk().b[13][1]++;}cov_om8jtvk().s[37]++;if((cov_om8jtvk().b[16][0]++,password==null)||(cov_om8jtvk().b[16][1]++,password.length<=7)||(cov_om8jtvk().b[16][2]++,!/^[A-Za-z0-9]+$/.test(password))){cov_om8jtvk().b[15][0]++;cov_om8jtvk().s[38]++;res.cookie('errPassword','1');cov_om8jtvk().s[39]++;isRight=false;}else{cov_om8jtvk().b[15][1]++;}cov_om8jtvk().s[40]++;if(passwordConfirm!=password){cov_om8jtvk().b[17][0]++;cov_om8jtvk().s[41]++;res.cookie('errPasswordConfirm','1');cov_om8jtvk().s[42]++;isRight=false;}else{cov_om8jtvk().b[17][1]++;}cov_om8jtvk().s[43]++;if(!isRight){cov_om8jtvk().b[18][0]++;cov_om8jtvk().s[44]++;resolve(false);cov_om8jtvk().s[45]++;return;}else{cov_om8jtvk().b[18][1]++;}// hashing e salt of password
var passwordHashed=(cov_om8jtvk().s[46]++,hash.hashPassword(password));// Create student object
var studente=(cov_om8jtvk().s[47]++,new StudentModel());cov_om8jtvk().s[48]++;studente.setCity(citta);cov_om8jtvk().s[49]++;studente.setDegreeCourse(corso);cov_om8jtvk().s[50]++;studente.setEmail(email);cov_om8jtvk().s[51]++;studente.setName(name);cov_om8jtvk().s[52]++;studente.setSurname(surname);cov_om8jtvk().s[53]++;studente.setAddress(indirizzo);cov_om8jtvk().s[54]++;studente.setPassword(passwordHashed);cov_om8jtvk().s[55]++;studente.setStudentID(matricola);// Check if already exist
var checkM=(cov_om8jtvk().s[56]++,StudentModel.findByMatricola(matricola));cov_om8jtvk().s[57]++;checkM.then(function(result){cov_om8jtvk().f[2]++;cov_om8jtvk().s[58]++;if(!result){cov_om8jtvk().b[19][0]++;cov_om8jtvk().s[59]++;res.cookie('errAlreadyReg','1');cov_om8jtvk().s[60]++;resolve(false);cov_om8jtvk().s[61]++;return;}else{cov_om8jtvk().b[19][1]++;}cov_om8jtvk().s[62]++;if(result){cov_om8jtvk().b[20][0]++;var checkE=(cov_om8jtvk().s[63]++,StudentModel.findExistByEmail(email));cov_om8jtvk().s[64]++;checkE.then(function(result){cov_om8jtvk().f[3]++;cov_om8jtvk().s[65]++;if(!result){cov_om8jtvk().b[21][0]++;cov_om8jtvk().s[66]++;res.cookie('errAlreadyReg','1');cov_om8jtvk().s[67]++;resolve(false);cov_om8jtvk().s[68]++;return;}else{cov_om8jtvk().b[21][1]++;}cov_om8jtvk().s[69]++;if(result){cov_om8jtvk().b[22][0]++;cov_om8jtvk().s[70]++;// Save student in database
StudentModel.insertStudent(studente);// redirect
cov_om8jtvk().s[71]++;res.cookie('regEff','1');cov_om8jtvk().s[72]++;resolve(true);}else{cov_om8jtvk().b[22][1]++;}});}else{cov_om8jtvk().b[20][1]++;}});}else{cov_om8jtvk().b[0][1]++;cov_om8jtvk().s[73]++;if(req.body.radioAccount=='tutorAccademico'){cov_om8jtvk().b[23][0]++;cov_om8jtvk().s[74]++;// Get parameter from form
name=req.body.inputNameT;cov_om8jtvk().s[75]++;surname=req.body.inputSurnameT;cov_om8jtvk().s[76]++;email=req.body.inputEmailT;var department=(cov_om8jtvk().s[77]++,req.body.inputDepartmentT);cov_om8jtvk().s[78]++;password=req.body.inputPassword;cov_om8jtvk().s[79]++;passwordConfirm=req.body.inputConfirmPassword;// Form validation
cov_om8jtvk().s[80]++;isRight=true;cov_om8jtvk().s[81]++;if((cov_om8jtvk().b[25][0]++,name==null)||(cov_om8jtvk().b[25][1]++,name.length<=1)||(cov_om8jtvk().b[25][2]++,!/^[A-za-zà-ù]+( [A-za-zà-ù]+)* *$/.test(name))){cov_om8jtvk().b[24][0]++;cov_om8jtvk().s[82]++;res.cookie('errTutorName','1');cov_om8jtvk().s[83]++;isRight=false;}else{cov_om8jtvk().b[24][1]++;}cov_om8jtvk().s[84]++;if((cov_om8jtvk().b[27][0]++,surname==null)||(cov_om8jtvk().b[27][1]++,surname.length<=1)||(cov_om8jtvk().b[27][2]++,!/^[A-za-zà-ù]+( [A-za-zà-ù]+)* *$/.test(surname))){cov_om8jtvk().b[26][0]++;cov_om8jtvk().s[85]++;res.cookie('errTutorSurname','1');cov_om8jtvk().s[86]++;isRight=false;}else{cov_om8jtvk().b[26][1]++;}cov_om8jtvk().s[87]++;if((cov_om8jtvk().b[29][0]++,email==null)||(cov_om8jtvk().b[29][1]++,email.length<=12)||(cov_om8jtvk().b[29][2]++,!/^[a-z]\.[a-z]+[0-9]*@unisa.it/.test(email))){cov_om8jtvk().b[28][0]++;cov_om8jtvk().s[88]++;res.cookie('errTutorEmail','1');cov_om8jtvk().s[89]++;isRight=false;}else{cov_om8jtvk().b[28][1]++;}cov_om8jtvk().s[90]++;if((cov_om8jtvk().b[31][0]++,department==null)||(cov_om8jtvk().b[31][1]++,department.length<=1)||(cov_om8jtvk().b[31][2]++,!/^[A-Za-z0-9\s]+$/.test(department))){cov_om8jtvk().b[30][0]++;cov_om8jtvk().s[91]++;res.cookie('errTutorDepartment','1');cov_om8jtvk().s[92]++;isRight=false;}else{cov_om8jtvk().b[30][1]++;}cov_om8jtvk().s[93]++;if((cov_om8jtvk().b[33][0]++,password==null)||(cov_om8jtvk().b[33][1]++,password.length<=7)||(cov_om8jtvk().b[33][2]++,!/^[A-Za-z0-9]+$/.test(password))){cov_om8jtvk().b[32][0]++;cov_om8jtvk().s[94]++;res.cookie('errPassword','1');cov_om8jtvk().s[95]++;isRight=false;}else{cov_om8jtvk().b[32][1]++;}cov_om8jtvk().s[96]++;if(passwordConfirm!=password){cov_om8jtvk().b[34][0]++;cov_om8jtvk().s[97]++;res.cookie('errPasswordConfirm','1');cov_om8jtvk().s[98]++;isRight=false;}else{cov_om8jtvk().b[34][1]++;}cov_om8jtvk().s[99]++;if(!isRight){cov_om8jtvk().b[35][0]++;cov_om8jtvk().s[100]++;resolve(false);cov_om8jtvk().s[101]++;return;}else{cov_om8jtvk().b[35][1]++;}// hashing e salt of password
cov_om8jtvk().s[102]++;passwordHashed=hash.hashPassword(password);// Create academic tutor object
var tutorAccademico=(cov_om8jtvk().s[103]++,new AcademicTutorModel());cov_om8jtvk().s[104]++;tutorAccademico.setSurname(surname);cov_om8jtvk().s[105]++;tutorAccademico.setName(name);cov_om8jtvk().s[106]++;tutorAccademico.setDepartment(department);cov_om8jtvk().s[107]++;tutorAccademico.setEmail(email);cov_om8jtvk().s[108]++;tutorAccademico.setPassword(passwordHashed);// check if exist
var check=(cov_om8jtvk().s[109]++,AcademicTutorModel.findByEmail(email));cov_om8jtvk().s[110]++;check.then(function(result){cov_om8jtvk().f[4]++;cov_om8jtvk().s[111]++;if(!result){cov_om8jtvk().b[36][0]++;cov_om8jtvk().s[112]++;res.cookie('errAlreadyReg','1');cov_om8jtvk().s[113]++;resolve(false);cov_om8jtvk().s[114]++;return;}else{cov_om8jtvk().b[36][1]++;}cov_om8jtvk().s[115]++;if(result){cov_om8jtvk().b[37][0]++;cov_om8jtvk().s[116]++;// Save academic tutor in database
AcademicTutorModel.insertAcademicTutor(tutorAccademico);// redirect
cov_om8jtvk().s[117]++;res.cookie('regEff','1');cov_om8jtvk().s[118]++;resolve(true);}else{cov_om8jtvk().b[37][1]++;}});}else{cov_om8jtvk().b[23][1]++;}}});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdGVyQ29udHJvbC5qcyJdLCJuYW1lcyI6WyJoYXNoIiwicmVxdWlyZSIsIlN0dWRlbnRNb2RlbCIsIkFjYWRlbWljVHV0b3JNb2RlbCIsImV4cG9ydHMiLCJzaWdudXAiLCJyZXEiLCJyZXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImJvZHkiLCJyYWRpb0FjY291bnQiLCJuYW1lIiwiaW5wdXROYW1lIiwic3VybmFtZSIsImlucHV0U3VybmFtZSIsImVtYWlsIiwiaW5wdXRFbWFpbCIsIm1hdHJpY29sYSIsImlucHV0TWF0cmljb2xhIiwiY2l0dGEiLCJpbnB1dENpdHkiLCJpbmRpcml6em8iLCJpbnB1dEFkZHJlc3MiLCJjb3JzbyIsImlucHV0Q291cnNlIiwicGFzc3dvcmQiLCJpbnB1dFBhc3N3b3JkIiwicGFzc3dvcmRDb25maXJtIiwiaW5wdXRDb25maXJtUGFzc3dvcmQiLCJpc1JpZ2h0IiwibGVuZ3RoIiwidGVzdCIsImNvb2tpZSIsInBhc3N3b3JkSGFzaGVkIiwiaGFzaFBhc3N3b3JkIiwic3R1ZGVudGUiLCJzZXRDaXR5Iiwic2V0RGVncmVlQ291cnNlIiwic2V0RW1haWwiLCJzZXROYW1lIiwic2V0U3VybmFtZSIsInNldEFkZHJlc3MiLCJzZXRQYXNzd29yZCIsInNldFN0dWRlbnRJRCIsImNoZWNrTSIsImZpbmRCeU1hdHJpY29sYSIsInRoZW4iLCJyZXN1bHQiLCJjaGVja0UiLCJmaW5kRXhpc3RCeUVtYWlsIiwiaW5zZXJ0U3R1ZGVudCIsImlucHV0TmFtZVQiLCJpbnB1dFN1cm5hbWVUIiwiaW5wdXRFbWFpbFQiLCJkZXBhcnRtZW50IiwiaW5wdXREZXBhcnRtZW50VCIsInR1dG9yQWNjYWRlbWljbyIsInNldERlcGFydG1lbnQiLCJjaGVjayIsImZpbmRCeUVtYWlsIiwiaW5zZXJ0QWNhZGVtaWNUdXRvciJdLCJtYXBwaW5ncyI6InEzaUJBZVk7cUZBZlosR0FBSUEsQ0FBQUEsSUFBSSx1QkFBR0MsT0FBTyxD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eUJ2QixLQUF6QixFQXREcUQsdUJBdURyRHlDLGVBQWUsQ0FBQ2QsV0FBaEIsQ0FBNEJULGNBQTVCLEVBRUE7QUFDQSxHQUFJeUIsQ0FBQUEsS0FBSyx5QkFBR3pELGtCQUFrQixDQUFDMEQsV0FBbkIsQ0FBK0I1QyxLQUEvQixDQUFILENBQVQsQ0ExRHFELHVCQTJEckQyQyxLQUFLLENBQUNaLElBQU4sQ0FBVyxTQUFVQyxNQUFWLENBQWtCLDZDQUMzQixHQUFJLENBQUNBLE1BQUwsQ0FBYSxpREFDWDFDLEdBQUcsQ0FBQzJCLE1BQUosQ0FBVyxlQUFYLENBQTRCLEdBQTVCLEVBRFcsdUJBRVh6QixPQUFPLENBQUMsS0FBRCxDQUFQLENBRlcsdUJBR1gsT0FDRCxDQUpELCtCQUQyQix1QkFNM0IsR0FBSXdDLE1BQUosQ0FBWSxpREFDVjtBQUNBOUMsa0JBQWtCLENBQUMyRCxtQkFBbkIsQ0FBdUNKLGVBQXZDLEVBRUE7QUFKVSx1QkFLVm5ELEdBQUcsQ0FBQzJCLE1BQUosQ0FBVyxRQUFYLENBQXFCLEdBQXJCLEVBTFUsdUJBTVZ6QixPQUFPLENBQUMsSUFBRCxDQUFQLENBQ0QsQ0FQRCwrQkFRRCxDQWRELEVBZUQsQ0ExRU0sK0JBMEVOLENBQ0YsQ0F6TE0sQ0FBUCxDQTBMRCxDQTNMRCIsInNvdXJjZXNDb250ZW50IjpbInZhciBoYXNoID0gcmVxdWlyZSgnLi9oYXNoLmpzJylcblxudmFyIFN0dWRlbnRNb2RlbCA9IHJlcXVpcmUoJy4uL21vZGVscy9zdHVkZW50LmpzJylcbnZhciBBY2FkZW1pY1R1dG9yTW9kZWwgPSByZXF1aXJlKCcuLi9tb2RlbHMvYWNhZGVtaWNUdXRvci5qcycpXG5cbi8qKlxuICogVGhpcyBtZXRob2QgcmVnaXN0ZXJzIHRoZSB1c2VyIGludG8gc3lzdGVtXG4gKiBAcGFyYW0ge0h0dHB9IHJlcSAtIFRoZSBIVFRQIHJlcXVlc3RcbiAqIEBwYXJhbSB7SHR0cH0gcmVzIC0gVGhlIEhUVFAgcmVzcG9uc2VcbiAqL1xuZXhwb3J0cy5zaWdudXAgPSBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBpZiAocmVxLmJvZHkucmFkaW9BY2NvdW50ID09ICdzdHVkZW50ZScpIHtcbiAgICAgIC8vIEdldCBwYXJhbWV0ZXIgZnJvbSBmb3JtXG4gICAgICB2YXIgbmFtZSA9IHJlcS5ib2R5LmlucHV0TmFtZVxuICAgICAgdmFyIHN1cm5hbWUgPSByZXEuYm9keS5pbnB1dFN1cm5hbWVcbiAgICAgIHZhciBlbWFpbCA9IHJlcS5ib2R5LmlucHV0RW1haWxcbiAgICAgIHZhciBtYXRyaWNvbGEgPSByZXEuYm9keS5pbnB1dE1hdHJpY29sYVxuICAgICAgdmFyIGNpdHRhID0gcmVxLmJvZHkuaW5wdXRDaXR5XG4gICAgICB2YXIgaW5kaXJpenpvID0gcmVxLmJvZHkuaW5wdXRBZGRyZXNzXG4gICAgICB2YXIgY29yc28gPSByZXEuYm9keS5pbnB1dENvdXJzZVxuICAgICAgdmFyIHBhc3N3b3JkID0gcmVxLmJvZHkuaW5wdXRQYXNzd29yZFxuICAgICAgdmFyIHBhc3N3b3JkQ29uZmlybSA9IHJlcS5ib2R5LmlucHV0Q29uZmlybVBhc3N3b3JkXG5cbiAgICAgIC8vIEZvcm0gdmFsaWRhdGlvblxuICAgICAgdmFyIGlzUmlnaHQgPSB0cnVlXG5cbiAgICAgIGlmICgobmFtZSA9PSBudWxsKSB8fCAobmFtZS5sZW5ndGggPD0gMSkgfHwgKCEvXltBLXphLXrDoC3DuV0rKCBbQS16YS16w6Atw7ldKykqICokLy50ZXN0KG5hbWUpKSkge1xuICAgICAgICByZXMuY29va2llKCdlcnJTdHVkZW50TmFtZScsICcxJylcbiAgICAgICAgaXNSaWdodCA9IGZhbHNlXG4gICAgICB9XG5cbiAgICAgIGlmICgoc3VybmFtZSA9PSBudWxsKSB8fCAoc3VybmFtZS5sZW5ndGggPD0gMSkgfHwgKCEvXltBLXphLXrDoC3DuV0rKCBbQS16YS16w6Atw7ldKykqICokLy50ZXN0KHN1cm5hbWUpKSkge1xuICAgICAgICByZXMuY29va2llKCdlcnJTdHVkZW50U3VybmFtZScsICcxJylcbiAgICAgICAgaXNSaWdodCA9IGZhbHNlXG4gICAgICB9XG5cbiAgICAgIGlmICgoZW1haWwgPT0gbnVsbCkgfHwgKGVtYWlsLmxlbmd0aCA8PSAyMSkgfHwgKCEvXlthLXpdXFwuW2Etel0rWzAtOV0qQHN0dWRlbnRpLnVuaXNhLml0Ly50ZXN0KGVtYWlsKSkpIHtcbiAgICAgICAgcmVzLmNvb2tpZSgnZXJyU3R1ZGVudEVtYWlsJywgJzEnKVxuICAgICAgICBpc1JpZ2h0ID0gZmFsc2VcbiAgICAgIH1cblxuICAgICAgaWYgKChtYXRyaWNvbGEgPT0gbnVsbCkgfHwgKG1hdHJpY29sYS5sZW5ndGggPD0gOSkgfHwgKCEvXlswLTldKyQvLnRlc3QobWF0cmljb2xhKSkpIHtcbiAgICAgICAgcmVzLmNvb2tpZSgnZXJyU3R1ZGVudE1hdHJpY29sYScsICcxJylcbiAgICAgICAgaXNSaWdodCA9IGZhbHNlXG4gICAgICB9XG5cbiAgICAgIGlmICgoY2l0dGEgPT0gbnVsbCkgfHwgKGNpdHRhLmxlbmd0aCA8PSAyKSB8fCAoIS9eW0EtWmEtelxcc10rJC8udGVzdChjaXR0YSkpKSB7XG4gICAgICAgIHJlcy5jb29raWUoJ2VyclN0dWRlbnRDaXR5JywgJzEnKVxuICAgICAgICBpc1JpZ2h0ID0gZmFsc2VcbiAgICAgIH1cblxuICAgICAgaWYgKChpbmRpcml6em8gPT0gbnVsbCkgfHwgKGluZGlyaXp6by5sZW5ndGggPD0gNikgfHwgKCEvXltBLVphLXowLTksXFxzXSskLy50ZXN0KGluZGlyaXp6bykpKSB7XG4gICAgICAgIHJlcy5jb29raWUoJ2VyclN0dWRlbnRBZGRyZXNzJywgJzEnKVxuICAgICAgICBpc1JpZ2h0ID0gZmFsc2VcbiAgICAgIH1cblxuICAgICAgaWYgKChjb3JzbyA9PSBudWxsKSB8fCAoY29yc28ubGVuZ3RoIDw9IDEpIHx8ICghL15bQS1aYS16XFxzXSskLy50ZXN0KGNvcnNvKSkpIHtcbiAgICAgICAgcmVzLmNvb2tpZSgnZXJyU3R1ZGVudENvcnNvJywgJzEnKVxuICAgICAgICBpc1JpZ2h0ID0gZmFsc2VcbiAgICAgIH1cblxuICAgICAgaWYgKChwYXNzd29yZCA9PSBudWxsKSB8fCAocGFzc3dvcmQubGVuZ3RoIDw9IDcpIHx8ICghL15bQS1aYS16MC05XSskLy50ZXN0KHBhc3N3b3JkKSkpIHtcbiAgICAgICAgcmVzLmNvb2tpZSgnZXJyUGFzc3dvcmQnLCAnMScpXG4gICAgICAgIGlzUmlnaHQgPSBmYWxzZVxuICAgICAgfVxuXG4gICAgICBpZiAocGFzc3dvcmRDb25maXJtICE9IHBhc3N3b3JkKSB7XG4gICAgICAgIHJlcy5jb29raWUoJ2VyclBhc3N3b3JkQ29uZmlybScsICcxJylcbiAgICAgICAgaXNSaWdodCA9IGZhbHNlXG4gICAgICB9XG5cbiAgICAgIGlmICghaXNSaWdodCkge1xuICAgICAgICByZXNvbHZlKGZhbHNlKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgLy8gaGFzaGluZyBlIHNhbHQgb2YgcGFzc3dvcmRcbiAgICAgIHZhciBwYXNzd29yZEhhc2hlZCA9IGhhc2guaGFzaFBhc3N3b3JkKHBhc3N3b3JkKVxuXG4gICAgICAvLyBDcmVhdGUgc3R1ZGVudCBvYmplY3RcblxuICAgICAgdmFyIHN0dWRlbnRlID0gbmV3IFN0dWRlbnRNb2RlbCgpXG4gICAgICBzdHVkZW50ZS5zZXRDaXR5KGNpdHRhKVxuICAgICAgc3R1ZGVudGUuc2V0RGVncmVlQ291cnNlKGNvcnNvKVxuICAgICAgc3R1ZGVudGUuc2V0RW1haWwoZW1haWwpXG4gICAgICBzdHVkZW50ZS5zZXROYW1lKG5hbWUpXG4gICAgICBzdHVkZW50ZS5zZXRTdXJuYW1lKHN1cm5hbWUpXG4gICAgICBzdHVkZW50ZS5zZXRBZGRyZXNzKGluZGlyaXp6bylcbiAgICAgIHN0dWRlbnRlLnNldFBhc3N3b3JkKHBhc3N3b3JkSGFzaGVkKVxuICAgICAgc3R1ZGVudGUuc2V0U3R1ZGVudElEKG1hdHJpY29sYSlcblxuICAgICAgLy8gQ2hlY2sgaWYgYWxyZWFkeSBleGlzdFxuICAgICAgdmFyIGNoZWNrTSA9IFN0dWRlbnRNb2RlbC5maW5kQnlNYXRyaWNvbGEobWF0cmljb2xhKVxuXG4gICAgICBjaGVja00udGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgcmVzLmNvb2tpZSgnZXJyQWxyZWFkeVJlZycsICcxJylcbiAgICAgICAgICByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICB2YXIgY2hlY2tFID0gU3R1ZGVudE1vZGVsLmZpbmRFeGlzdEJ5RW1haWwoZW1haWwpXG5cbiAgICAgICAgICBjaGVja0UudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICByZXMuY29va2llKCdlcnJBbHJlYWR5UmVnJywgJzEnKVxuICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgLy8gU2F2ZSBzdHVkZW50IGluIGRhdGFiYXNlXG4gICAgICAgICAgICAgIFN0dWRlbnRNb2RlbC5pbnNlcnRTdHVkZW50KHN0dWRlbnRlKVxuXG4gICAgICAgICAgICAgIC8vIHJlZGlyZWN0XG4gICAgICAgICAgICAgIHJlcy5jb29raWUoJ3JlZ0VmZicsICcxJylcbiAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmIChyZXEuYm9keS5yYWRpb0FjY291bnQgPT0gJ3R1dG9yQWNjYWRlbWljbycpIHtcbiAgICAgIC8vIEdldCBwYXJhbWV0ZXIgZnJvbSBmb3JtXG4gICAgICBuYW1lID0gcmVxLmJvZHkuaW5wdXROYW1lVFxuICAgICAgc3VybmFtZSA9IHJlcS5ib2R5LmlucHV0U3VybmFtZVRcbiAgICAgIGVtYWlsID0gcmVxLmJvZHkuaW5wdXRFbWFpbFRcbiAgICAgIHZhciBkZXBhcnRtZW50ID0gcmVxLmJvZHkuaW5wdXREZXBhcnRtZW50VFxuICAgICAgcGFzc3dvcmQgPSByZXEuYm9keS5pbnB1dFBhc3N3b3JkXG4gICAgICBwYXNzd29yZENvbmZpcm0gPSByZXEuYm9keS5pbnB1dENvbmZpcm1QYXNzd29yZFxuXG4gICAgICAvLyBGb3JtIHZhbGlkYXRpb25cbiAgICAgIGlzUmlnaHQgPSB0cnVlXG4gICAgICBpZiAoKG5hbWUgPT0gbnVsbCkgfHwgKG5hbWUubGVuZ3RoIDw9IDEpIHx8ICghL15bQS16YS16w6Atw7ldKyggW0EtemEtesOgLcO5XSspKiAqJC8udGVzdChuYW1lKSkpIHtcbiAgICAgICAgcmVzLmNvb2tpZSgnZXJyVHV0b3JOYW1lJywgJzEnKVxuICAgICAgICBpc1JpZ2h0ID0gZmFsc2VcbiAgICAgIH1cblxuICAgICAgaWYgKChzdXJuYW1lID09IG51bGwpIHx8IChzdXJuYW1lLmxlbmd0aCA8PSAxKSB8fCAoIS9eW0EtemEtesOgLcO5XSsoIFtBLXphLXrDoC3DuV0rKSogKiQvLnRlc3Qoc3VybmFtZSkpKSB7XG4gICAgICAgIHJlcy5jb29raWUoJ2VyclR1dG9yU3VybmFtZScsICcxJylcbiAgICAgICAgaXNSaWdodCA9IGZhbHNlXG4gICAgICB9XG5cbiAgICAgIGlmICgoZW1haWwgPT0gbnVsbCkgfHwgKGVtYWlsLmxlbmd0aCA8PSAxMikgfHwgKCEvXlthLXpdXFwuW2Etel0rWzAtOV0qQHVuaXNhLml0Ly50ZXN0KGVtYWlsKSkpIHtcbiAgICAgICAgcmVzLmNvb2tpZSgnZXJyVHV0b3JFbWFpbCcsICcxJylcbiAgICAgICAgaXNSaWdodCA9IGZhbHNlXG4gICAgICB9XG5cbiAgICAgIGlmICgoZGVwYXJ0bWVudCA9PSBudWxsKSB8fCAoZGVwYXJ0bWVudC5sZW5ndGggPD0gMSkgfHwgKCEvXltBLVphLXowLTlcXHNdKyQvLnRlc3QoZGVwYXJ0bWVudCkpKSB7XG4gICAgICAgIHJlcy5jb29raWUoJ2VyclR1dG9yRGVwYXJ0bWVudCcsICcxJylcbiAgICAgICAgaXNSaWdodCA9IGZhbHNlXG4gICAgICB9XG5cbiAgICAgIGlmICgocGFzc3dvcmQgPT0gbnVsbCkgfHwgKHBhc3N3b3JkLmxlbmd0aCA8PSA3KSB8fCAoIS9eW0EtWmEtejAtOV0rJC8udGVzdChwYXNzd29yZCkpKSB7XG4gICAgICAgIHJlcy5jb29raWUoJ2VyclBhc3N3b3JkJywgJzEnKVxuICAgICAgICBpc1JpZ2h0ID0gZmFsc2VcbiAgICAgIH1cblxuICAgICAgaWYgKHBhc3N3b3JkQ29uZmlybSAhPSBwYXNzd29yZCkge1xuICAgICAgICByZXMuY29va2llKCdlcnJQYXNzd29yZENvbmZpcm0nLCAnMScpXG4gICAgICAgIGlzUmlnaHQgPSBmYWxzZVxuICAgICAgfVxuXG4gICAgICBpZiAoIWlzUmlnaHQpIHtcbiAgICAgICAgcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIC8vIGhhc2hpbmcgZSBzYWx0IG9mIHBhc3N3b3JkXG4gICAgICBwYXNzd29yZEhhc2hlZCA9IGhhc2guaGFzaFBhc3N3b3JkKHBhc3N3b3JkKVxuXG4gICAgICAvLyBDcmVhdGUgYWNhZGVtaWMgdHV0b3Igb2JqZWN0XG4gICAgICB2YXIgdHV0b3JBY2NhZGVtaWNvID0gbmV3IEFjYWRlbWljVHV0b3JNb2RlbCgpXG4gICAgICB0dXRvckFjY2FkZW1pY28uc2V0U3VybmFtZShzdXJuYW1lKVxuICAgICAgdHV0b3JBY2NhZGVtaWNvLnNldE5hbWUobmFtZSlcbiAgICAgIHR1dG9yQWNjYWRlbWljby5zZXREZXBhcnRtZW50KGRlcGFydG1lbnQpXG4gICAgICB0dXRvckFjY2FkZW1pY28uc2V0RW1haWwoZW1haWwpXG4gICAgICB0dXRvckFjY2FkZW1pY28uc2V0UGFzc3dvcmQocGFzc3dvcmRIYXNoZWQpXG5cbiAgICAgIC8vIGNoZWNrIGlmIGV4aXN0XG4gICAgICB2YXIgY2hlY2sgPSBBY2FkZW1pY1R1dG9yTW9kZWwuZmluZEJ5RW1haWwoZW1haWwpXG4gICAgICBjaGVjay50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICByZXMuY29va2llKCdlcnJBbHJlYWR5UmVnJywgJzEnKVxuICAgICAgICAgIHJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgIC8vIFNhdmUgYWNhZGVtaWMgdHV0b3IgaW4gZGF0YWJhc2VcbiAgICAgICAgICBBY2FkZW1pY1R1dG9yTW9kZWwuaW5zZXJ0QWNhZGVtaWNUdXRvcih0dXRvckFjY2FkZW1pY28pXG5cbiAgICAgICAgICAvLyByZWRpcmVjdFxuICAgICAgICAgIHJlcy5jb29raWUoJ3JlZ0VmZicsICcxJylcbiAgICAgICAgICByZXNvbHZlKHRydWUpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9KVxufVxuIl19