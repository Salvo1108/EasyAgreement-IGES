function cov_2q1b7ebc4b(){var path="/Users/salvatore/Desktop/EasyAgreement-IGES/app/controllers/tutorControl.js";var hash="b8c46373e60ccfc9aed5cbcdc0afadcdf01cd96c";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/salvatore/Desktop/EasyAgreement-IGES/app/controllers/tutorControl.js",statementMap:{"0":{start:{line:1,column:11},end:{line:1,column:31}},"1":{start:{line:2,column:25},end:{line:2,column:62}},"2":{start:{line:3,column:24},end:{line:3,column:64}},"3":{start:{line:11,column:0},end:{line:88,column:1}},"4":{start:{line:12,column:2},end:{line:87,column:4}},"5":{start:{line:13,column:22},end:{line:13,column:47}},"6":{start:{line:14,column:18},end:{line:14,column:39}},"7":{start:{line:15,column:18},end:{line:15,column:39}},"8":{start:{line:16,column:18},end:{line:16,column:36}},"9":{start:{line:17,column:18},end:{line:17,column:39}},"10":{start:{line:18,column:18},end:{line:18,column:40}},"11":{start:{line:19,column:15},end:{line:19,column:34}},"12":{start:{line:21,column:18},end:{line:21,column:22}},"13":{start:{line:23,column:4},end:{line:26,column:5}},"14":{start:{line:24,column:6},end:{line:24,column:39}},"15":{start:{line:25,column:6},end:{line:25,column:21}},"16":{start:{line:28,column:4},end:{line:31,column:5}},"17":{start:{line:29,column:6},end:{line:29,column:37}},"18":{start:{line:30,column:6},end:{line:30,column:21}},"19":{start:{line:33,column:4},end:{line:36,column:5}},"20":{start:{line:34,column:6},end:{line:34,column:35}},"21":{start:{line:35,column:6},end:{line:35,column:21}},"22":{start:{line:38,column:4},end:{line:41,column:5}},"23":{start:{line:39,column:6},end:{line:39,column:36}},"24":{start:{line:40,column:6},end:{line:40,column:21}},"25":{start:{line:43,column:4},end:{line:46,column:5}},"26":{start:{line:44,column:6},end:{line:44,column:36}},"27":{start:{line:45,column:6},end:{line:45,column:21}},"28":{start:{line:48,column:4},end:{line:51,column:5}},"29":{start:{line:49,column:6},end:{line:49,column:39}},"30":{start:{line:50,column:6},end:{line:50,column:21}},"31":{start:{line:53,column:4},end:{line:56,column:5}},"32":{start:{line:54,column:6},end:{line:54,column:32}},"33":{start:{line:55,column:6},end:{line:55,column:21}},"34":{start:{line:58,column:4},end:{line:61,column:5}},"35":{start:{line:59,column:6},end:{line:59,column:20}},"36":{start:{line:60,column:6},end:{line:60,column:12}},"37":{start:{line:64,column:32},end:{line:64,column:55}},"38":{start:{line:65,column:4},end:{line:65,column:46}},"39":{start:{line:66,column:4},end:{line:66,column:39}},"40":{start:{line:67,column:4},end:{line:67,column:45}},"41":{start:{line:68,column:4},end:{line:68,column:45}},"42":{start:{line:69,column:4},end:{line:69,column:45}},"43":{start:{line:70,column:4},end:{line:70,column:45}},"44":{start:{line:71,column:4},end:{line:71,column:53}},"45":{start:{line:73,column:17},end:{line:73,column:59}},"46":{start:{line:75,column:4},end:{line:86,column:6}},"47":{start:{line:76,column:6},end:{line:80,column:7}},"48":{start:{line:77,column:8},end:{line:77,column:41}},"49":{start:{line:78,column:8},end:{line:78,column:22}},"50":{start:{line:79,column:8},end:{line:79,column:14}},"51":{start:{line:81,column:6},end:{line:85,column:7}},"52":{start:{line:83,column:8},end:{line:83,column:59}},"53":{start:{line:84,column:8},end:{line:84,column:21}},"54":{start:{line:96,column:0},end:{line:170,column:1}},"55":{start:{line:97,column:2},end:{line:169,column:4}},"56":{start:{line:98,column:15},end:{line:98,column:35}},"57":{start:{line:99,column:18},end:{line:99,column:41}},"58":{start:{line:100,column:16},end:{line:100,column:37}},"59":{start:{line:101,column:19},end:{line:101,column:41}},"60":{start:{line:102,column:21},end:{line:102,column:45}},"61":{start:{line:103,column:23},end:{line:103,column:51}},"62":{start:{line:105,column:18},end:{line:105,column:22}},"63":{start:{line:106,column:4},end:{line:108,column:5}},"64":{start:{line:107,column:6},end:{line:107,column:21}},"65":{start:{line:110,column:4},end:{line:110,column:18}},"66":{start:{line:111,column:4},end:{line:114,column:5}},"67":{start:{line:112,column:6},end:{line:112,column:39}},"68":{start:{line:113,column:6},end:{line:113,column:21}},"69":{start:{line:116,column:4},end:{line:119,column:5}},"70":{start:{line:117,column:6},end:{line:117,column:42}},"71":{start:{line:118,column:6},end:{line:118,column:21}},"72":{start:{line:121,column:4},end:{line:124,column:5}},"73":{start:{line:122,column:6},end:{line:122,column:40}},"74":{start:{line:123,column:6},end:{line:123,column:21}},"75":{start:{line:126,column:4},end:{line:129,column:5}},"76":{start:{line:127,column:6},end:{line:127,column:46}},"77":{start:{line:128,column:6},end:{line:128,column:21}},"78":{start:{line:131,column:4},end:{line:134,column:5}},"79":{start:{line:132,column:6},end:{line:132,column:36}},"80":{start:{line:133,column:6},end:{line:133,column:21}},"81":{start:{line:136,column:4},end:{line:139,column:5}},"82":{start:{line:137,column:6},end:{line:137,column:43}},"83":{start:{line:138,column:6},end:{line:138,column:21}},"84":{start:{line:141,column:4},end:{line:144,column:5}},"85":{start:{line:142,column:6},end:{line:142,column:20}},"86":{start:{line:143,column:6},end:{line:143,column:12}},"87":{start:{line:147,column:25},end:{line:147,column:52}},"88":{start:{line:150,column:23},end:{line:150,column:47}},"89":{start:{line:151,column:4},end:{line:151,column:36}},"90":{start:{line:152,column:4},end:{line:152,column:30}},"91":{start:{line:153,column:4},end:{line:153,column:46}},"92":{start:{line:154,column:4},end:{line:154,column:32}},"93":{start:{line:155,column:4},end:{line:155,column:44}},"94":{start:{line:157,column:17},end:{line:157,column:55}},"95":{start:{line:158,column:4},end:{line:168,column:6}},"96":{start:{line:159,column:6},end:{line:162,column:7}},"97":{start:{line:160,column:8},end:{line:160,column:22}},"98":{start:{line:161,column:8},end:{line:161,column:14}},"99":{start:{line:163,column:6},end:{line:167,column:7}},"100":{start:{line:165,column:8},end:{line:165,column:52}},"101":{start:{line:166,column:8},end:{line:166,column:21}},"102":{start:{line:178,column:0},end:{line:189,column:1}},"103":{start:{line:179,column:2},end:{line:188,column:4}},"104":{start:{line:180,column:18},end:{line:180,column:62}},"105":{start:{line:181,column:4},end:{line:187,column:6}},"106":{start:{line:182,column:6},end:{line:186,column:7}},"107":{start:{line:183,column:8},end:{line:183,column:22}},"108":{start:{line:185,column:8},end:{line:185,column:21}},"109":{start:{line:197,column:0},end:{line:208,column:1}},"110":{start:{line:198,column:2},end:{line:207,column:4}},"111":{start:{line:199,column:21},end:{line:199,column:60}},"112":{start:{line:200,column:4},end:{line:206,column:6}},"113":{start:{line:201,column:6},end:{line:205,column:7}},"114":{start:{line:202,column:8},end:{line:202,column:22}},"115":{start:{line:204,column:8},end:{line:204,column:21}},"116":{start:{line:215,column:0},end:{line:222,column:1}},"117":{start:{line:216,column:2},end:{line:221,column:4}},"118":{start:{line:217,column:14},end:{line:217,column:47}},"119":{start:{line:218,column:4},end:{line:220,column:6}},"120":{start:{line:219,column:6},end:{line:219,column:228}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:11,column:21},end:{line:11,column:22}},loc:{start:{line:11,column:41},end:{line:88,column:1}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:21},end:{line:12,column:22}},loc:{start:{line:12,column:48},end:{line:87,column:3}},line:12},"2":{name:"(anonymous_2)",decl:{start:{line:75,column:16},end:{line:75,column:17}},loc:{start:{line:75,column:34},end:{line:86,column:5}},line:75},"3":{name:"(anonymous_3)",decl:{start:{line:96,column:22},end:{line:96,column:23}},loc:{start:{line:96,column:42},end:{line:170,column:1}},line:96},"4":{name:"(anonymous_4)",decl:{start:{line:97,column:21},end:{line:97,column:22}},loc:{start:{line:97,column:48},end:{line:169,column:3}},line:97},"5":{name:"(anonymous_5)",decl:{start:{line:158,column:16},end:{line:158,column:17}},loc:{start:{line:158,column:34},end:{line:168,column:5}},line:158},"6":{name:"(anonymous_6)",decl:{start:{line:178,column:24},end:{line:178,column:25}},loc:{start:{line:178,column:52},end:{line:189,column:1}},line:178},"7":{name:"(anonymous_7)",decl:{start:{line:179,column:21},end:{line:179,column:22}},loc:{start:{line:179,column:48},end:{line:188,column:3}},line:179},"8":{name:"(anonymous_8)",decl:{start:{line:181,column:17},end:{line:181,column:18}},loc:{start:{line:181,column:35},end:{line:187,column:5}},line:181},"9":{name:"(anonymous_9)",decl:{start:{line:197,column:24},end:{line:197,column:25}},loc:{start:{line:197,column:46},end:{line:208,column:1}},line:197},"10":{name:"(anonymous_10)",decl:{start:{line:198,column:21},end:{line:198,column:22}},loc:{start:{line:198,column:48},end:{line:207,column:3}},line:198},"11":{name:"(anonymous_11)",decl:{start:{line:200,column:20},end:{line:200,column:21}},loc:{start:{line:200,column:38},end:{line:206,column:5}},line:200},"12":{name:"(anonymous_12)",decl:{start:{line:215,column:30},end:{line:215,column:31}},loc:{start:{line:215,column:44},end:{line:222,column:1}},line:215},"13":{name:"(anonymous_13)",decl:{start:{line:216,column:21},end:{line:216,column:22}},loc:{start:{line:216,column:48},end:{line:221,column:3}},line:216},"14":{name:"(anonymous_14)",decl:{start:{line:218,column:13},end:{line:218,column:14}},loc:{start:{line:218,column:31},end:{line:220,column:5}},line:218}},branchMap:{"0":{loc:{start:{line:23,column:4},end:{line:26,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:26,column:5}},{start:{line:23,column:4},end:{line:26,column:5}}],line:23},"1":{loc:{start:{line:23,column:8},end:{line:23,column:99}},type:"binary-expr",locations:[{start:{line:23,column:9},end:{line:23,column:28}},{start:{line:23,column:34},end:{line:23,column:57}},{start:{line:23,column:63},end:{line:23,column:98}}],line:23},"2":{loc:{start:{line:28,column:4},end:{line:31,column:5}},type:"if",locations:[{start:{line:28,column:4},end:{line:31,column:5}},{start:{line:28,column:4},end:{line:31,column:5}}],line:28},"3":{loc:{start:{line:28,column:8},end:{line:28,column:75}},type:"binary-expr",locations:[{start:{line:28,column:9},end:{line:28,column:21}},{start:{line:28,column:27},end:{line:28,column:43}},{start:{line:28,column:49},end:{line:28,column:74}}],line:28},"4":{loc:{start:{line:33,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:36,column:5}},{start:{line:33,column:4},end:{line:36,column:5}}],line:33},"5":{loc:{start:{line:33,column:8},end:{line:33,column:84}},type:"binary-expr",locations:[{start:{line:33,column:9},end:{line:33,column:24}},{start:{line:33,column:30},end:{line:33,column:49}},{start:{line:33,column:55},end:{line:33,column:83}}],line:33},"6":{loc:{start:{line:38,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:38,column:4},end:{line:41,column:5}},{start:{line:38,column:4},end:{line:41,column:5}}],line:38},"7":{loc:{start:{line:38,column:8},end:{line:38,column:90}},type:"binary-expr",locations:[{start:{line:38,column:9},end:{line:38,column:24}},{start:{line:38,column:30},end:{line:38,column:49}},{start:{line:38,column:55},end:{line:38,column:89}}],line:38},"8":{loc:{start:{line:43,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:43,column:4},end:{line:46,column:5}},{start:{line:43,column:4},end:{line:46,column:5}}],line:43},"9":{loc:{start:{line:43,column:8},end:{line:43,column:224}},type:"binary-expr",locations:[{start:{line:43,column:9},end:{line:43,column:24}},{start:{line:43,column:30},end:{line:43,column:49}},{start:{line:43,column:55},end:{line:43,column:223}}],line:43},"10":{loc:{start:{line:48,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:51,column:5}},{start:{line:48,column:4},end:{line:51,column:5}}],line:48},"11":{loc:{start:{line:48,column:8},end:{line:48,column:89}},type:"binary-expr",locations:[{start:{line:48,column:9},end:{line:48,column:24}},{start:{line:48,column:30},end:{line:48,column:49}},{start:{line:48,column:55},end:{line:48,column:88}}],line:48},"12":{loc:{start:{line:53,column:4},end:{line:56,column:5}},type:"if",locations:[{start:{line:53,column:4},end:{line:56,column:5}},{start:{line:53,column:4},end:{line:56,column:5}}],line:53},"13":{loc:{start:{line:53,column:8},end:{line:53,column:76}},type:"binary-expr",locations:[{start:{line:53,column:9},end:{line:53,column:24}},{start:{line:53,column:30},end:{line:53,column:42}},{start:{line:53,column:48},end:{line:53,column:75}}],line:53},"14":{loc:{start:{line:58,column:4},end:{line:61,column:5}},type:"if",locations:[{start:{line:58,column:4},end:{line:61,column:5}},{start:{line:58,column:4},end:{line:61,column:5}}],line:58},"15":{loc:{start:{line:76,column:6},end:{line:80,column:7}},type:"if",locations:[{start:{line:76,column:6},end:{line:80,column:7}},{start:{line:76,column:6},end:{line:80,column:7}}],line:76},"16":{loc:{start:{line:81,column:6},end:{line:85,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:85,column:7}},{start:{line:81,column:6},end:{line:85,column:7}}],line:81},"17":{loc:{start:{line:106,column:4},end:{line:108,column:5}},type:"if",locations:[{start:{line:106,column:4},end:{line:108,column:5}},{start:{line:106,column:4},end:{line:108,column:5}}],line:106},"18":{loc:{start:{line:111,column:4},end:{line:114,column:5}},type:"if",locations:[{start:{line:111,column:4},end:{line:114,column:5}},{start:{line:111,column:4},end:{line:114,column:5}}],line:111},"19":{loc:{start:{line:111,column:8},end:{line:111,column:75}},type:"binary-expr",locations:[{start:{line:111,column:9},end:{line:111,column:21}},{start:{line:111,column:27},end:{line:111,column:43}},{start:{line:111,column:49},end:{line:111,column:74}}],line:111},"20":{loc:{start:{line:116,column:4},end:{line:119,column:5}},type:"if",locations:[{start:{line:116,column:4},end:{line:119,column:5}},{start:{line:116,column:4},end:{line:119,column:5}}],line:116},"21":{loc:{start:{line:116,column:8},end:{line:116,column:84}},type:"binary-expr",locations:[{start:{line:116,column:9},end:{line:116,column:24}},{start:{line:116,column:30},end:{line:116,column:49}},{start:{line:116,column:55},end:{line:116,column:83}}],line:116},"22":{loc:{start:{line:121,column:4},end:{line:124,column:5}},type:"if",locations:[{start:{line:121,column:4},end:{line:124,column:5}},{start:{line:121,column:4},end:{line:124,column:5}}],line:121},"23":{loc:{start:{line:121,column:8},end:{line:121,column:202}},type:"binary-expr",locations:[{start:{line:121,column:9},end:{line:121,column:22}},{start:{line:121,column:28},end:{line:121,column:45}},{start:{line:121,column:51},end:{line:121,column:201}}],line:121},"24":{loc:{start:{line:126,column:4},end:{line:129,column:5}},type:"if",locations:[{start:{line:126,column:4},end:{line:129,column:5}},{start:{line:126,column:4},end:{line:129,column:5}}],line:126},"25":{loc:{start:{line:126,column:8},end:{line:126,column:104}},type:"binary-expr",locations:[{start:{line:126,column:9},end:{line:126,column:29}},{start:{line:126,column:35},end:{line:126,column:59}},{start:{line:126,column:65},end:{line:126,column:103}}],line:126},"26":{loc:{start:{line:131,column:4},end:{line:134,column:5}},type:"if",locations:[{start:{line:131,column:4},end:{line:134,column:5}},{start:{line:131,column:4},end:{line:134,column:5}}],line:131},"27":{loc:{start:{line:131,column:8},end:{line:131,column:90}},type:"binary-expr",locations:[{start:{line:131,column:9},end:{line:131,column:25}},{start:{line:131,column:31},end:{line:131,column:51}},{start:{line:131,column:57},end:{line:131,column:89}}],line:131},"28":{loc:{start:{line:136,column:4},end:{line:139,column:5}},type:"if",locations:[{start:{line:136,column:4},end:{line:139,column:5}},{start:{line:136,column:4},end:{line:139,column:5}}],line:136},"29":{loc:{start:{line:141,column:4},end:{line:144,column:5}},type:"if",locations:[{start:{line:141,column:4},end:{line:144,column:5}},{start:{line:141,column:4},end:{line:144,column:5}}],line:141},"30":{loc:{start:{line:159,column:6},end:{line:162,column:7}},type:"if",locations:[{start:{line:159,column:6},end:{line:162,column:7}},{start:{line:159,column:6},end:{line:162,column:7}}],line:159},"31":{loc:{start:{line:163,column:6},end:{line:167,column:7}},type:"if",locations:[{start:{line:163,column:6},end:{line:167,column:7}},{start:{line:163,column:6},end:{line:167,column:7}}],line:163},"32":{loc:{start:{line:182,column:6},end:{line:186,column:7}},type:"if",locations:[{start:{line:182,column:6},end:{line:186,column:7}},{start:{line:182,column:6},end:{line:186,column:7}}],line:182},"33":{loc:{start:{line:201,column:6},end:{line:205,column:7}},type:"if",locations:[{start:{line:201,column:6},end:{line:205,column:7}},{start:{line:201,column:6},end:{line:205,column:7}}],line:201}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},b:{"0":[0,0],"1":[0,0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0,0],"6":[0,0],"7":[0,0,0],"8":[0,0],"9":[0,0,0],"10":[0,0],"11":[0,0,0],"12":[0,0],"13":[0,0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0,0],"20":[0,0],"21":[0,0,0],"22":[0,0],"23":[0,0,0],"24":[0,0],"25":[0,0,0],"26":[0,0],"27":[0,0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b8c46373e60ccfc9aed5cbcdc0afadcdf01cd96c"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2q1b7ebc4b=function(){return actualCoverage;};}return actualCoverage;}cov_2q1b7ebc4b();var hash=(cov_2q1b7ebc4b().s[0]++,require('./hash.js'));var ExternalTutorModel=(cov_2q1b7ebc4b().s[1]++,require('../models/externaltutor.js'));var OrganizationModel=(cov_2q1b7ebc4b().s[2]++,require('../models/hostorganization.js'));/**
 * This method inserts an host organization
 * @param {Object} req - The HTTP req
 * @param {Object} res - The HTTP res
 * @returns {Boolean}  - This method returns true if the insert of host organization was successfull, else false
 */cov_2q1b7ebc4b().s[3]++;exports.addHostOrg=function(req,res){cov_2q1b7ebc4b().f[0]++;cov_2q1b7ebc4b().s[4]++;return new Promise(function(resolve,reject){cov_2q1b7ebc4b().f[1]++;var erasmusCode=(cov_2q1b7ebc4b().s[5]++,req.body.inputErasmusCode);var faculty=(cov_2q1b7ebc4b().s[6]++,req.body.inputFacolta);var address=(cov_2q1b7ebc4b().s[7]++,req.body.inputAddress);var orgSize=(cov_2q1b7ebc4b().s[8]++,req.body.inputSize);var country=(cov_2q1b7ebc4b().s[9]++,req.body.inputCountry);var contact=(cov_2q1b7ebc4b().s[10]++,req.body.inputContacts);var name=(cov_2q1b7ebc4b().s[11]++,req.body.inputNameT);var isRight=(cov_2q1b7ebc4b().s[12]++,true);cov_2q1b7ebc4b().s[13]++;if((cov_2q1b7ebc4b().b[1][0]++,erasmusCode==null)||(cov_2q1b7ebc4b().b[1][1]++,erasmusCode.length<=3)||(cov_2q1b7ebc4b().b[1][2]++,!/^[A-Za-z0-9]+$/.test(erasmusCode))){cov_2q1b7ebc4b().b[0][0]++;cov_2q1b7ebc4b().s[14]++;res.cookie('errErasmusCode','1');cov_2q1b7ebc4b().s[15]++;isRight=false;}else{cov_2q1b7ebc4b().b[0][1]++;}cov_2q1b7ebc4b().s[16]++;if((cov_2q1b7ebc4b().b[3][0]++,name==null)||(cov_2q1b7ebc4b().b[3][1]++,name.length<=1)||(cov_2q1b7ebc4b().b[3][2]++,!/^[A-Za-z]+$/.test(name))){cov_2q1b7ebc4b().b[2][0]++;cov_2q1b7ebc4b().s[17]++;res.cookie('errTutorName','1');cov_2q1b7ebc4b().s[18]++;isRight=false;}else{cov_2q1b7ebc4b().b[2][1]++;}cov_2q1b7ebc4b().s[19]++;if((cov_2q1b7ebc4b().b[5][0]++,faculty==null)||(cov_2q1b7ebc4b().b[5][1]++,faculty.length<=1)||(cov_2q1b7ebc4b().b[5][2]++,!/^[A-Za-z]+$/.test(faculty))){cov_2q1b7ebc4b().b[4][0]++;cov_2q1b7ebc4b().s[20]++;res.cookie('errFacolta','1');cov_2q1b7ebc4b().s[21]++;isRight=false;}else{cov_2q1b7ebc4b().b[4][1]++;}cov_2q1b7ebc4b().s[22]++;if((cov_2q1b7ebc4b().b[7][0]++,address==null)||(cov_2q1b7ebc4b().b[7][1]++,address.length<=6)||(cov_2q1b7ebc4b().b[7][2]++,!/^[A-Za-z0-9,\s]+$/.test(address))){cov_2q1b7ebc4b().b[6][0]++;cov_2q1b7ebc4b().s[23]++;res.cookie('errHAddress','1');cov_2q1b7ebc4b().s[24]++;isRight=false;}else{cov_2q1b7ebc4b().b[6][1]++;}cov_2q1b7ebc4b().s[25]++;if((cov_2q1b7ebc4b().b[9][0]++,contact==null)||(cov_2q1b7ebc4b().b[9][1]++,contact.length<=7)||(cov_2q1b7ebc4b().b[9][2]++,!/(^[0-9]{9,10}$|[a-z0-9!#$%&'*+=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9]){1,}?)/.test(contact))){cov_2q1b7ebc4b().b[8][0]++;cov_2q1b7ebc4b().s[26]++;res.cookie('errContatti','1');cov_2q1b7ebc4b().s[27]++;isRight=false;}else{cov_2q1b7ebc4b().b[8][1]++;}cov_2q1b7ebc4b().s[28]++;if((cov_2q1b7ebc4b().b[11][0]++,country==null)||(cov_2q1b7ebc4b().b[11][1]++,country.length<=1)||(cov_2q1b7ebc4b().b[11][2]++,!/^[A-Za-z0-9\s]+$/.test(country))){cov_2q1b7ebc4b().b[10][0]++;cov_2q1b7ebc4b().s[29]++;res.cookie('errCountryName','1');cov_2q1b7ebc4b().s[30]++;isRight=false;}else{cov_2q1b7ebc4b().b[10][1]++;}cov_2q1b7ebc4b().s[31]++;if((cov_2q1b7ebc4b().b[13][0]++,orgSize==null)||(cov_2q1b7ebc4b().b[13][1]++,orgSize==0)||(cov_2q1b7ebc4b().b[13][2]++,!/^[0-9\s]+$/.test(orgSize))){cov_2q1b7ebc4b().b[12][0]++;cov_2q1b7ebc4b().s[32]++;res.cookie('errSize','1');cov_2q1b7ebc4b().s[33]++;isRight=false;}else{cov_2q1b7ebc4b().b[12][1]++;}cov_2q1b7ebc4b().s[34]++;if(!isRight){cov_2q1b7ebc4b().b[14][0]++;cov_2q1b7ebc4b().s[35]++;resolve(false);cov_2q1b7ebc4b().s[36]++;return;}else{cov_2q1b7ebc4b().b[14][1]++;}// Create host organization object
var organizzazioneEsterna=(cov_2q1b7ebc4b().s[37]++,new OrganizationModel());cov_2q1b7ebc4b().s[38]++;organizzazioneEsterna.setContacts(contact);cov_2q1b7ebc4b().s[39]++;organizzazioneEsterna.setName(name);cov_2q1b7ebc4b().s[40]++;organizzazioneEsterna.setCountry(country);cov_2q1b7ebc4b().s[41]++;organizzazioneEsterna.setOrgSize(orgSize);cov_2q1b7ebc4b().s[42]++;organizzazioneEsterna.setAddress(address);cov_2q1b7ebc4b().s[43]++;organizzazioneEsterna.setFaculty(faculty);cov_2q1b7ebc4b().s[44]++;organizzazioneEsterna.setErasmusCode(erasmusCode);var checkE=(cov_2q1b7ebc4b().s[45]++,OrganizationModel.findByEcode(erasmusCode));cov_2q1b7ebc4b().s[46]++;checkE.then(function(result){cov_2q1b7ebc4b().f[2]++;cov_2q1b7ebc4b().s[47]++;if(!result){cov_2q1b7ebc4b().b[15][0]++;cov_2q1b7ebc4b().s[48]++;res.cookie('errAlreadyRegH','1');cov_2q1b7ebc4b().s[49]++;resolve(false);cov_2q1b7ebc4b().s[50]++;return;}else{cov_2q1b7ebc4b().b[15][1]++;}cov_2q1b7ebc4b().s[51]++;if(result){cov_2q1b7ebc4b().b[16][0]++;cov_2q1b7ebc4b().s[52]++;// Save student in database
OrganizationModel.addHostOrg(organizzazioneEsterna);cov_2q1b7ebc4b().s[53]++;resolve(true);}else{cov_2q1b7ebc4b().b[16][1]++;}});});};/**
 * This method inserts an external tutor
 * @param {Object} req - The HTTP req
 * @param {Object} res - The HTTP res
 * @returns {Boolean}  - This method returns true if the insert of external tutor was successfull, else false
 */cov_2q1b7ebc4b().s[54]++;exports.addExtTutor=function(req,res){cov_2q1b7ebc4b().f[3]++;cov_2q1b7ebc4b().s[55]++;return new Promise(function(resolve,reject){cov_2q1b7ebc4b().f[4]++;var name=(cov_2q1b7ebc4b().s[56]++,req.body.inputNameEx);var surname=(cov_2q1b7ebc4b().s[57]++,req.body.inputSurnameEx);var email=(cov_2q1b7ebc4b().s[58]++,req.body.inputEmailEx);var password=(cov_2q1b7ebc4b().s[59]++,req.body.inputPassword);var repassword=(cov_2q1b7ebc4b().s[60]++,req.body.inputRePassword);var organization=(cov_2q1b7ebc4b().s[61]++,req.body.inputOrganizationEx);var isRight=(cov_2q1b7ebc4b().s[62]++,true);cov_2q1b7ebc4b().s[63]++;if(password!=repassword){cov_2q1b7ebc4b().b[17][0]++;cov_2q1b7ebc4b().s[64]++;isRight=false;}else{cov_2q1b7ebc4b().b[17][1]++;}cov_2q1b7ebc4b().s[65]++;isRight=true;cov_2q1b7ebc4b().s[66]++;if((cov_2q1b7ebc4b().b[19][0]++,name==null)||(cov_2q1b7ebc4b().b[19][1]++,name.length<=1)||(cov_2q1b7ebc4b().b[19][2]++,!/^[A-Za-z]+$/.test(name))){cov_2q1b7ebc4b().b[18][0]++;cov_2q1b7ebc4b().s[67]++;res.cookie('errExTutorName','1');cov_2q1b7ebc4b().s[68]++;isRight=false;}else{cov_2q1b7ebc4b().b[18][1]++;}cov_2q1b7ebc4b().s[69]++;if((cov_2q1b7ebc4b().b[21][0]++,surname==null)||(cov_2q1b7ebc4b().b[21][1]++,surname.length<=1)||(cov_2q1b7ebc4b().b[21][2]++,!/^[A-Za-z]+$/.test(surname))){cov_2q1b7ebc4b().b[20][0]++;cov_2q1b7ebc4b().s[70]++;res.cookie('errExTutorSurname','1');cov_2q1b7ebc4b().s[71]++;isRight=false;}else{cov_2q1b7ebc4b().b[20][1]++;}cov_2q1b7ebc4b().s[72]++;if((cov_2q1b7ebc4b().b[23][0]++,email==null)||(cov_2q1b7ebc4b().b[23][1]++,email.length<=6)||(cov_2q1b7ebc4b().b[23][2]++,!/[a-z0-9!#$%&'*+=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9]){1,}?/.test(email))){cov_2q1b7ebc4b().b[22][0]++;cov_2q1b7ebc4b().s[73]++;res.cookie('errExTutorEmail','1');cov_2q1b7ebc4b().s[74]++;isRight=false;}else{cov_2q1b7ebc4b().b[22][1]++;}cov_2q1b7ebc4b().s[75]++;if((cov_2q1b7ebc4b().b[25][0]++,organization==null)||(cov_2q1b7ebc4b().b[25][1]++,organization.length<=1)||(cov_2q1b7ebc4b().b[25][2]++,!/^[A-Za-z0-9\s]+$/.test(organization))){cov_2q1b7ebc4b().b[24][0]++;cov_2q1b7ebc4b().s[76]++;res.cookie('errExOrganizationName','1');cov_2q1b7ebc4b().s[77]++;isRight=false;}else{cov_2q1b7ebc4b().b[24][1]++;}cov_2q1b7ebc4b().s[78]++;if((cov_2q1b7ebc4b().b[27][0]++,password==null)||(cov_2q1b7ebc4b().b[27][1]++,password.length<=7)||(cov_2q1b7ebc4b().b[27][2]++,!/^[A-Za-z0-9]+$/.test(password))){cov_2q1b7ebc4b().b[26][0]++;cov_2q1b7ebc4b().s[79]++;res.cookie('errPassword','1');cov_2q1b7ebc4b().s[80]++;isRight=false;}else{cov_2q1b7ebc4b().b[26][1]++;}cov_2q1b7ebc4b().s[81]++;if(repassword!=password){cov_2q1b7ebc4b().b[28][0]++;cov_2q1b7ebc4b().s[82]++;res.cookie('errPasswordConfirm','1');cov_2q1b7ebc4b().s[83]++;isRight=false;}else{cov_2q1b7ebc4b().b[28][1]++;}cov_2q1b7ebc4b().s[84]++;if(!isRight){cov_2q1b7ebc4b().b[29][0]++;cov_2q1b7ebc4b().s[85]++;resolve(false);cov_2q1b7ebc4b().s[86]++;return;}else{cov_2q1b7ebc4b().b[29][1]++;}// hashing e salt of password
var passwordHashed=(cov_2q1b7ebc4b().s[87]++,hash.hashPassword(password));// Create external tutor object
var tutorEsterno=(cov_2q1b7ebc4b().s[88]++,new ExternalTutorModel());cov_2q1b7ebc4b().s[89]++;tutorEsterno.setSurname(surname);cov_2q1b7ebc4b().s[90]++;tutorEsterno.setName(name);cov_2q1b7ebc4b().s[91]++;tutorEsterno.setOrganization(organization);cov_2q1b7ebc4b().s[92]++;tutorEsterno.setEmail(email);cov_2q1b7ebc4b().s[93]++;tutorEsterno.setPassword(passwordHashed);var checkE=(cov_2q1b7ebc4b().s[94]++,ExternalTutorModel.findByEmailA(email));cov_2q1b7ebc4b().s[95]++;checkE.then(function(result){cov_2q1b7ebc4b().f[5]++;cov_2q1b7ebc4b().s[96]++;if(!result){cov_2q1b7ebc4b().b[30][0]++;cov_2q1b7ebc4b().s[97]++;resolve(false);cov_2q1b7ebc4b().s[98]++;return;}else{cov_2q1b7ebc4b().b[30][1]++;}cov_2q1b7ebc4b().s[99]++;if(result){cov_2q1b7ebc4b().b[31][0]++;cov_2q1b7ebc4b().s[100]++;// Save tutor in database
ExternalTutorModel.addExtTutor(tutorEsterno);cov_2q1b7ebc4b().s[101]++;resolve(true);}else{cov_2q1b7ebc4b().b[31][1]++;}});});};/**
 * This method deletes an host organization
 * @param {String} erasmusCode - The erasmus code of the host organization to delete
 * @param {Object} res - The HTTP res
 * @returns {Boolean}  - This method returns true if the delete of host organization was successfull, else false
 */cov_2q1b7ebc4b().s[102]++;exports.deleteHostOrg=function(erasmuscode,res){cov_2q1b7ebc4b().f[6]++;cov_2q1b7ebc4b().s[103]++;return new Promise(function(resolve,reject){cov_2q1b7ebc4b().f[7]++;var delHost=(cov_2q1b7ebc4b().s[104]++,OrganizationModel.deleteHostOrg(erasmuscode));cov_2q1b7ebc4b().s[105]++;delHost.then(function(result){cov_2q1b7ebc4b().f[8]++;cov_2q1b7ebc4b().s[106]++;if(!result){cov_2q1b7ebc4b().b[32][0]++;cov_2q1b7ebc4b().s[107]++;resolve(false);}else{cov_2q1b7ebc4b().b[32][1]++;cov_2q1b7ebc4b().s[108]++;resolve(true);}});});};/**
 * This method deletes an external tutor
 * @param {String} email - The external tutor's email
 * @param {Object} res - The HTTP res
 * @returns {Boolean}  - This method returns true if the delete of external tutor was successfull, else false
 */cov_2q1b7ebc4b().s[109]++;exports.deleteExTutor=function(email,res){cov_2q1b7ebc4b().f[9]++;cov_2q1b7ebc4b().s[110]++;return new Promise(function(resolve,reject){cov_2q1b7ebc4b().f[10]++;var delExTutor=(cov_2q1b7ebc4b().s[111]++,ExternalTutorModel.deleteExTutor(email));cov_2q1b7ebc4b().s[112]++;delExTutor.then(function(result){cov_2q1b7ebc4b().f[11]++;cov_2q1b7ebc4b().s[113]++;if(!result){cov_2q1b7ebc4b().b[33][0]++;cov_2q1b7ebc4b().s[114]++;resolve(false);}else{cov_2q1b7ebc4b().b[33][1]++;cov_2q1b7ebc4b().s[115]++;resolve(true);}});});};/**
 * This method gets an host organization by id
 * @param {String} id - The id of Host organization
 * @returns {JSON} - It return an JSON Object containing the informations of the host organization
 */cov_2q1b7ebc4b().s[116]++;exports.getHostOrganization=function(id){cov_2q1b7ebc4b().f[12]++;cov_2q1b7ebc4b().s[117]++;return new Promise(function(resolve,reject){cov_2q1b7ebc4b().f[13]++;var get=(cov_2q1b7ebc4b().s[118]++,OrganizationModel.retrieveOne(id));cov_2q1b7ebc4b().s[119]++;get.then(function(result){cov_2q1b7ebc4b().f[14]++;cov_2q1b7ebc4b().s[120]++;resolve({ErasmusCode:result.getErasmusCode(),Faculty:result.getFaculty(),Address:result.getAddress(),Size:result.getOrgSize(),Country:result.getCountry(),Contacts:result.getContacts(),Name:result.getName()});});});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInR1dG9yQ29udHJvbC5qcyJdLCJuYW1lcyI6WyJoYXNoIiwicmVxdWlyZSIsIkV4dGVybmFsVHV0b3JNb2RlbCIsIk9yZ2FuaXphdGlvbk1vZGVsIiwiZXhwb3J0cyIsImFkZEhvc3RPcmciLCJyZXEiLCJyZXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImVyYXNtdXNDb2RlIiwiYm9keSIsImlucHV0RXJhc211c0NvZGUiLCJmYWN1bHR5IiwiaW5wdXRGYWNvbHRhIiwiYWRkcmVzcyIsImlucHV0QWRkcmVzcyIsIm9yZ1NpemUiLCJpbnB1dFNpemUiLCJjb3VudHJ5IiwiaW5wdXRDb3VudHJ5IiwiY29udGFjdCIsImlucHV0Q29udGFjdHMiLCJuYW1lIiwiaW5wdXROYW1lVCIsImlzUmlnaHQiLCJsZW5ndGgiLCJ0ZXN0IiwiY29va2llIiwib3JnYW5penphemlvbmVFc3Rlcm5hIiwic2V0Q29udGFjdHMiLCJzZXROYW1lIiwic2V0Q291bnRyeSIsInNldE9yZ1NpemUiLCJzZXRBZGRyZXNzIiwic2V0RmFjdWx0eSIsInNldEVyYXNtdXNDb2RlIiwiY2hlY2tFIiwiZmluZEJ5RWNvZGUiLCJ0aGVuIiwicmVzdWx0IiwiYWRkRXh0VHV0b3IiLCJpbnB1dE5hbWVFeCIsInN1cm5hbWUiLCJpbnB1dFN1cm5hbWVFeCIsImVtYWlsIiwiaW5wdXRFbWFpbEV4IiwicGFzc3dvcmQiLCJpbnB1dFBhc3N3b3JkIiwicmVwYXNzd29yZCIsImlucHV0UmVQYXNzd29yZCIsIm9yZ2FuaXphdGlvbiIsImlucHV0T3JnYW5pemF0aW9uRXgiLCJwYXNzd29yZEhhc2hlZCIsImhhc2hQYXNzd29yZCIsInR1dG9yRXN0ZXJubyIsInNldFN1cm5hbWUiLCJzZXRPcmdhbml6YXRpb24iLCJzZXRFbWFpbCIsInNldFBhc3N3b3JkIiwiZmluZEJ5RW1haWxBIiwiZGVsZXRlSG9zdE9yZyIsImVyYXNtdXNjb2RlIiwiZGVsSG9zdCIsImRlbGV0ZUV4VHV0b3IiLCJkZWxFeFR1dG9yIiwiZ2V0SG9zdE9yZ2FuaXphdGlvbiIsImlkIiwiZ2V0IiwicmV0cmlldmVPbmUiLCJFcmFzbXVzQ29kZSIsImdldEVyYXNtdXNDb2RlIiwiRmFjdWx0eSIsImdldEZhY3VsdHkiLCJBZGRyZXNzIiwiZ2V0QWRkcmVzcyIsIlNpemUiLCJnZXRPcmdTaXplIiwiQ291bnRyeSIsImdldENvdW50cnkiLCJDb250YWN0cyIsImdldENvbnRhY3RzIiwiTmFtZSIsImdldE5hbWUiXSwibWFwcGluZ3MiOiJrbmtCQWVZOzJGQWZaLEdBQUlBLENBQUFBLElBQUksMEJBQUdDLE9BQU8sQ0FBQyxXQUFELENBQVYsQ0FBUixDQUNBLEdBQUlDLENBQUFBLGtCQUFrQiwwQkFBR0QsT0FBTyxDQUFDLDRCQUFELENBQVYsQ0FBdEIsQ0FDQSxHQUFJRSxDQUFBQSxpQkFBaUIsMEJBQUdGLE9BQU8sQ0FBQywrQkFBRCxDQUFWLENBQXJCLENBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEcsd0JBQ0FHLE9BQU8sQ0FBQ0MsVUFBUixDQUFxQixTQUFVQyxHQUFWLENBQWVDLEdBQWYsQ0FBb0IsaURBQ3ZDLE1BQU8sSUFBSUMsQ0FBQUEsT0FBSixDQUFZLFNBQVVDLE9BQVYsQ0FBbUJDLE1BQW5CLENBQTJCLHlCQUM1QyxHQUFJQyxDQUFBQSxXQUFXLDBCQUFHTCxHQUFHLENBQUNNLElBQUosQ0FBU0MsZ0JBQVosQ0FBZixDQUNBLEdBQUlDLENBQUFBLE9BQU8sMEJBQUdSLEdBQUcsQ0FBQ00sSUFBSixDQUFTRyxZQUFaLENBQVgsQ0FDQSxHQUFJQyxDQUFBQSxPQUFPLDBCQUFHVixHQUFHLENBQUNNLElBQUosQ0FBU0ssWUFBWixDQUFYLENBQ0EsR0FBSUMsQ0FBQUEsT0FBTywwQkFBR1osR0FBRyxDQUFDTSxJQUFKLENBQVNPLFNBQVosQ0FBWCxDQUNBLEdBQUlDLENBQUFBLE9BQU8sMEJBQUdkLEdBQUcsQ0FBQ00sSUFBSixDQUFTUyxZQUFaLENBQVgsQ0FDQSxHQUFJQyxDQUFBQSxPQUFPLDJCQUFHaEIs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Q0FBbUJDLE1BQW5CLENBQTJCLDBCQUM1QyxHQUFJMkQsQ0FBQUEsR0FBRyw0QkFBR2xFLGlCQUFpQixDQUFDbUUsV0FBbEIsQ0FBOEJGLEVBQTlCLENBQUgsQ0FBUCxDQUQ0QywwQkFFNUNDLEdBQUcsQ0FBQzdCLElBQUosQ0FBUyxTQUFVQyxNQUFWLENBQWtCLG9EQUN6QmhDLE9BQU8sQ0FBQyxDQUFFOEQsV0FBVyxDQUFFOUIsTUFBTSxDQUFDK0IsY0FBUCxFQUFmLENBQXdDQyxPQUFPLENBQUVoQyxNQUFNLENBQUNpQyxVQUFQLEVBQWpELENBQXNFQyxPQUFPLENBQUVsQyxNQUFNLENBQUNtQyxVQUFQLEVBQS9FLENBQW9HQyxJQUFJLENBQUVwQyxNQUFNLENBQUNxQyxVQUFQLEVBQTFHLENBQStIQyxPQUFPLENBQUV0QyxNQUFNLENBQUN1QyxVQUFQLEVBQXhJLENBQTZKQyxRQUFRLENBQUV4QyxNQUFNLENBQUN5QyxXQUFQLEVBQXZLLENBQTZMQyxJQUFJLENBQUUxQyxNQUFNLENBQUMyQyxPQUFQLEVBQW5NLENBQUQsQ0FBUCxDQUNELENBRkQsRUFHRCxDQUxNLENBQVAsQ0FNRCxDQVBEIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGhhc2ggPSByZXF1aXJlKCcuL2hhc2guanMnKVxudmFyIEV4dGVybmFsVHV0b3JNb2RlbCA9IHJlcXVpcmUoJy4uL21vZGVscy9leHRlcm5hbHR1dG9yLmpzJylcbnZhciBPcmdhbml6YXRpb25Nb2RlbCA9IHJlcXVpcmUoJy4uL21vZGVscy9ob3N0b3JnYW5pemF0aW9uLmpzJylcblxuLyoqXG4gKiBUaGlzIG1ldGhvZCBpbnNlcnRzIGFuIGhvc3Qgb3JnYW5pemF0aW9uXG4gKiBAcGFyYW0ge09iamVjdH0gcmVxIC0gVGhlIEhUVFAgcmVxXG4gKiBAcGFyYW0ge09iamVjdH0gcmVzIC0gVGhlIEhUVFAgcmVzXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gIC0gVGhpcyBtZXRob2QgcmV0dXJucyB0cnVlIGlmIHRoZSBpbnNlcnQgb2YgaG9zdCBvcmdhbml6YXRpb24gd2FzIHN1Y2Nlc3NmdWxsLCBlbHNlIGZhbHNlXG4gKi9cbmV4cG9ydHMuYWRkSG9zdE9yZyA9IGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhciBlcmFzbXVzQ29kZSA9IHJlcS5ib2R5LmlucHV0RXJhc211c0NvZGVcbiAgICB2YXIgZmFjdWx0eSA9IHJlcS5ib2R5LmlucHV0RmFjb2x0YVxuICAgIHZhciBhZGRyZXNzID0gcmVxLmJvZHkuaW5wdXRBZGRyZXNzXG4gICAgdmFyIG9yZ1NpemUgPSByZXEuYm9keS5pbnB1dFNpemVcbiAgICB2YXIgY291bnRyeSA9IHJlcS5ib2R5LmlucHV0Q291bnRyeVxuICAgIHZhciBjb250YWN0ID0gcmVxLmJvZHkuaW5wdXRDb250YWN0c1xuICAgIHZhciBuYW1lID0gcmVxLmJvZHkuaW5wdXROYW1lVFxuXG4gICAgdmFyIGlzUmlnaHQgPSB0cnVlXG5cbiAgICBpZiAoKGVyYXNtdXNDb2RlID09IG51bGwpIHx8IChlcmFzbXVzQ29kZS5sZW5ndGggPD0gMykgfHwgKCEvXltBLVphLXowLTldKyQvLnRlc3QoZXJhc211c0NvZGUpKSkge1xuICAgICAgcmVzLmNvb2tpZSgnZXJyRXJhc211c0NvZGUnLCAnMScpXG4gICAgICBpc1JpZ2h0ID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoKG5hbWUgPT0gbnVsbCkgfHwgKG5hbWUubGVuZ3RoIDw9IDEpIHx8ICghL15bQS1aYS16XSskLy50ZXN0KG5hbWUpKSkge1xuICAgICAgcmVzLmNvb2tpZSgnZXJyVHV0b3JOYW1lJywgJzEnKVxuICAgICAgaXNSaWdodCA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKChmYWN1bHR5ID09IG51bGwpIHx8IChmYWN1bHR5Lmxlbmd0aCA8PSAxKSB8fCAoIS9eW0EtWmEtel0rJC8udGVzdChmYWN1bHR5KSkpIHtcbiAgICAgIHJlcy5jb29raWUoJ2VyckZhY29sdGEnLCAnMScpXG4gICAgICBpc1JpZ2h0ID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoKGFkZHJlc3MgPT0gbnVsbCkgfHwgKGFkZHJlc3MubGVuZ3RoIDw9IDYpIHx8ICghL15bQS1aYS16MC05LFxcc10rJC8udGVzdChhZGRyZXNzKSkpIHtcbiAgICAgIHJlcy5jb29raWUoJ2VyckhBZGRyZXNzJywgJzEnKVxuICAgICAgaXNSaWdodCA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKChjb250YWN0ID09IG51bGwpIHx8IChjb250YWN0Lmxlbmd0aCA8PSA3KSB8fCAoIS8oXlswLTldezksMTB9JHxbYS16MC05ISMkJSYnKis9P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKis9P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSl7MSx9PykvLnRlc3QoY29udGFjdCkpKSB7XG4gICAgICByZXMuY29va2llKCdlcnJDb250YXR0aScsICcxJylcbiAgICAgIGlzUmlnaHQgPSBmYWxzZVxuICAgIH1cblxuICAgIGlmICgoY291bnRyeSA9PSBudWxsKSB8fCAoY291bnRyeS5sZW5ndGggPD0gMSkgfHwgKCEvXltBLVphLXowLTlcXHNdKyQvLnRlc3QoY291bnRyeSkpKSB7XG4gICAgICByZXMuY29va2llKCdlcnJDb3VudHJ5TmFtZScsICcxJylcbiAgICAgIGlzUmlnaHQgPSBmYWxzZVxuICAgIH1cblxuICAgIGlmICgob3JnU2l6ZSA9PSBudWxsKSB8fCAob3JnU2l6ZSA9PSAwKSB8fCAoIS9eWzAtOVxcc10rJC8udGVzdChvcmdTaXplKSkpIHtcbiAgICAgIHJlcy5jb29raWUoJ2VyclNpemUnLCAnMScpXG4gICAgICBpc1JpZ2h0ID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoIWlzUmlnaHQpIHtcbiAgICAgIHJlc29sdmUoZmFsc2UpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgaG9zdCBvcmdhbml6YXRpb24gb2JqZWN0XG4gICAgdmFyIG9yZ2FuaXp6YXppb25lRXN0ZXJuYSA9IG5ldyBPcmdhbml6YXRpb25Nb2RlbCgpXG4gICAgb3JnYW5penphemlvbmVFc3Rlcm5hLnNldENvbnRhY3RzKGNvbnRhY3QpXG4gICAgb3JnYW5penphemlvbmVFc3Rlcm5hLnNldE5hbWUobmFtZSlcbiAgICBvcmdhbml6emF6aW9uZUVzdGVybmEuc2V0Q291bnRyeShjb3VudHJ5KVxuICAgIG9yZ2FuaXp6YXppb25lRXN0ZXJuYS5zZXRPcmdTaXplKG9yZ1NpemUpXG4gICAgb3JnYW5penphemlvbmVFc3Rlcm5hLnNldEFkZHJlc3MoYWRkcmVzcylcbiAgICBvcmdhbml6emF6aW9uZUVzdGVybmEuc2V0RmFjdWx0eShmYWN1bHR5KVxuICAgIG9yZ2FuaXp6YXppb25lRXN0ZXJuYS5zZXRFcmFzbXVzQ29kZShlcmFzbXVzQ29kZSlcblxuICAgIHZhciBjaGVja0UgPSBPcmdhbml6YXRpb25Nb2RlbC5maW5kQnlFY29kZShlcmFzbXVzQ29kZSlcblxuICAgIGNoZWNrRS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgIHJlcy5jb29raWUoJ2VyckFscmVhZHlSZWdIJywgJzEnKVxuICAgICAgICByZXNvbHZlKGZhbHNlKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgLy8gU2F2ZSBzdHVkZW50IGluIGRhdGFiYXNlXG4gICAgICAgIE9yZ2FuaXphdGlvbk1vZGVsLmFkZEhvc3RPcmcob3JnYW5penphemlvbmVFc3Rlcm5hKVxuICAgICAgICByZXNvbHZlKHRydWUpXG4gICAgICB9XG4gICAgfSlcbiAgfSlcbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCBpbnNlcnRzIGFuIGV4dGVybmFsIHR1dG9yXG4gKiBAcGFyYW0ge09iamVjdH0gcmVxIC0gVGhlIEhUVFAgcmVxXG4gKiBAcGFyYW0ge09iamVjdH0gcmVzIC0gVGhlIEhUVFAgcmVzXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gIC0gVGhpcyBtZXRob2QgcmV0dXJucyB0cnVlIGlmIHRoZSBpbnNlcnQgb2YgZXh0ZXJuYWwgdHV0b3Igd2FzIHN1Y2Nlc3NmdWxsLCBlbHNlIGZhbHNlXG4gKi9cbmV4cG9ydHMuYWRkRXh0VHV0b3IgPSBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgbmFtZSA9IHJlcS5ib2R5LmlucHV0TmFtZUV4XG4gICAgdmFyIHN1cm5hbWUgPSByZXEuYm9keS5pbnB1dFN1cm5hbWVFeFxuICAgIHZhciBlbWFpbCA9IHJlcS5ib2R5LmlucHV0RW1haWxFeFxuICAgIHZhciBwYXNzd29yZCA9IHJlcS5ib2R5LmlucHV0UGFzc3dvcmRcbiAgICB2YXIgcmVwYXNzd29yZCA9IHJlcS5ib2R5LmlucHV0UmVQYXNzd29yZFxuICAgIHZhciBvcmdhbml6YXRpb24gPSByZXEuYm9keS5pbnB1dE9yZ2FuaXphdGlvbkV4XG5cbiAgICB2YXIgaXNSaWdodCA9IHRydWVcbiAgICBpZiAocGFzc3dvcmQgIT0gcmVwYXNzd29yZCkge1xuICAgICAgaXNSaWdodCA9IGZhbHNlXG4gICAgfVxuXG4gICAgaXNSaWdodCA9IHRydWVcbiAgICBpZiAoKG5hbWUgPT0gbnVsbCkgfHwgKG5hbWUubGVuZ3RoIDw9IDEpIHx8ICghL15bQS1aYS16XSskLy50ZXN0KG5hbWUpKSkge1xuICAgICAgcmVzLmNvb2tpZSgnZXJyRXhUdXRvck5hbWUnLCAnMScpXG4gICAgICBpc1JpZ2h0ID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoKHN1cm5hbWUgPT0gbnVsbCkgfHwgKHN1cm5hbWUubGVuZ3RoIDw9IDEpIHx8ICghL15bQS1aYS16XSskLy50ZXN0KHN1cm5hbWUpKSkge1xuICAgICAgcmVzLmNvb2tpZSgnZXJyRXhUdXRvclN1cm5hbWUnLCAnMScpXG4gICAgICBpc1JpZ2h0ID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoKGVtYWlsID09IG51bGwpIHx8IChlbWFpbC5sZW5ndGggPD0gNikgfHwgKCEvW2EtejAtOSEjJCUmJyorPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pezEsfT8vLnRlc3QoZW1haWwpKSkge1xuICAgICAgcmVzLmNvb2tpZSgnZXJyRXhUdXRvckVtYWlsJywgJzEnKVxuICAgICAgaXNSaWdodCA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKChvcmdhbml6YXRpb24gPT0gbnVsbCkgfHwgKG9yZ2FuaXphdGlvbi5sZW5ndGggPD0gMSkgfHwgKCEvXltBLVphLXowLTlcXHNdKyQvLnRlc3Qob3JnYW5pemF0aW9uKSkpIHtcbiAgICAgIHJlcy5jb29raWUoJ2VyckV4T3JnYW5pemF0aW9uTmFtZScsICcxJylcbiAgICAgIGlzUmlnaHQgPSBmYWxzZVxuICAgIH1cblxuICAgIGlmICgocGFzc3dvcmQgPT0gbnVsbCkgfHwgKHBhc3N3b3JkLmxlbmd0aCA8PSA3KSB8fCAoIS9eW0EtWmEtejAtOV0rJC8udGVzdChwYXNzd29yZCkpKSB7XG4gICAgICByZXMuY29va2llKCdlcnJQYXNzd29yZCcsICcxJylcbiAgICAgIGlzUmlnaHQgPSBmYWxzZVxuICAgIH1cblxuICAgIGlmIChyZXBhc3N3b3JkICE9IHBhc3N3b3JkKSB7XG4gICAgICByZXMuY29va2llKCdlcnJQYXNzd29yZENvbmZpcm0nLCAnMScpXG4gICAgICBpc1JpZ2h0ID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoIWlzUmlnaHQpIHtcbiAgICAgIHJlc29sdmUoZmFsc2UpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBoYXNoaW5nIGUgc2FsdCBvZiBwYXNzd29yZFxuICAgIHZhciBwYXNzd29yZEhhc2hlZCA9IGhhc2guaGFzaFBhc3N3b3JkKHBhc3N3b3JkKVxuXG4gICAgLy8gQ3JlYXRlIGV4dGVybmFsIHR1dG9yIG9iamVjdFxuICAgIHZhciB0dXRvckVzdGVybm8gPSBuZXcgRXh0ZXJuYWxUdXRvck1vZGVsKClcbiAgICB0dXRvckVzdGVybm8uc2V0U3VybmFtZShzdXJuYW1lKVxuICAgIHR1dG9yRXN0ZXJuby5zZXROYW1lKG5hbWUpXG4gICAgdHV0b3JFc3Rlcm5vLnNldE9yZ2FuaXphdGlvbihvcmdhbml6YXRpb24pXG4gICAgdHV0b3JFc3Rlcm5vLnNldEVtYWlsKGVtYWlsKVxuICAgIHR1dG9yRXN0ZXJuby5zZXRQYXNzd29yZChwYXNzd29yZEhhc2hlZClcblxuICAgIHZhciBjaGVja0UgPSBFeHRlcm5hbFR1dG9yTW9kZWwuZmluZEJ5RW1haWxBKGVtYWlsKVxuICAgIGNoZWNrRS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgIHJlc29sdmUoZmFsc2UpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAvLyBTYXZlIHR1dG9yIGluIGRhdGFiYXNlXG4gICAgICAgIEV4dGVybmFsVHV0b3JNb2RlbC5hZGRFeHRUdXRvcih0dXRvckVzdGVybm8pXG4gICAgICAgIHJlc29sdmUodHJ1ZSlcbiAgICAgIH1cbiAgICB9KVxuICB9KVxufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIGRlbGV0ZXMgYW4gaG9zdCBvcmdhbml6YXRpb25cbiAqIEBwYXJhbSB7U3RyaW5nfSBlcmFzbXVzQ29kZSAtIFRoZSBlcmFzbXVzIGNvZGUgb2YgdGhlIGhvc3Qgb3JnYW5pemF0aW9uIHRvIGRlbGV0ZVxuICogQHBhcmFtIHtPYmplY3R9IHJlcyAtIFRoZSBIVFRQIHJlc1xuICogQHJldHVybnMge0Jvb2xlYW59ICAtIFRoaXMgbWV0aG9kIHJldHVybnMgdHJ1ZSBpZiB0aGUgZGVsZXRlIG9mIGhvc3Qgb3JnYW5pemF0aW9uIHdhcyBzdWNjZXNzZnVsbCwgZWxzZSBmYWxzZVxuICovXG5leHBvcnRzLmRlbGV0ZUhvc3RPcmcgPSBmdW5jdGlvbiAoZXJhc211c2NvZGUsIHJlcykge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhciBkZWxIb3N0ID0gT3JnYW5pemF0aW9uTW9kZWwuZGVsZXRlSG9zdE9yZyhlcmFzbXVzY29kZSlcbiAgICBkZWxIb3N0LnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgcmVzb2x2ZShmYWxzZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmUodHJ1ZSlcbiAgICAgIH1cbiAgICB9KVxuICB9KVxufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIGRlbGV0ZXMgYW4gZXh0ZXJuYWwgdHV0b3JcbiAqIEBwYXJhbSB7U3RyaW5nfSBlbWFpbCAtIFRoZSBleHRlcm5hbCB0dXRvcidzIGVtYWlsXG4gKiBAcGFyYW0ge09iamVjdH0gcmVzIC0gVGhlIEhUVFAgcmVzXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gIC0gVGhpcyBtZXRob2QgcmV0dXJucyB0cnVlIGlmIHRoZSBkZWxldGUgb2YgZXh0ZXJuYWwgdHV0b3Igd2FzIHN1Y2Nlc3NmdWxsLCBlbHNlIGZhbHNlXG4gKi9cbmV4cG9ydHMuZGVsZXRlRXhUdXRvciA9IGZ1bmN0aW9uIChlbWFpbCwgcmVzKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIGRlbEV4VHV0b3IgPSBFeHRlcm5hbFR1dG9yTW9kZWwuZGVsZXRlRXhUdXRvcihlbWFpbClcbiAgICBkZWxFeFR1dG9yLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgcmVzb2x2ZShmYWxzZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmUodHJ1ZSlcbiAgICAgIH1cbiAgICB9KVxuICB9KVxufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIGdldHMgYW4gaG9zdCBvcmdhbml6YXRpb24gYnkgaWRcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZCAtIFRoZSBpZCBvZiBIb3N0IG9yZ2FuaXphdGlvblxuICogQHJldHVybnMge0pTT059IC0gSXQgcmV0dXJuIGFuIEpTT04gT2JqZWN0IGNvbnRhaW5pbmcgdGhlIGluZm9ybWF0aW9ucyBvZiB0aGUgaG9zdCBvcmdhbml6YXRpb25cbiAqL1xuZXhwb3J0cy5nZXRIb3N0T3JnYW5pemF0aW9uID0gZnVuY3Rpb24gKGlkKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIGdldCA9IE9yZ2FuaXphdGlvbk1vZGVsLnJldHJpZXZlT25lKGlkKVxuICAgIGdldC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgIHJlc29sdmUoeyBFcmFzbXVzQ29kZTogcmVzdWx0LmdldEVyYXNtdXNDb2RlKCksIEZhY3VsdHk6IHJlc3VsdC5nZXRGYWN1bHR5KCksIEFkZHJlc3M6IHJlc3VsdC5nZXRBZGRyZXNzKCksIFNpemU6IHJlc3VsdC5nZXRPcmdTaXplKCksIENvdW50cnk6IHJlc3VsdC5nZXRDb3VudHJ5KCksIENvbnRhY3RzOiByZXN1bHQuZ2V0Q29udGFjdHMoKSwgTmFtZTogcmVzdWx0LmdldE5hbWUoKSB9KVxuICAgIH0pXG4gIH0pXG59XG4iXX0=